# 𝙗𝙖𝙨𝙝 基础

## Shell 特殊变量

| 变量 | 说明                                              |
| ---- | ------------------------------------------------- |
| $0   | 当前脚本名                                        |
| $[N] | 通过命令行传递进入的某个参数，比如$1表示第1个参数 |
| $#   | 通过命令行传递进入的参数数量                      |
| $*   | 通过命令行传递进入的所有参数                      |
| $@   | 通过命令行传递进入的所有参数，与$*略有不同        |
| $?   | 上个命令的退出状态或返回值                        |
| $$   | 当前Shell的进程ID                                 |

::: tip
不加引号(“”)时，`$*`和`$@`都是返回传入的参数；加了引号后，`$*`将传入的参数作为一个单独的字符串整体，`$@`将每个参数作为一个字符串返回。
:::

## 命令替换

将某些命令执行的结果存储到一个变量中，以便后续使用。示例如下：

```bash
#!/bin/bash
now=`date`
echo "date now is ${now}"
a=10
b=20
val=`expr $a + $b`
echo "a + b = $val"
```

## 运算符

### 算数运算符

| 运算操作 | 操作符 |
| -------- | ------ |
| 加法     | +      |
| 减法     | -      |
| 乘法     | *      |
| 除法     | /      |
| 取余     | %      |
| 赋值     | =      |
| 相等比较 | ==     |
| 不等比较 | !=     |

### 关系运算符

关系运算符只支持数字，不支持字符串，除非字符串的结果是数字（比如真或假）

| 运算操作             | 操作符 |
| -------------------- | ------ |
| 相等                 | -eq    |
| 不等                 | -ne    |
| 左边是否大于右边     | -gt    |
| 左边是否小于右边     | -lt    |
| 左边是否大于等于右边 | -ge    |
| 左边是否小于等于右边 | -le    |

### 逻辑运算符

| 运算操作 | 操作符 |
| -------- | ------ |
| 非       | !      |
| 或       | -o     |
| 与       | -a     |

### 字符串运算符

| 运算操作        | 操作符 |
| --------------- | ------ |
| 字符串相等      | =      |
| 字符串不等      | !=     |
| 字符串长度为0   | -z     |
| 字符串长度不为0 | -n     |
| 字符串为空      | str    |

### 文件测试运算符

| 运算操作               | 操作符  |
| ---------------------- | ------- |
| 检测文件是否为块设备   | -b file |
| 检测文件是否为字符设备 | -c file |
| 检测文件是否为目录     | -d file |
| 检测文件是否为普通文件 | -f file |
| 检测文件是否为管道文件 | -p file |
| 检测文件是否可读       | -r file |
| 检测文件是否可写       | -w file |
| 检测文件是否可执行     | -x file |
| 检测文件是否为空       | -s file |
| 检测文件是否存在       | -e file |

## 字符串

### 单字符串

```bash
abc='only string'
```

单字符串不支持任何变量，所有信息都直接输出

### 转义字符串

```bash
ddd='hello'
abc="${ddd} \"suda-morris\"!"
```

在转义字符串中可以直接显示变量，也支持转义符号

### 字符串拼接

```bash
your_name="morris"
greeting=$your_name" is hansome"
echo $greeting
```

### 获取字符串长度

```bash
string="abcd"
echo ${#string}
```

### 提取字符

```bash
string="Hello World"
echo ${string:2:2} # 输出 ll
```

## 重定向

* 将标准输出 (STDOUT) 和标准错误 (STDERR) 重定向到“黑洞”中

```bash
ls device >/dev/null 2>&1
```

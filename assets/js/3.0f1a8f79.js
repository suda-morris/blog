(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{394:function(t,s,a){t.exports=a.p+"assets/img/riscv_alu.b4571647.png"},395:function(t,s,a){t.exports=a.p+"assets/img/riscv_data_path.75ca8e0f.png"},396:function(t,s,a){t.exports=a.p+"assets/img/riscv_instruction_type.6459e601.png"},397:function(t,s,a){t.exports=a.p+"assets/img/riscv_R_instruction.4f0a03ae.png"},398:function(t,s,a){t.exports=a.p+"assets/img/riscv_I_instruction.350f3bc5.png"},399:function(t,s,a){t.exports=a.p+"assets/img/riscv_load_store_instruction.9677a930.png"},400:function(t,s,a){t.exports=a.p+"assets/img/riscv_B_instruction.768409cf.png"},401:function(t,s,a){t.exports=a.p+"assets/img/riscv_jump_instruction.53be1f36.png"},402:function(t,s,a){t.exports=a.p+"assets/img/riscv_U_instruction.a6d4c422.png"},403:function(t,s,a){t.exports=a.p+"assets/img/riscv_alu_design.d2271fee.png"},404:function(t,s,a){t.exports=a.p+"assets/img/single_instruction_CPU.5011d2a2.png"},405:function(t,s,a){t.exports=a.p+"assets/img/register_file.98edccb1.png"},406:function(t,s,a){t.exports=a.p+"assets/img/riscv_full_data_path.2bd3abe3.png"},407:function(t,s,a){t.exports=a.p+"assets/img/riscv_cpu_controller_truth_table.9b41a36f.png"},408:function(t,s,a){t.exports=a.p+"assets/img/riscv_R_instruction_data_path.1c967b1f.png"},409:function(t,s,a){t.exports=a.p+"assets/img/riscv_I_instruction_data_path.a793de42.png"},410:function(t,s,a){t.exports=a.p+"assets/img/riscv_load_instruction_data_path.994b1edd.png"},411:function(t,s,a){t.exports=a.p+"assets/img/riscv_store_instruction_data_path.104dac06.png"},412:function(t,s,a){t.exports=a.p+"assets/img/riscv_B_instruction_data_path.d7c245a9.png"},413:function(t,s,a){t.exports=a.p+"assets/img/riscv_jalr_instruction_data_path.f2b992fe.png"},414:function(t,s,a){t.exports=a.p+"assets/img/riscv_jal_instruction_data_path.b400a062.png"},415:function(t,s,a){t.exports=a.p+"assets/img/riscv_pipeline.39941dc3.png"},416:function(t,s,a){t.exports=a.p+"assets/img/riscv_pipeline_registers.7691b247.png"},417:function(t,s,a){t.exports=a.p+"assets/img/riscv_cache.0010b661.png"},418:function(t,s,a){t.exports=a.p+"assets/img/riscv_cache_structure.b3d3a365.png"},419:function(t,s,a){t.exports=a.p+"assets/img/riscv_cache_direct_mapping.a724b585.png"},420:function(t,s,a){t.exports=a.p+"assets/img/riscv_cache_direct_mapping_example.1f5de907.png"},421:function(t,s,a){t.exports=a.p+"assets/img/riscv_cache_full_association_mapping.50eaacf3.png"},422:function(t,s,a){t.exports=a.p+"assets/img/riscv_cache_full_association_mapping_example.c6b16b55.png"},423:function(t,s,a){t.exports=a.p+"assets/img/riscv_set_associative_cache.88e53b1f.png"},424:function(t,s,a){t.exports=a.p+"assets/img/riscv_set_associative_cache_example.90b50168.png"},425:function(t,s,a){t.exports=a.p+"assets/img/riscv_mmu.7262e30e.png"},426:function(t,s,a){t.exports=a.p+"assets/img/riscv_mmu_segment_manage.fbbecfd3.png"},427:function(t,s,a){t.exports=a.p+"assets/img/riscv_mmu_page_manage.938e9249.png"},428:function(t,s,a){t.exports=a.p+"assets/img/riscv_mmu_two_level_page_manage.5830951d.png"},429:function(t,s,a){t.exports=a.p+"assets/img/riscv_tlb.22e93fc6.png"},430:function(t,s,a){t.exports=a.p+"assets/img/riscv_tlb_location.3998049f.png"},431:function(t,s,a){t.exports=a.p+"assets/img/riscv_tlb_translation.7a0bf91b.png"},432:function(t,s,a){t.exports=a.p+"assets/img/riscv_vma_pma_translation.4670166a.png"},433:function(t,s,a){t.exports=a.p+"assets/img/csr_register_encoding.43e73e84.png"},434:function(t,s,a){t.exports=a.p+"assets/img/riscv_csr_register_access_instruction.f54ee67a.png"},435:function(t,s,a){t.exports=a.p+"assets/img/riscv_interrupt_enter.192ffaf5.png"},436:function(t,s,a){t.exports=a.p+"assets/img/riscv_interrupt_exit.16905898.png"},437:function(t,s,a){t.exports=a.p+"assets/img/riscv_exception_csr_registers.3be19f7b.png"},438:function(t,s,a){t.exports=a.p+"assets/img/riscv_exception_csr_register_definitions.7cb72969.png"},439:function(t,s,a){t.exports=a.p+"assets/img/riscv_exception_mtvec_register.bf624157.png"},440:function(t,s,a){t.exports=a.p+"assets/img/riscv_machine_exception_codes.ec2ed612.png"},441:function(t,s,a){t.exports=a.p+"assets/img/riscv_exception_return.65f3e1bd.png"},442:function(t,s,a){t.exports=a.p+"assets/img/riscv_interrupt_enable_pending.c4582d71.png"},443:function(t,s,a){t.exports=a.p+"assets/img/riscv_interrupt_priority.987e662d.png"},444:function(t,s,a){t.exports=a.p+"assets/img/riscv_one_cycle_intruction_interrupt_enter.10ae6c05.png"},445:function(t,s,a){t.exports=a.p+"assets/img/riscv_one_cycle_intruction_interrupt_exit.05a8d21c.png"},446:function(t,s,a){t.exports=a.p+"assets/img/riscv_isa_extension.6e965d57.png"},447:function(t,s,a){t.exports=a.p+"assets/img/riscv_isa_custom_instruction.47970635.png"},540:function(t,s,a){"use strict";a.r(s);var r=a(12),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"risc-v-基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#risc-v-基础"}},[t._v("#")]),t._v(" 𝑹𝑰𝑺𝑪-𝑽 基础")]),t._v(" "),s("h2",{attrs:{id:"单核-cpu-组成结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单核-cpu-组成结构"}},[t._v("#")]),t._v(" 单核 CPU 组成结构")]),t._v(" "),s("p",[s("img",{attrs:{src:a(394),alt:"ALU"}})]),t._v(" "),s("p",[s("strong",[t._v("数据通路")]),t._v("是处理器中执行处理器所需操作的硬件部分，就像是处理器的四肢。")]),t._v(" "),s("p",[s("strong",[t._v("控制器")]),t._v("是对数据通路要做什么操作进行行为调度的硬件结构，就像是处理器的大脑。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(395),alt:"ALU"}})]),t._v(" "),s("h2",{attrs:{id:"指令集划分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令集划分"}},[t._v("#")]),t._v(" 指令集划分")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("基本指令集")]),t._v(" "),s("th",[t._v("指令数")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("RV32I")]),t._v(" "),s("td",[t._v("47")]),t._v(" "),s("td",[t._v("32位地址空间与整数指令,支持32个通用整数寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("RV32E")]),t._v(" "),s("td",[t._v("47")]),t._v(" "),s("td",[t._v("仅支持16个通用整数寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("RV64I")]),t._v(" "),s("td",[t._v("59")]),t._v(" "),s("td",[t._v("64位地址空间与整数指令,以及一部分64位和32位的指令")])]),t._v(" "),s("tr",[s("td",[t._v("RV128I")]),t._v(" "),s("td",[t._v("71")]),t._v(" "),s("td",[t._v("128位地址空间与整数指令,以及一部分64位和32位的指令")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("扩展指令集")]),t._v(" "),s("th",[t._v("指令数")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("M")]),t._v(" "),s("td",[t._v("8")]),t._v(" "),s("td",[t._v("整数乘法与除法指令")])]),t._v(" "),s("tr",[s("td",[t._v("A")]),t._v(" "),s("td",[t._v("11")]),t._v(" "),s("td",[t._v("存储器原子操作和Load-Reserved/Store-Conditional指令")])]),t._v(" "),s("tr",[s("td",[t._v("F")]),t._v(" "),s("td",[t._v("26")]),t._v(" "),s("td",[t._v("单精度(32bit)浮点指令")])]),t._v(" "),s("tr",[s("td",[t._v("D")]),t._v(" "),s("td",[t._v("26")]),t._v(" "),s("td",[t._v("双精度(32bit)浮点指令,必须支持F扩展指令")])]),t._v(" "),s("tr",[s("td",[t._v("C")]),t._v(" "),s("td",[t._v("46")]),t._v(" "),s("td",[t._v("压缩指令,指令长度为16位")])])])]),t._v(" "),s("h2",{attrs:{id:"基本指令集类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本指令集类型"}},[t._v("#")]),t._v(" 基本指令集类型")]),t._v(" "),s("p",[s("img",{attrs:{src:a(396),alt:"指令编码格式"}})]),t._v(" "),s("h3",{attrs:{id:"r-register-型指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#r-register-型指令"}},[t._v("#")]),t._v(" R(Register)型指令")]),t._v(" "),s("p",[s("img",{attrs:{src:a(397),alt:"R型指令"}})]),t._v(" "),s("h4",{attrs:{id:"指令汇编格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令汇编格式"}},[t._v("#")]),t._v(" 指令汇编格式")]),t._v(" "),s("h5",{attrs:{id:"加法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加法"}},[t._v("#")]),t._v(" 加法")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("add rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"减法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#减法"}},[t._v("#")]),t._v(" 减法")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sub rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"逻辑与"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑与"}},[t._v("#")]),t._v(" 逻辑与")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("and rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"逻辑或"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑或"}},[t._v("#")]),t._v(" 逻辑或")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("or rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"逻辑异或"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑异或"}},[t._v("#")]),t._v(" 逻辑异或")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("xor rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"有符号小于比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#有符号小于比较"}},[t._v("#")]),t._v(" 有符号小于比较")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("slt rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"无符号小于比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无符号小于比较"}},[t._v("#")]),t._v(" 无符号小于比较")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sltu rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"逻辑左移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑左移"}},[t._v("#")]),t._v(" 逻辑左移")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sll rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"逻辑右移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑右移"}},[t._v("#")]),t._v(" 逻辑右移")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("srl rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"算数右移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#算数右移"}},[t._v("#")]),t._v(" 算数右移")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sra rd, rs1, rs2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"i-immediate-型指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-immediate-型指令"}},[t._v("#")]),t._v(" I(Immediate)型指令")]),t._v(" "),s("p",[s("img",{attrs:{src:a(398),alt:"I型指令"}})]),t._v(" "),s("h4",{attrs:{id:"指令汇编格式-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令汇编格式-2"}},[t._v("#")]),t._v(" 指令汇编格式")]),t._v(" "),s("h5",{attrs:{id:"立即数加法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数加法"}},[t._v("#")]),t._v(" 立即数加法")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("addi rd, rs1, imm[11:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数逻辑与"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数逻辑与"}},[t._v("#")]),t._v(" 立即数逻辑与")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("andi rd, rs1, imm[11:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数逻辑或"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数逻辑或"}},[t._v("#")]),t._v(" 立即数逻辑或")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ori rd, rs1, imm[11:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数逻辑异或"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数逻辑异或"}},[t._v("#")]),t._v(" 立即数逻辑异或")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("xori rd, rs1, imm[11:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数有符号小于比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数有符号小于比较"}},[t._v("#")]),t._v(" 立即数有符号小于比较")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("slti rd, rs1, imm[11:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数无符号小于比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数无符号小于比较"}},[t._v("#")]),t._v(" 立即数无符号小于比较")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sltui rd, rs1, imm[11:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数逻辑左移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数逻辑左移"}},[t._v("#")]),t._v(" 立即数逻辑左移")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("slli rd, rs1, shamt[4:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数逻辑右移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数逻辑右移"}},[t._v("#")]),t._v(" 立即数逻辑右移")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("srli rd, rs1, shamt[4:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"立即数算数右移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#立即数算数右移"}},[t._v("#")]),t._v(" 立即数算数右移")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("srai rd, rs1, shamt[4:0]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"load-store-指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#load-store-指令"}},[t._v("#")]),t._v(" Load/Store 指令")]),t._v(" "),s("p",[s("img",{attrs:{src:a(399),alt:"Load/Store 指令"}})]),t._v(" "),s("h4",{attrs:{id:"指令汇编格式-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令汇编格式-3"}},[t._v("#")]),t._v(" 指令汇编格式")]),t._v(" "),s("h5",{attrs:{id:"字加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字加载"}},[t._v("#")]),t._v(" 字加载")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lw rd, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"半字加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#半字加载"}},[t._v("#")]),t._v(" 半字加载")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lh rd, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"无符号半字加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无符号半字加载"}},[t._v("#")]),t._v(" 无符号半字加载")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lhu rd, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"字节加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字节加载"}},[t._v("#")]),t._v(" 字节加载")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lb rd, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"无符号字节加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无符号字节加载"}},[t._v("#")]),t._v(" 无符号字节加载")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lbu rd, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"字存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字存储"}},[t._v("#")]),t._v(" 字存储")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sw rs2, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"半字存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#半字存储"}},[t._v("#")]),t._v(" 半字存储")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sh rs2, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"字节存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字节存储"}},[t._v("#")]),t._v(" 字节存储")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sb rs2, offset[11:0](rs1)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"b-branch-型指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-branch-型指令"}},[t._v("#")]),t._v(" B(Branch)型指令")]),t._v(" "),s("p",[s("img",{attrs:{src:a(400),alt:"B型指令"}})]),t._v(" "),s("h4",{attrs:{id:"指令汇编格式-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令汇编格式-4"}},[t._v("#")]),t._v(" 指令汇编格式")]),t._v(" "),s("h5",{attrs:{id:"相等跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相等跳转"}},[t._v("#")]),t._v(" 相等跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("beq rs1, rs2, label\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"不等跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不等跳转"}},[t._v("#")]),t._v(" 不等跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bne rs1, rs2, label\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"小于跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小于跳转"}},[t._v("#")]),t._v(" 小于跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("blt rs1, rs2, label\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"无符号小于跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无符号小于跳转"}},[t._v("#")]),t._v(" 无符号小于跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bltu rs1, rs2, label\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"大于等于跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#大于等于跳转"}},[t._v("#")]),t._v(" 大于等于跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bge rs1, rs2, label\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"无符号大于等于跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无符号大于等于跳转"}},[t._v("#")]),t._v(" 无符号大于等于跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bgeu rs1, rs2, label\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"j-jump-型指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#j-jump-型指令"}},[t._v("#")]),t._v(" J(Jump)型指令")]),t._v(" "),s("p",[s("img",{attrs:{src:a(401),alt:"J型指令"}})]),t._v(" "),s("h4",{attrs:{id:"指令汇编格式-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令汇编格式-5"}},[t._v("#")]),t._v(" 指令汇编格式")]),t._v(" "),s("h5",{attrs:{id:"无条件跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无条件跳转"}},[t._v("#")]),t._v(" 无条件跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jal rd, label # 将 PC+4 的值保存到 rd 寄存器中，然后设置 PC = PC + offset\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("伪指令 "),s("code",[t._v("j")]),t._v(" 实际上就是jal指令的变体，此时 rd 会被设置为 x0,表示丢弃返回地址")]),t._v(" "),s("h5",{attrs:{id:"无条件相对跳转-i-类型指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无条件相对跳转-i-类型指令"}},[t._v("#")]),t._v(" 无条件相对跳转 (I 类型指令)")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jalr rd, rs1, imm # 将 PC+4 保存到 rd 寄存器中，然后设置 PC = rs1  + imm\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("跳转到任意 32 位绝对地址处")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lui x1, <hi20bits>\njalr ra, x1, <lo12bits>\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("相对PC地址32位偏移量的相对跳转")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("auipc x1, <hi20bits>\njalr x0, x1, <lo12bits>\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"u-upper-immediate-型指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#u-upper-immediate-型指令"}},[t._v("#")]),t._v(" U(Upper immediate)型指令")]),t._v(" "),s("p",[s("img",{attrs:{src:a(402),alt:"U型指令"}})]),t._v(" "),s("h4",{attrs:{id:"指令汇编格式-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令汇编格式-6"}},[t._v("#")]),t._v(" 指令汇编格式")]),t._v(" "),s("h5",{attrs:{id:"lui-指令-load-upper-immediate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lui-指令-load-upper-immediate"}},[t._v("#")]),t._v(" lui 指令 (Load Upper Immediate)")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lui rs, imm # 将 20 位的立即数左移12位，低 12 位补零，并写回寄存器 rd 中\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("配合 addi 指令（设置低 12 比特）可实现讲寄存器设置为任意 32 比特的立即数，例如：")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lui x10, 0x87654     # x10 = 0x87654000\naddi x10, x10, 0x321 # x10 = 0x87654321\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("但是，当这个 12 位的立即数为负数（即最高比特位是1）时，得到的结果是高 20 位减 1 再和低 12 位拼接，比如：")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("lui x10, 0xDEADB     # x10 = 0xDEADB000\naddi x10, x10, 0xEEF # x10 = 0xDEADBEEF\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("解决这个问题的一种方法是，如果低 12 位的立即数的符号位是 1 ,那就预先给高 20 位的数加 1。"),s("code",[t._v("li")]),t._v(" 伪指令可以替我们处理好这中特殊情况。")]),t._v(" "),s("h5",{attrs:{id:"auipc-指令-add-upper-immediate-to-pc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#auipc-指令-add-upper-immediate-to-pc"}},[t._v("#")]),t._v(" auipc 指令 (Add Upper Immediate to PC)")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("auipc rd, imm # 将 20 位的立即数左移12位，低 12 位补零，将得到的 32 位数与 pc 的值相加，最后写回寄存器 rd 中\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("具体应用有：")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Label: auipc x10, 0 # 将 Label 的地址保存在 x10 寄存器中\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"alu-的设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#alu-的设计"}},[t._v("#")]),t._v(" ALU 的设计")]),t._v(" "),s("p",[s("img",{attrs:{src:a(403),alt:"ALU设计框图"}})]),t._v(" "),s("h3",{attrs:{id:"加法运算的实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加法运算的实现"}},[t._v("#")]),t._v(" 加法运算的实现")]),t._v(" "),s("div",{staticClass:"language-verilog line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-verilog"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" adder #"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("parameter")]),t._v(" N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v("\t\t\t  cin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" sum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" \t\t\t   cout\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("{")]),t._v("cout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endmodule")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h3",{attrs:{id:"减法运算的实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#减法运算的实现"}},[t._v("#")]),t._v(" 减法运算的实现")]),t._v(" "),s("div",{staticClass:"language-verilog line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-verilog"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" subtractor #"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("parameter")]),t._v(" N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" y\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" y "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endmodule")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h3",{attrs:{id:"比较运算的实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#比较运算的实现"}},[t._v("#")]),t._v(" 比较运算的实现")]),t._v(" "),s("h4",{attrs:{id:"相等比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相等比较"}},[t._v("#")]),t._v(" 相等比较")]),t._v(" "),s("p",[t._v("用异或门检查 A 和 B 中对应的位是否相等")]),t._v(" "),s("h4",{attrs:{id:"量值比较-减法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#量值比较-减法"}},[t._v("#")]),t._v(" 量值比较（减法）")]),t._v(" "),s("p",[t._v("首先计算A-B的值，然后检查结果的符号位")]),t._v(" "),s("div",{staticClass:"language-verilog line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-verilog"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" comparator #"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("parameter")]),t._v(" N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" b\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" eq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" neq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" lt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" lte"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" gt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" gte\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" eq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" neq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" lt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" lte "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" gt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" gte "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endmodule")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("h2",{attrs:{id:"单指令周期-cpu"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单指令周期-cpu"}},[t._v("#")]),t._v(" 单指令周期 CPU")]),t._v(" "),s("ul",[s("li",[t._v("指令周期：CPU 取出并执行一条指令所需的全部时间")]),t._v(" "),s("li",[t._v("指令执行的的五个步骤\n"),s("ol",[s("li",[t._v("取指（Instruction Fetch）")]),t._v(" "),s("li",[t._v("译码（Instruction Decode）")]),t._v(" "),s("li",[t._v("执行（Execute）")]),t._v(" "),s("li",[t._v("访存（Memory Access）")]),t._v(" "),s("li",[t._v("写回（Write Back)")])])]),t._v(" "),s("li",[t._v("CPU周期：也称为机器周期，一个机器周期由若干个时钟周期组成")]),t._v(" "),s("li",[t._v("CPI (Clock Cycle Per Instruction)：执行每条指令所需的时钟周期数的平均值")]),t._v(" "),s("li",[t._v("单指令周期CPU：全部指令选用一个 CPU 周期完成的系统")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(404),alt:"单指令周期 CPU"}})]),t._v(" "),s("h3",{attrs:{id:"寄存器堆的实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#寄存器堆的实现"}},[t._v("#")]),t._v(" 寄存器堆的实现")]),t._v(" "),s("p",[s("img",{attrs:{src:a(405),alt:"寄存器堆"}})]),t._v(" "),s("div",{staticClass:"language-verilog line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-verilog"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("regfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rna"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rnb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" we"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clrn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" rna"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rnb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读地址，写地址")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写数据")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("input")]),t._v(" we"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clrn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写使能，时钟，清除信号")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" qa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读数据")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("reg")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" register "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 31x32-bit regs")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2 read ports")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" qa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rna "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" register"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("rna"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assign")]),t._v(" qb "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rnb "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" register"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("rnb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1 write port")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("always @")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("posedge")]),t._v(" clk "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("or")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("negedge")]),t._v(" clrn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clrn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("begin")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("integer")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                register"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" we"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            register"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("wn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("endmodule")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"完整的数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整的数据通路"}},[t._v("#")]),t._v(" 完整的数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(406),alt:"完整的数据通路"}})]),t._v(" "),s("ul",[s("li",[t._v("译码阶段，会将指令的功能码和操作码发送给"),s("strong",[t._v("控制器")]),t._v("，来产生相应的控制信号")]),t._v(" "),s("li",[t._v("立即数扩展信号：ImmSel")]),t._v(" "),s("li",[t._v("ALU 功能选择信号：ALUSel")])]),t._v(" "),s("h3",{attrs:{id:"控制器的设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#控制器的设计"}},[t._v("#")]),t._v(" 控制器的设计")]),t._v(" "),s("p",[s("img",{attrs:{src:a(407),alt:"控制器的设计"}})]),t._v(" "),s("h3",{attrs:{id:"r-型指令数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#r-型指令数据通路"}},[t._v("#")]),t._v(" R 型指令数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(408),alt:"R型指令数据通路"}})]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ALUSel")]),t._v(" 会根据指令的 "),s("code",[t._v("funct3")]),t._v("来取不同的值")])]),t._v(" "),s("h3",{attrs:{id:"i-型指令数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-型指令数据通路"}},[t._v("#")]),t._v(" I 型指令数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(409),alt:"I型指令数据通路"}})]),t._v(" "),s("h3",{attrs:{id:"load-指令数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#load-指令数据通路"}},[t._v("#")]),t._v(" Load 指令数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(410),alt:"Load指令数据通路"}})]),t._v(" "),s("h3",{attrs:{id:"store-指令数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-指令数据通路"}},[t._v("#")]),t._v(" Store 指令数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(411),alt:"Store指令数据通路"}})]),t._v(" "),s("ul",[s("li",[t._v("立即数来自"),s("code",[t._v("inst[31:25][11:7]")]),t._v("，这个和Load不同")]),t._v(" "),s("li",[t._v("Store指令没有"),s("strong",[t._v("写回")]),t._v("阶段")])]),t._v(" "),s("h3",{attrs:{id:"b-型指令数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-型指令数据通路"}},[t._v("#")]),t._v(" B 型指令数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(412),alt:"B指令数据通路"}})]),t._v(" "),s("ul",[s("li",[t._v("无"),s("strong",[t._v("访存")]),t._v("和"),s("strong",[t._v("写回")]),t._v("阶段")])]),t._v(" "),s("h3",{attrs:{id:"jalr-指令数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jalr-指令数据通路"}},[t._v("#")]),t._v(" jalr 指令数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(413),alt:"jalr指令数据通路"}})]),t._v(" "),s("ul",[s("li",[t._v("PC+4 的值会保存到"),s("code",[t._v("rd")]),t._v(" 中")])]),t._v(" "),s("h3",{attrs:{id:"jal-指令数据通路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jal-指令数据通路"}},[t._v("#")]),t._v(" jal 指令数据通路")]),t._v(" "),s("p",[s("img",{attrs:{src:a(414),alt:"jal指令数据通路"}})]),t._v(" "),s("h2",{attrs:{id:"流水线技术"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流水线技术"}},[t._v("#")]),t._v(" 流水线技术")]),t._v(" "),s("p",[s("img",{attrs:{src:a(415),alt:"流水线技术"}})]),t._v(" "),s("h3",{attrs:{id:"处理器性能公式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#处理器性能公式"}},[t._v("#")]),t._v(" 处理器性能公式")]),t._v(" "),s("p"),s("p",[s("mjx-container",{staticClass:"MathJax",attrs:{jax:"CHTML",display:"true"}},[s("mjx-math",{staticClass:"MJX-TEX",attrs:{display:"true"}},[s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"P"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"r"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"o"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"g"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"r"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"a"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"m"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"T"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"i"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"m"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"e"}})],1),s("mjx-mo",{staticClass:"mjx-n",attrs:{space:"4"}},[s("mjx-c",{attrs:{c:"="}})],1),s("mjx-mfrac",{attrs:{space:"4"}},[s("mjx-frac",{attrs:{type:"d"}},[s("mjx-num",[s("mjx-nstrut",{attrs:{type:"d"}}),s("mjx-mrow",[s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"I"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"n"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"s"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"t"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"r"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"u"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"c"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"t"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"i"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"o"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"n"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"s"}})],1)],1)],1),s("mjx-dbox",[s("mjx-dtable",[s("mjx-line",{attrs:{type:"d"}}),s("mjx-row",[s("mjx-den",[s("mjx-dstrut",{attrs:{type:"d"}}),s("mjx-mrow",[s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"P"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"r"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"o"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"g"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"r"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"a"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"m"}})],1)],1)],1)],1)],1)],1)],1)],1),s("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[s("mjx-c",{attrs:{c:"2217"}})],1),s("mjx-mfrac",{attrs:{space:"3"}},[s("mjx-frac",{attrs:{type:"d"}},[s("mjx-num",[s("mjx-nstrut",{attrs:{type:"d"}}),s("mjx-mrow",[s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"C"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"y"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"c"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"l"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"e"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"s"}})],1)],1)],1),s("mjx-dbox",[s("mjx-dtable",[s("mjx-line",{attrs:{type:"d"}}),s("mjx-row",[s("mjx-den",[s("mjx-dstrut",{attrs:{type:"d"}}),s("mjx-mrow",[s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"I"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"n"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"s"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"t"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"r"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"u"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"c"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"t"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"i"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"o"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"n"}})],1)],1)],1)],1)],1)],1)],1)],1),s("mjx-mo",{staticClass:"mjx-n",attrs:{space:"3"}},[s("mjx-c",{attrs:{c:"2217"}})],1),s("mjx-mfrac",{attrs:{space:"3"}},[s("mjx-frac",{attrs:{type:"d"}},[s("mjx-num",[s("mjx-nstrut",{attrs:{type:"d"}}),s("mjx-mrow",[s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"T"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"i"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"m"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"e"}})],1)],1)],1),s("mjx-dbox",[s("mjx-dtable",[s("mjx-line",{attrs:{type:"d"}}),s("mjx-row",[s("mjx-den",[s("mjx-dstrut",{attrs:{type:"d"}}),s("mjx-mrow",[s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"C"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"y"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"c"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"l"}})],1),s("mjx-mi",{staticClass:"mjx-i"},[s("mjx-c",{attrs:{c:"e"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),s("p"),t._v(" "),s("h3",{attrs:{id:"流水线阶段寄存器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流水线阶段寄存器"}},[t._v("#")]),t._v(" 流水线阶段寄存器")]),t._v(" "),s("p",[t._v("为了确保硬件共享的时候，前一阶段的数据不被丢失，需要在流水线之间插入“阶段寄存器”来保存中间值和控制信号。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(416),alt:"流水线寄存器"}})]),t._v(" "),s("h2",{attrs:{id:"cache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cache"}},[t._v("#")]),t._v(" Cache")]),t._v(" "),s("p",[s("img",{attrs:{src:a(417),alt:"Cache"}})]),t._v(" "),s("h3",{attrs:{id:"cache-的结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cache-的结构"}},[t._v("#")]),t._v(" Cache 的结构")]),t._v(" "),s("p",[s("img",{attrs:{src:a(418),alt:"Cache的结构"}})]),t._v(" "),s("ul",[s("li",[t._v("块（block）：两级存储器层次结构中存储器信息交换的最小单元")]),t._v(" "),s("li",[t._v("命中（hit）：如果处理器需要的数据存放在高层存储器中的某个块中，称为一次命中")]),t._v(" "),s("li",[t._v("缺失（miss）：如果在高层存储器中没有找到所需的数据，这次数据请求称为一次缺失\n"),s("ul",[s("li",[t._v("缺失代价（miss penalty）：将相应的块从底层存储器替换到高层存储器的时间+将该信息块传送给处理器的时间")])])])]),t._v(" "),s("h3",{attrs:{id:"cache-直接映射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cache-直接映射"}},[t._v("#")]),t._v(" Cache 直接映射")]),t._v(" "),s("p",[t._v("直接映射：一种 cache 结构，其中每个存储器地址仅仅对应到 cache 中的一个位置")]),t._v(" "),s("p",[t._v("映射方法：（块地址）mod（cache 中的块数）")]),t._v(" "),s("p",[t._v("标记：表中的一个字段，包含了地址信息，这些地址信息可以用来判断cache中的字是否就是所请求的字")]),t._v(" "),s("p",[t._v("有效位：表中的一个字段，用来标识一个块是否包含有一个有效数据")]),t._v(" "),s("p",[s("img",{attrs:{src:a(419),alt:"Cache直接映射"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(420),alt:"Cache直接映射示例"}})]),t._v(" "),s("p",[t._v("缺点：利用率低，命中率低")]),t._v(" "),s("h3",{attrs:{id:"cache-全相联映射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cache-全相联映射"}},[t._v("#")]),t._v(" Cache 全相联映射")]),t._v(" "),s("p",[t._v("全相联映射：一个块可以被放置在 cache 中的任何位置")]),t._v(" "),s("p",[s("img",{attrs:{src:a(421),alt:"Cache全相联映射"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(422),alt:"Cache全相联映射示例"}})]),t._v(" "),s("p",[t._v("缺点：硬件开销大（有多少cache块就配有相等数量的比较器）")]),t._v(" "),s("h3",{attrs:{id:"cache-组相联映射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cache-组相联映射"}},[t._v("#")]),t._v(" Cache 组相联映射")]),t._v(" "),s("p",[t._v("在组相联映射中，每个块可被放置的位置数是固定的，每个块有 n 个位置可放的 cache 被称为 n 路组相联 Cache")]),t._v(" "),s("p",[s("img",{attrs:{src:a(423),alt:"Cache组相联映射"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(424),alt:"Cache组相联映射示例"}})]),t._v(" "),s("p",[t._v("四路组相联 Cache：")]),t._v(" "),s("ul",[s("li",[t._v("4 个比较器")]),t._v(" "),s("li",[t._v("1 个四选一多路选择器")])]),t._v(" "),s("h3",{attrs:{id:"cache-的设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cache-的设计"}},[t._v("#")]),t._v(" Cache 的设计")]),t._v(" "),s("ul",[s("li",[t._v("要考虑的维度\n"),s("ul",[s("li",[t._v("Cache 的容量")]),t._v(" "),s("li",[t._v("块大小")]),t._v(" "),s("li",[t._v("组织方式（Direct，Fully Associative，Set Associative）")]),t._v(" "),s("li",[t._v("替换算法（FIFO，LRU）")]),t._v(" "),s("li",[t._v("写策略（write-through, write-back）")])])])]),t._v(" "),s("h2",{attrs:{id:"虚拟地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟地址"}},[t._v("#")]),t._v(" 虚拟地址")]),t._v(" "),s("p",[s("img",{attrs:{src:a(425),alt:"虚拟存储器管理"}})]),t._v(" "),s("h3",{attrs:{id:"分段管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分段管理"}},[t._v("#")]),t._v(" 分段管理")]),t._v(" "),s("p",[s("img",{attrs:{src:a(426),alt:"分段管理"}})]),t._v(" "),s("p",[t._v("分段管理：将一个程序按照逻辑单元分成多个程序段，每一个段使用自己单独的虚拟地址空间。")]),t._v(" "),s("ul",[s("li",[t._v("逻辑上相互独立")]),t._v(" "),s("li",[t._v("容易实现共享和保护")]),t._v(" "),s("li",[t._v("非常容易产生碎片（段长是不确定的）")])]),t._v(" "),s("h3",{attrs:{id:"分页管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分页管理"}},[t._v("#")]),t._v(" 分页管理")]),t._v(" "),s("p",[s("img",{attrs:{src:a(427),alt:"分页管理"}})]),t._v(" "),s("ul",[s("li",[t._v("如果页表项为4字节，那么整张页表会占据4MB大小的内存空间")])]),t._v(" "),s("h3",{attrs:{id:"两级分页管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#两级分页管理"}},[t._v("#")]),t._v(" 两级分页管理")]),t._v(" "),s("p",[s("img",{attrs:{src:a(428),alt:"两级分页管理"}})]),t._v(" "),s("ul",[s("li",[t._v("4KB的页目录+4KB的页表")])]),t._v(" "),s("h3",{attrs:{id:"快速地址转换-tlb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速地址转换-tlb"}},[t._v("#")]),t._v(" 快速地址转换 TLB")]),t._v(" "),s("p",[s("img",{attrs:{src:a(429),alt:"块表"}})]),t._v(" "),s("p",[t._v("块表（Translation-Lookaside Buffer）：用于记录最近使用地址的映射信息的高速缓存，从而可以避免每次都要访问页表")]),t._v(" "),s("h3",{attrs:{id:"使用-tlb-进行地址转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-tlb-进行地址转换"}},[t._v("#")]),t._v(" 使用 TLB 进行地址转换")]),t._v(" "),s("p",[s("img",{attrs:{src:a(430),alt:"TLB的位置"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(431),alt:"TLB实现地址转换的原理"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(432),alt:"TLB虚实地址转换"}})]),t._v(" "),s("h2",{attrs:{id:"通用寄存器组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通用寄存器组"}},[t._v("#")]),t._v(" 通用寄存器组")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("寄存器")]),t._v(" "),s("th",[t._v("ABI 名字")]),t._v(" "),s("th",[t._v("描述")]),t._v(" "),s("th",[t._v("Saver")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("x0")]),t._v(" "),s("td",[t._v("zero")]),t._v(" "),s("td",[t._v("硬件连线0")]),t._v(" "),s("td",[t._v("-")])]),t._v(" "),s("tr",[s("td",[t._v("x1")]),t._v(" "),s("td",[t._v("ra")]),t._v(" "),s("td",[t._v("返回地址")]),t._v(" "),s("td",[t._v("Caller")])]),t._v(" "),s("tr",[s("td",[t._v("x2")]),t._v(" "),s("td",[t._v("sp")]),t._v(" "),s("td",[t._v("栈指针")]),t._v(" "),s("td",[t._v("Callee")])]),t._v(" "),s("tr",[s("td",[t._v("x3")]),t._v(" "),s("td",[t._v("gp")]),t._v(" "),s("td",[t._v("全局指针")]),t._v(" "),s("td",[t._v("-")])]),t._v(" "),s("tr",[s("td",[t._v("x4")]),t._v(" "),s("td",[t._v("tp")]),t._v(" "),s("td",[t._v("线程指针")]),t._v(" "),s("td",[t._v("-")])]),t._v(" "),s("tr",[s("td",[t._v("x5-x7")]),t._v(" "),s("td",[t._v("t0-t2")]),t._v(" "),s("td",[t._v("临时寄存器")]),t._v(" "),s("td",[t._v("Caller")])]),t._v(" "),s("tr",[s("td",[t._v("x8")]),t._v(" "),s("td",[t._v("s0/fp")]),t._v(" "),s("td",[t._v("保存的寄存器/帧指针")]),t._v(" "),s("td",[t._v("Callee")])]),t._v(" "),s("tr",[s("td",[t._v("x9")]),t._v(" "),s("td",[t._v("s1")]),t._v(" "),s("td",[t._v("保存寄存器"),s("br"),t._v("保存原进程中的关键数据，"),s("br"),t._v("避免在函数调用过程中被破坏")]),t._v(" "),s("td",[t._v("Callee")])]),t._v(" "),s("tr",[s("td",[t._v("x10-x11")]),t._v(" "),s("td",[t._v("a0-a1")]),t._v(" "),s("td",[t._v("函数参数/返回值")]),t._v(" "),s("td",[t._v("Caller")])]),t._v(" "),s("tr",[s("td",[t._v("x12-x17")]),t._v(" "),s("td",[t._v("a2-a7")]),t._v(" "),s("td",[t._v("函数参数")]),t._v(" "),s("td",[t._v("Caller")])]),t._v(" "),s("tr",[s("td",[t._v("x18-x27")]),t._v(" "),s("td",[t._v("s2-s11")]),t._v(" "),s("td",[t._v("保存寄存器")]),t._v(" "),s("td",[t._v("Callee")])]),t._v(" "),s("tr",[s("td",[t._v("x28-x31")]),t._v(" "),s("td",[t._v("t3-t6")]),t._v(" "),s("td",[t._v("临时寄存器")]),t._v(" "),s("td",[t._v("Caller")])])])]),t._v(" "),s("h3",{attrs:{id:"函数调用时保留的寄存器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数调用时保留的寄存器"}},[t._v("#")]),t._v(" 函数调用时保留的寄存器")]),t._v(" "),s("p",[t._v("被调用函数一般不会使用这些寄存器，即便使用也会提前保存好原值，可以信任。这些寄存器有：sp, gp, tp 和 s0-s11 寄存器。")]),t._v(" "),s("h3",{attrs:{id:"函数调用时不保存的寄存器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数调用时不保存的寄存器"}},[t._v("#")]),t._v(" 函数调用时不保存的寄存器")]),t._v(" "),s("p",[t._v("有可能被调用函数使用更改，需要caller在调用前对自己用到的寄存器进行保存。这些寄存器有：参数与返回地址寄存器 a0-a7，返回地址寄存器 ra，临时寄存器 t0-t6")]),t._v(" "),s("h2",{attrs:{id:"csr-寄存器组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csr-寄存器组"}},[t._v("#")]),t._v(" CSR 寄存器组")]),t._v(" "),s("h3",{attrs:{id:"独立的12位地址编码空间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#独立的12位地址编码空间"}},[t._v("#")]),t._v(" 独立的12位地址编码空间")]),t._v(" "),s("p",[s("img",{attrs:{src:a(433),alt:"CSR寄存器访问指令的编码"}})]),t._v(" "),s("h3",{attrs:{id:"专用的-csr-指令读写-csr-寄存器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#专用的-csr-指令读写-csr-寄存器"}},[t._v("#")]),t._v(" 专用的 CSR 指令读写 CSR 寄存器")]),t._v(" "),s("p",[s("img",{attrs:{src:a(434),alt:"CSR寄存器访问指令"}})]),t._v(" "),s("h3",{attrs:{id:"标准寄存器列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#标准寄存器列表"}},[t._v("#")]),t._v(" 标准寄存器列表")]),t._v(" "),s("h4",{attrs:{id:"machine-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#machine-mode"}},[t._v("#")]),t._v(" Machine Mode")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("地址")]),t._v(" "),s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("mvendorid")]),t._v(" "),s("td",[t._v("0xF11")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("商业供应商编号寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("marchid")]),t._v(" "),s("td",[t._v("0xF12")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("架构编号寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mimpid")]),t._v(" "),s("td",[t._v("0xF13")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("硬件实现编号寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mhartid")]),t._v(" "),s("td",[t._v("0xF14")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("Hart编号寄存器 (Hart: Hardware Thread)")])]),t._v(" "),s("tr",[s("td",[t._v("mstatus")]),t._v(" "),s("td",[t._v("0x300")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("异常处理状态寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("misa")]),t._v(" "),s("td",[t._v("0x301")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("指令集架构寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mie")]),t._v(" "),s("td",[t._v("0x304")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("局部中断屏蔽控制寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mtvec")]),t._v(" "),s("td",[t._v("0x305")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("异常入口基地址寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mtvt")]),t._v(" "),s("td",[t._v("0x307")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("中断向量表的基地址，至少为 "),s("strong",[t._v("64byte")]),t._v(" 对齐")])]),t._v(" "),s("tr",[s("td",[t._v("mscratch")]),t._v(" "),s("td",[t._v("0x340")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("暂存寄存器，比如进入异常处理模式后，将应用程序的用户的 sp 寄存器临时保存到这个寄存器中")])]),t._v(" "),s("tr",[s("td",[t._v("mepc")]),t._v(" "),s("td",[t._v("0x341")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("异常PC寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mcause")]),t._v(" "),s("td",[t._v("0x342")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("异常原因寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mtval")]),t._v(" "),s("td",[t._v("0x343")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("异常值寄存器，保存进入异常之前出错指令的编码值或者存储器访问的地址值")])]),t._v(" "),s("tr",[s("td",[t._v("mip")]),t._v(" "),s("td",[t._v("0x344")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("中断等待寄存器")])]),t._v(" "),s("tr",[s("td",[t._v("mnxti")]),t._v(" "),s("td",[t._v("0x345")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("读操作返回值是下一个中断的handler地址，写回操作会更新中断使能的状态")])]),t._v(" "),s("tr",[s("td",[t._v("mintstatus")]),t._v(" "),s("td",[t._v("0x346")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("用于保存当前中断 Level")])]),t._v(" "),s("tr",[s("td",[t._v("mscratchcsw")]),t._v(" "),s("td",[t._v("0x348")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("用于在特权模式变化时交换mscratch与目的寄存器的值")])]),t._v(" "),s("tr",[s("td",[t._v("mscratchcswl")]),t._v(" "),s("td",[t._v("0x349")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("用于在中断Level变化时交换mscratch与目的寄存器的值")])]),t._v(" "),s("tr",[s("td",[t._v("mcycle")]),t._v(" "),s("td",[t._v("0xB00")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("周期计数器的低32位")])]),t._v(" "),s("tr",[s("td",[t._v("mcycleh")]),t._v(" "),s("td",[t._v("0xB80")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("周期计数器的高32位")])]),t._v(" "),s("tr",[s("td",[t._v("minstret")]),t._v(" "),s("td",[t._v("0xB02")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("完成指令计数器的低32位，该寄存器用于衡量处理器的性能")])]),t._v(" "),s("tr",[s("td",[t._v("minstrech")]),t._v(" "),s("td",[t._v("0xB82")]),t._v(" "),s("td",[t._v("RW")]),t._v(" "),s("td",[t._v("完成指令计数器的高32位")])])])]),t._v(" "),s("h4",{attrs:{id:"user-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-mode"}},[t._v("#")]),t._v(" User Mode")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("地址")]),t._v(" "),s("th",[t._v("属性")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("cycle")]),t._v(" "),s("td",[t._v("0xC00")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("mcycle寄存器的只读副本")])]),t._v(" "),s("tr",[s("td",[t._v("time")]),t._v(" "),s("td",[t._v("0xC01")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("mtime寄存器的只读副本")])]),t._v(" "),s("tr",[s("td",[t._v("instret")]),t._v(" "),s("td",[t._v("0xC02")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("minstret寄存器的只读副本")])]),t._v(" "),s("tr",[s("td",[t._v("cycleh")]),t._v(" "),s("td",[t._v("0xC80")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("mcycleh寄存器的只读副本")])]),t._v(" "),s("tr",[s("td",[t._v("timeh")]),t._v(" "),s("td",[t._v("0xC81")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("mtimeh寄存器的只读副本")])]),t._v(" "),s("tr",[s("td",[t._v("instreth")]),t._v(" "),s("td",[t._v("0xC82")]),t._v(" "),s("td",[t._v("RO")]),t._v(" "),s("td",[t._v("minstreth寄存器的只读副本")])])])]),t._v(" "),s("h2",{attrs:{id:"risc-v-的中断"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#risc-v-的中断"}},[t._v("#")]),t._v(" RISC-V 的中断")]),t._v(" "),s("p",[s("img",{attrs:{src:a(435),alt:"进入中断"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(436),alt:"退出中断"}})]),t._v(" "),s("h3",{attrs:{id:"中断和异常相关的寄存器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中断和异常相关的寄存器"}},[t._v("#")]),t._v(" 中断和异常相关的寄存器")]),t._v(" "),s("p",[s("img",{attrs:{src:a(437),alt:"异常相关的CSR寄存器"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(438),alt:"异常相关的CSR寄存器具体定义"}})]),t._v(" "),s("h3",{attrs:{id:"mstatus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mstatus"}},[t._v("#")]),t._v(" mstatus")]),t._v(" "),s("ul",[s("li",[t._v("MIE：为1表示中断的全局开关打开，中断能够被正常响应")]),t._v(" "),s("li",[t._v("FS：维护浮点单元的状态。上电默认为0,表示Off，为了能够正常使用浮点单元，软件需要使用 CSR 写指令将 FS 的值改写为非 0 值以打开浮点单元的功能。操作系统在进行上下文切换的时候，需要通过该值来判断是否需要对浮点单元进行上下文的保存")]),t._v(" "),s("li",[t._v("XS：维护用户自定义的扩展指令单元状态，类似与 FS")])]),t._v(" "),s("h3",{attrs:{id:"mtvec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mtvec"}},[t._v("#")]),t._v(" mtvec")]),t._v(" "),s("p",[s("img",{attrs:{src:a(439),alt:"mtvec寄存器"}})]),t._v(" "),s("h3",{attrs:{id:"异常代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异常代码"}},[t._v("#")]),t._v(" 异常代码")]),t._v(" "),s("p",[s("img",{attrs:{src:a(440),alt:"异常代码"}})]),t._v(" "),s("h3",{attrs:{id:"中断返回"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中断返回"}},[t._v("#")]),t._v(" 中断返回")]),t._v(" "),s("p",[s("img",{attrs:{src:a(441),alt:"中断返回"}})]),t._v(" "),s("h3",{attrs:{id:"中断屏蔽与中断等待"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中断屏蔽与中断等待"}},[t._v("#")]),t._v(" 中断屏蔽与中断等待")]),t._v(" "),s("p",[s("img",{attrs:{src:a(442),alt:"中断屏蔽和等待相关额寄存器"}})]),t._v(" "),s("h3",{attrs:{id:"中断优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中断优先级"}},[t._v("#")]),t._v(" 中断优先级")]),t._v(" "),s("p",[s("img",{attrs:{src:a(443),alt:"中断优先级"}})]),t._v(" "),s("h3",{attrs:{id:"单指令数据通路的中断响应与退出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单指令数据通路的中断响应与退出"}},[t._v("#")]),t._v(" 单指令数据通路的中断响应与退出")]),t._v(" "),s("p",[s("img",{attrs:{src:a(444),alt:"中断响应"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(445),alt:"中断退出"}})]),t._v(" "),s("h2",{attrs:{id:"risc-v-架构的可扩展性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#risc-v-架构的可扩展性"}},[t._v("#")]),t._v(" RISC-V 架构的可扩展性")]),t._v(" "),s("h3",{attrs:{id:"指令集的扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令集的扩展"}},[t._v("#")]),t._v(" 指令集的扩展")]),t._v(" "),s("p",[s("img",{attrs:{src:a(446),alt:"指令集扩展"}})]),t._v(" "),s("h3",{attrs:{id:"指令编码空间的扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令编码空间的扩展"}},[t._v("#")]),t._v(" 指令编码空间的扩展")]),t._v(" "),s("p",[s("img",{attrs:{src:a(447),alt:"指令编码空间的扩展"}})]),t._v(" "),s("ul",[s("li",[t._v("custom-0、custom-1用于 RV32 的自定义指令集扩展")]),t._v(" "),s("li",[t._v("custom-2、custom-3预留给 RV128，也可以用于 RV32、RV64的用户自定义指令集扩展")])]),t._v(" "),s("h2",{attrs:{id:"常用伪指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用伪指令"}},[t._v("#")]),t._v(" 常用伪指令")]),t._v(" "),s("h5",{attrs:{id:"赋值指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#赋值指令"}},[t._v("#")]),t._v(" 赋值指令")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mv rd, rs # 等效于 addi rd, rs, x0\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"加载立即数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载立即数"}},[t._v("#")]),t._v(" 加载立即数")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("li rd, 13 # 等效于 addi rd, x0, 13\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h5",{attrs:{id:"函数调用和返回"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数调用和返回"}},[t._v("#")]),t._v(" 函数调用和返回")]),t._v(" "),s("div",{staticClass:"language-assembly line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("jal my_foo # 函数调用\nret # 函数返回，等效于 jr ra，等效于 jalr x0, ra, 0\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{551:function(s,t,a){"use strict";a.r(t);var n=a(12),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"openwrt-基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#openwrt-基础"}},[s._v("#")]),s._v(" 𝙊𝙥𝙚𝙣𝙒𝙧𝙩 基础")]),s._v(" "),t("h2",{attrs:{id:"flash-分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flash-分区"}},[s._v("#")]),s._v(" Flash 分区")]),s._v(" "),t("p",[s._v("Linux系统对闪存类存储器是采用MTD设备驱动实现的。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.290000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" spi-mt7621 10000b00.spi: sys_freq: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("193333333")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.300000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" m25p80 spi32766.0: w25q256 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v(" Kbytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.300000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" m25p80 spi32766.0: using chunked io\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.310000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" ofpart partitions found on MTD device spi32766.0\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.310000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Creating "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" MTD partitions on "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spi32766.0"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.320000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 0x000000000000-0x000000030000 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"u-boot"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.320000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 0x000000030000-0x000000040000 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"u-boot-env"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.330000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 0x000000040000-0x000000050000 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"factory"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.340000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 0x000000050000-0x000002000000 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"firmware"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.410000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" uimage-fw partitions found on MTD device firmware\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.410000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 0x000000050000-0x000000168da1 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kernel"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.420000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 0x000000168da1-0x000002000000 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rootfs"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.420000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" mtd: device "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rootfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to be root filesystem\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.430000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" squashfs-split partitions found on MTD device rootfs\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.440000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 0x000000620000-0x000002000000 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rootfs_data"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("系统在SPI设备上创建了4个MTD分区")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("分区名")]),s._v(" "),t("th",[s._v("分区作用")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("u-boot")]),s._v(" "),t("td",[s._v("引导程序")])]),s._v(" "),t("tr",[t("td",[s._v("u-boot-env")]),s._v(" "),t("td",[s._v("引导程序的配置数据")])]),s._v(" "),t("tr",[t("td",[s._v("factory")]),s._v(" "),t("td",[s._v("路由器芯片的初始化参数")])]),s._v(" "),t("tr",[t("td",[s._v("firmware")]),s._v(" "),t("td",[s._v("固件分区")])]),s._v(" "),t("tr",[t("td",[s._v("kernel")]),s._v(" "),t("td",[s._v("固件分区"),t("br"),s._v("Linux 内核")])]),s._v(" "),t("tr",[t("td",[s._v("rootfs")]),s._v(" "),t("td",[s._v("固件分区"),t("br"),s._v("文件系统子集")])]),s._v(" "),t("tr",[t("td",[s._v("rootfs_rom")]),s._v(" "),t("td",[s._v("固件分区"),t("br"),s._v("文件系统子集"),t("br"),s._v("只读分区子集")])]),s._v(" "),t("tr",[t("td",[s._v("rootfs_data")]),s._v(" "),t("td",[s._v("固件分区"),t("br"),s._v("文件系统子集"),t("br"),s._v("可写分区子集")])])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("分区存在子分区，kernel和rootfs就是firmware的子分区，rootfs_rom和rootfs_data就是rootfs的子分区。")])]),s._v(" "),t("h3",{attrs:{id:"查看系统-mtd-分配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看系统-mtd-分配"}},[s._v("#")]),s._v(" 查看系统 MTD 分配")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /proc/mtd")]),s._v("\ndev:    size   erasesize  name\nmtd0: 00030000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"u-boot"')]),s._v("\nmtd1: 00010000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"u-boot-env"')]),s._v("\nmtd2: 00010000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"factory"')]),s._v("\nmtd3: 01fb0000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"firmware"')]),s._v("\nmtd4: 00118da1 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kernel"')]),s._v("\nmtd5: 01e9725f 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rootfs"')]),s._v("\nmtd6: 019e0000 00010000 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rootfs_data"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"查看系统-mtd-分配-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看系统-mtd-分配-2"}},[s._v("#")]),s._v(" 查看系统 MTD 分配")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /proc/partitions")]),s._v("\nmajor   minor  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#blocks    name")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192")]),s._v("   mtdblock0\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("   mtdblock1\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("   mtdblock2\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32448")]),s._v("   mtdblock3\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1123")]),s._v("   mtdblock4\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31324")]),s._v("   mtdblock5\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26496")]),s._v("   mtdblock6\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"读取-备份-factory-分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#读取-备份-factory-分区"}},[s._v("#")]),s._v(" 读取/备份 factory 分区")]),s._v(" "),t("p",[s._v("factory 分区（位于 /dev/mtd2）保存了重要的配置参数（如MAC地址，天线匹配参数等）。")]),s._v(" "),t("h4",{attrs:{id:"查看分区内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看分区内容"}},[s._v("#")]),s._v(" 查看分区内容")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hexdump /dev/mtd2")]),s._v("\n0000000 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7628")]),s._v(" 0001 ef0c d2af b8a9 0000 0000 0000\n0000010 ffff ffff ffff ffff ffff ffff ffff ffff\n0000020 0000 0000 0020 0000 ef0c d2af b8a9 ef0c\n0000030 d2af b9a9 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3422")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v(" ffff 0100 0000 0000\n0000040 0000 0022 0000 0000 0030 0000 0000 0000\n0000050 0081 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9400")]),s._v(" b040 c640 c31a c2c3 c5c0 0027\n0000060 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n00000a0 c6c6 c4c4 c0c4 c4c0 c4c4 c0c4 c0c0 0000\n00000b0 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n00000f0 0000 0000 00d1 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8800")]),s._v(" 0000 0000 0000 0000\n0000100 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n0000120 0000 0000 0000 0000 0000 0000 0000 0077\n0000130 1d11 1d11 7f15 7f15 7f17 7f17 3b10 3b10\n0000140 ffff ffff ffff ffff ffff ffff ffff ffff\n*\n0010000\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h4",{attrs:{id:"备份分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份分区"}},[s._v("#")]),s._v(" 备份分区")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("dd")]),s._v(" 命令将分区读到一个文件中，然后使用浏览器下载到本地。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dd if=/dev/mtd2 of=/www/art.bin")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("+0 records "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("+0 records out\nroot@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -l /www/art.bin")]),s._v("\n-rw-r--r--    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root     root         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" Apr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":26 /www/art.bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"文件系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件系统"}},[s._v("#")]),s._v(" 文件系统")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df")]),s._v("\nFilesystem           1K-blocks      Used Available Use% Mounted on\nrootfs                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26496")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("752")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25744")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("% /\n/dev/root                 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4864")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4864")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% /rom\ntmpfs                    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("63232")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("63148")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /tmp\n/dev/mtdblock6           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26496")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("752")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25744")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("% /overlay\noverlayfs:/overlay       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26496")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("752")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25744")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("% /\ntmpfs                      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ol",[t("li",[s._v("引导程序启动内核完成后，由内核加载 "),t("code",[s._v("rootfs_rom")]),s._v(" 只读分区来完成系统的初步启动。"),t("code",[s._v("rootfs_rom")]),s._v(" 只读分区采用的是 Linux 内核支持的 "),t("strong",[s._v("squashFS")]),s._v(" 文件系统，加载完毕后将其挂载到 "),t("code",[s._v("/rom")]),s._v(" 目录，同时也挂载为 "),t("code",[s._v("/")]),s._v(" 目录。")]),s._v(" "),t("li",[s._v("系统将使用 "),t("strong",[s._v("JFFS2")]),s._v(" 文件系统格式化的 "),t("code",[s._v("rootfs_data")]),s._v(" 可写文件分区并将这部分挂载到 "),t("code",[s._v("/overlay")]),s._v(" 目录。")]),s._v(" "),t("li",[s._v("系统再将 "),t("code",[s._v("/overlay")]),s._v(" 透明挂载为 "),t("code",[s._v("/")]),s._v(" 根目录。")]),s._v(" "),t("li",[s._v("最后将一部分内存挂载为"),t("code",[s._v("/tmp")]),s._v(" 目录。")])]),s._v(" "),t("h3",{attrs:{id:"透明挂载根目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#透明挂载根目录"}},[s._v("#")]),s._v(" 透明挂载根目录 /")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("OpenWrt 设计的一个特点是：系统先将 "),t("code",[s._v("rootfs_rom")]),s._v(" 挂载为 "),t("code",[s._v("/")]),s._v(" 根目录，这样就具备了一个完整的系统，然后再将 "),t("code",[s._v("rootfs_data")]),s._v(" 以透明方式挂载在 "),t("code",[s._v("/")]),s._v(" 根目录上。")])]),s._v(" "),t("ul",[t("li",[s._v("最终呈现的根文件系统是由 "),t("code",[s._v("rootfs_rom")]),s._v(" 和 "),t("code",[s._v("rootfs_data")]),s._v(" 两个分区组合在一起的效果。")]),s._v(" "),t("li",[s._v("对任何文件的修改（增、删、改）都会记录在 "),t("code",[s._v("rootfs_data")]),s._v(" 分区中。")]),s._v(" "),t("li",[s._v("读取文件内容时，首先检测 "),t("code",[s._v("rootfs_data")]),s._v(" 里的状态，再检测 "),t("code",[s._v("roots_rom")]),s._v(" 里的内容，最后输出结果。")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("如果修改了一个名为 abc 的文件，那么在 "),t("code",[s._v("/rom")]),s._v(" 里还会保留修改之前的那个 abc 文件，同时在 "),t("code",[s._v("/overlay")]),s._v(" 里有修改后的 abc 文件，因此所占的空间将会倍增。这样带来的一个好处是，在任何时候，只要删除 "),t("code",[s._v("/overlay")]),s._v(" 里所有的文件，就能达到恢复出厂的效果。")])]),s._v(" "),t("h3",{attrs:{id:"常用文件夹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用文件夹"}},[s._v("#")]),s._v(" 常用文件夹")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("文件夹路径")]),s._v(" "),t("th",[s._v("作用")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("/etc/")]),s._v(" "),t("td",[s._v("存放系统所有的配置文件")])]),s._v(" "),t("tr",[t("td",[s._v("/etc/init.d/")]),s._v(" "),t("td",[s._v("存放启动的服务脚本")])]),s._v(" "),t("tr",[t("td",[s._v("/etc/config/")]),s._v(" "),t("td",[s._v("存放 OpenWrt 的配置文件，包括网络")])]),s._v(" "),t("tr",[t("td",[s._v("/tmp/")]),s._v(" "),t("td",[s._v("存放临时文件和动态的配置文件")])]),s._v(" "),t("tr",[t("td",[s._v("/tmp/TZ")]),s._v(" "),t("td",[s._v("系统启动后所使用的时区参数")])])])]),s._v(" "),t("h2",{attrs:{id:"软件包管理器-opkg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#软件包管理器-opkg"}},[s._v("#")]),s._v(" 软件包管理器 OPKG")]),s._v(" "),t("h3",{attrs:{id:"配置-opkg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-opkg"}},[s._v("#")]),s._v(" 配置 OPKG")]),s._v(" "),t("p",[t("code",[s._v("/etc/opkg.conf")]),s._v(" 文件保存 OPKG 相关设置：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/opkg.conf")]),s._v("\ndest root /\ndest "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ram")]),s._v(" /tmp\nlists_dir ext /var/opkg-lists\noption overlay_root /overlay\noption check_signature "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("配置选项")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("dest root")]),s._v(" "),t("td",[s._v("安装目标的跟路径")])]),s._v(" "),t("tr",[t("td",[s._v("dest ram")]),s._v(" "),t("td",[s._v("内存临时文件路径")])]),s._v(" "),t("tr",[t("td",[s._v("lists_dir ext")]),s._v(" "),t("td",[s._v("软件包列表文件")])]),s._v(" "),t("tr",[t("td",[s._v("option overlay_root")]),s._v(" "),t("td",[s._v("可写分区挂载位置")])])])]),s._v(" "),t("h3",{attrs:{id:"常用命令搭配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令搭配"}},[s._v("#")]),s._v(" 常用命令搭配")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("opkg update")]),s._v(" "),t("td",[s._v("下载服务器上可用的软件包列表")])]),s._v(" "),t("tr",[t("td",[s._v("opkg upgrade <package>")]),s._v(" "),t("td",[s._v("升级软件包")])]),s._v(" "),t("tr",[t("td",[s._v("opkg install <package>")]),s._v(" "),t("td",[s._v("安装软件包")])]),s._v(" "),t("tr",[t("td",[s._v("opkg configure <package>")]),s._v(" "),t("td",[s._v("配置某一个软件包")])]),s._v(" "),t("tr",[t("td",[s._v("opkg remove <package>")]),s._v(" "),t("td",[s._v("卸载软件包")])]),s._v(" "),t("tr",[t("td",[s._v("opkg list")]),s._v(" "),t("td",[s._v("列出全部可用的软件包")])]),s._v(" "),t("tr",[t("td",[s._v("opkg list-installed")]),s._v(" "),t("td",[s._v("列出已安装的软件包")])]),s._v(" "),t("tr",[t("td",[s._v("opkg list-upgradable")]),s._v(" "),t("td",[s._v("列出可以升级的软件包")])]),s._v(" "),t("tr",[t("td",[s._v("opkg info [package|regexp]")]),s._v(" "),t("td",[s._v("显示指定软件包的信息")])]),s._v(" "),t("tr",[t("td",[s._v("opkg status [package|regexp]")]),s._v(" "),t("td",[s._v("显示指定软件包的状态")])]),s._v(" "),t("tr",[t("td",[s._v("opkg download <package>")]),s._v(" "),t("td",[s._v("下载一个软件包到当前目录，但不安装")])])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("软件包列表可能会比较大，因此并不保存在系统中，每次启动需要首先执行 "),t("code",[s._v("opkg update")]),s._v(" 取得最新的软件包。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# opkg update")]),s._v("\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/base/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/opkg-lists/chaos_calmer_base.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/base/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/luci/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/opkg-lists/chaos_calmer_luci.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/luci/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/management/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/opkg-lists/chaos_calmer_management.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/management/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/packages/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/opkg-lists/chaos_calmer_packages.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/packages/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/routing/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/opkg-lists/chaos_calmer_routing.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/routing/Packages.sig.\nSignature check passed.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/telephony/Packages.gz.\nUpdated list of available packages "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/opkg-lists/chaos_calmer_telephony.\nDownloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/telephony/Packages.sig.\nSignature check passed.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("h2",{attrs:{id:"uci-命令系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uci-命令系统"}},[s._v("#")]),s._v(" UCI 命令系统")]),s._v(" "),t("p",[s._v("UCI (Unified Configuration Interface) 是 OpenWrt 中配置参数管理系统，UCI 中已经包含了网络配置、无线配置、系统信息配置等基本路由器所需的主要配置参数。")]),s._v(" "),t("p",[s._v("UCI 配置文件全部存储在 "),t("code",[s._v("/etc/config")]),s._v(" 目录下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls /etc/config/")]),s._v("\ndhcp           fstab          mountd         shairport      uhttpd\ndropbear       luci           network        system         wireless\nfirewall       mjpg-streamer  rpcd           ucitrack\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("常见的 UCI 配置：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("配置文件")]),s._v(" "),t("th",[s._v("作用")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("/etc/config/dhcp")]),s._v(" "),t("td",[s._v("面向 LAN 口提供的 IP 地址分配服务配置")])]),s._v(" "),t("tr",[t("td",[s._v("/etc/config/dropbear")]),s._v(" "),t("td",[s._v("SSH 服务配置")])]),s._v(" "),t("tr",[t("td",[s._v("/etc/config/firewall")]),s._v(" "),t("td",[s._v("路由转发，端口转发，防火墙规则")])]),s._v(" "),t("tr",[t("td",[s._v("/etc/config/network")]),s._v(" "),t("td",[s._v("自身网络接口配置")])]),s._v(" "),t("tr",[t("td",[s._v("/etc/config/system")]),s._v(" "),t("td",[s._v("时间服务器时区配置")])]),s._v(" "),t("tr",[t("td",[s._v("/etc/config/wireless")]),s._v(" "),t("td",[s._v("无线网络配置")])])])]),s._v(" "),t("p",[s._v("支持 UCI 管理模式的软件包是这样完成启动的（以 "),t("strong",[s._v("samba")]),s._v(" 软件为例）：")]),s._v(" "),t("ol",[t("li",[s._v("启动脚本 "),t("code",[s._v("/etc/init.d/samba")])]),s._v(" "),t("li",[s._v("启动脚本通过 UCI 分析库从 "),t("code",[s._v("/etc/config/samba")]),s._v(" 获得启动参数")]),s._v(" "),t("li",[s._v("启动脚本完成正常启动")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("UCI 配置文件既可以使用 UCI 命令进行修改，也可以使用文本编辑器直接修改。但如果两种方式都使用，需要注意 UCI 命令修改会产生缓存，每次修改好要尽快保存确认，以免出现冲突。")])]),s._v(" "),t("h3",{attrs:{id:"uci-文件格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uci-文件格式"}},[s._v("#")]),s._v(" UCI 文件格式")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("config 'section-type' 'section'\n\toption 'key' 'value'\n\toption 'list_key' 'list_value1'\n\toption 'list_key' 'list_value2'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("UCI 允许只有 "),t("strong",[s._v("section-type")]),s._v(" 的匿名配置节点。")])]),s._v(" "),t("h3",{attrs:{id:"uci-命令读写配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uci-命令读写配置"}},[s._v("#")]),s._v(" UCI 命令读写配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("uci "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("option"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("arguments"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"读取类语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#读取类语法"}},[s._v("#")]),s._v(" 读取类语法")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("uci get <config>.<section>")]),s._v(" "),t("td",[s._v("获取节点类型")])]),s._v(" "),t("tr",[t("td",[s._v("uci get <config>.<section>.<option>")]),s._v(" "),t("td",[s._v("获取取得一个值")])]),s._v(" "),t("tr",[t("td",[s._v("uci show")]),s._v(" "),t("td",[s._v("显示全部 UCI 配置")])]),s._v(" "),t("tr",[t("td",[s._v("uci show <config>")]),s._v(" "),t("td",[s._v("显示指定文件配置")])]),s._v(" "),t("tr",[t("td",[s._v("uci show <config>.<section>")]),s._v(" "),t("td",[s._v("显示指定节点的配置")])]),s._v(" "),t("tr",[t("td",[s._v("uci show <config>.<section>.<option>")]),s._v(" "),t("td",[s._v("显示指定选项配置")])]),s._v(" "),t("tr",[t("td",[s._v("uci changes <config>")]),s._v(" "),t("td",[s._v("显示尚未生效的修改记录")])]),s._v(" "),t("tr",[t("td",[s._v("uci show -X <config>.<section>.<option>")]),s._v(" "),t("td",[s._v("显示匿名节点")])])])]),s._v(" "),t("h4",{attrs:{id:"写入类语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#写入类语法"}},[s._v("#")]),s._v(" 写入类语法")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("命令")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("uci add <config> <section-type>")]),s._v(" "),t("td",[s._v("增加一个匿名节点")])]),s._v(" "),t("tr",[t("td",[s._v("uci set <config>.<section> = <section-type>")]),s._v(" "),t("td",[s._v("增加一个节点/修改节点类型")])]),s._v(" "),t("tr",[t("td",[s._v("uci set <config>.<section>.<option> = <value>")]),s._v(" "),t("td",[s._v("增加一个选项值/修改一个选项值")])]),s._v(" "),t("tr",[t("td",[s._v("uci add_list <config>.<section>.<option> = <value>")]),s._v(" "),t("td",[s._v("在列表中增加一个值")])]),s._v(" "),t("tr",[t("td",[s._v("uci delete <config>.<section>")]),s._v(" "),t("td",[s._v("删除指定节点")])]),s._v(" "),t("tr",[t("td",[s._v("uci delete <config>.<section>.<option>")]),s._v(" "),t("td",[s._v("删除指定选项")])]),s._v(" "),t("tr",[t("td",[s._v("uci delete <config>.<section>.<list>")]),s._v(" "),t("td",[s._v("删除列表")])]),s._v(" "),t("tr",[t("td",[s._v("uci del_list <config>.<section>.<option> = <string>")]),s._v(" "),t("td",[s._v("删除列表中的一个值")])]),s._v(" "),t("tr",[t("td",[s._v("uci commit <config>")]),s._v(" "),t("td",[s._v("使修改生效")])])])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("UCI 读取总是先读取内存中的缓存，然后再读取文件中的。进行过增删改操作后要执行生效指令，否则所有的修改只留存在缓存中。")])]),s._v(" "),t("h2",{attrs:{id:"常用配置操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用配置操作"}},[s._v("#")]),s._v(" 常用配置操作")]),s._v(" "),t("h3",{attrs:{id:"查看-system-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-system-配置"}},[s._v("#")]),s._v(" 查看 system 配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/config/system")]),s._v("\nconfig system\n\toption "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v("\tWidora\n\toption timezone\tCST-8\n\nconfig timeserver ntp\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".openwrt.pool.ntp.org\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".openwrt.pool.ntp.org\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".openwrt.pool.ntp.org\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".openwrt.pool.ntp.org\n\toption enabled "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\toption enable_server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nroot@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uci show system")]),s._v("\nsystem.@system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("system\nsystem.@system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Widora'")]),s._v("\nsystem.@system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".timezone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CST-8'")]),s._v("\nsystem.ntp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("timeserver\nsystem.ntp.server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0.openwrt.pool.ntp.org'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1.openwrt.pool.ntp.org'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2.openwrt.pool.ntp.org'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.openwrt.pool.ntp.org'")]),s._v("\nsystem.ntp.enabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\nsystem.ntp.enable_server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"查看网络配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看网络配置"}},[s._v("#")]),s._v(" 查看网络配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/config/network")]),s._v("\n\nconfig interface "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'loopback'")]),s._v("\n\toption ifname "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lo'")]),s._v("\n\toption proto "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static'")]),s._v("\n\toption ipaddr "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),s._v("\n\toption netmask "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'255.0.0.0'")]),s._v("\n\nconfig globals "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'globals'")]),s._v("\n\toption ula_prefix "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fdff:c5b2:821c::/48'")]),s._v("\n\nconfig interface "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lan'")]),s._v("\n\toption force_link "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n\toption macaddr "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0c:ef:af:d2:a9:b9'")]),s._v("\n\toption "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bridge'")]),s._v("\n\toption proto "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static'")]),s._v("\n\toption ipaddr "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.8.1'")]),s._v("\n\toption netmask "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'255.255.255.0'")]),s._v("\n\toption ip6assign "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'60'")]),s._v("\n\toption ifname "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eth0.1'")]),s._v("\n\nconfig interface "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wan'")]),s._v("\n\toption force_link "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n\toption macaddr "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0c:ef:af:d2:a9:b8'")]),s._v("\n\toption proto "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dhcp'")]),s._v("\n\toption ifname "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eth0.2'")]),s._v("\n\nconfig interface "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wan6'")]),s._v("\n\toption proto "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dhcpv6'")]),s._v("\n\toption ifname "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eth0.2'")]),s._v("\n\nconfig switch\n\toption name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'switch0'")]),s._v("\n\toption reset "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n\toption enable_vlan "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n\nconfig switch_vlan\n\toption device "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'switch0'")]),s._v("\n\toption vlan "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n\toption ports "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1 2 3 4 6t'")]),s._v("\n\nconfig switch_vlan\n\toption device "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'switch0'")]),s._v("\n\toption vlan "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v("\n\toption ports "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0 6t'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("h3",{attrs:{id:"重启网络使配置生效"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启网络使配置生效"}},[s._v("#")]),s._v(" 重启网络使配置生效")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/init.d/network restart")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"开启-wi-fi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启-wi-fi"}},[s._v("#")]),s._v(" 开启 Wi-Fi")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("uci "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" wireless.radio0.disabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使能 Wi-Fi")]),s._v("\nuci commit wireless "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使配置生效")]),s._v("\nwifi "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Wi-Fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"查看当前网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看当前网络"}},[s._v("#")]),s._v(" 查看当前网络")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig")]),s._v("\nbr-lan    Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B9\n          inet addr:192.168.8.1  Bcast:192.168.8.255  Mask:255.255.255.0\n          inet6 addr: fe80::eef:afff:fed2:a9b9/64 Scope:Link\n          inet6 addr: fdff:c5b2:821c::1/60 Scope:Global\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:574264 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:1217669 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:48102567 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45.8")]),s._v(" MiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  TX bytes:1634912136 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\neth0      Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8\n          inet6 addr: fe80::eef:afff:fed2:a9b8/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:1225320 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:579507 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:1641989813 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  TX bytes:59132909 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56.3")]),s._v(" MiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          Interrupt:5\n\neth0.1    Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:1 errors:0 dropped:1 overruns:0 frame:0\n          TX packets:3544 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:46 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("46.0")]),s._v(" B"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  TX bytes:244206 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("238.4")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\neth0.2    Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8\n          inet addr:192.168.1.5  Bcast:192.168.1.255  Mask:255.255.255.0\n          inet6 addr: fe80::eef:afff:fed2:a9b8/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:1176423 errors:0 dropped:10706 overruns:0 frame:0\n          TX packets:575928 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:1617670919 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  TX bytes:56565373 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("53.9")]),s._v(" MiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:294 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:294 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:41961 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40.9")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  TX bytes:41961 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40.9")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nra0       Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8\n          inet6 addr: fe80::eef:afff:fed2:a9b8/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:641847 errors:830 dropped:0 overruns:0 frame:0\n          TX packets:1228723 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:70965355 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("67.6")]),s._v(" MiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  TX bytes:1630822247 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          Interrupt:6\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("网络设备名")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("br-lan")]),s._v(" "),t("td",[s._v("虚拟设备，LAN 口桥接设备，包含通过 LAN 口和 WAN 口连入系统的设备统一桥接")])]),s._v(" "),t("tr",[t("td",[s._v("eth0")]),s._v(" "),t("td",[s._v("真实设备，CPU 内部到交换机芯片之间只有一个接口")])]),s._v(" "),t("tr",[t("td",[s._v("eth0.1")]),s._v(" "),t("td",[s._v("虚拟设备，由 VLAN 划分的有线的 LAN 口，VLAN 编号为 1")])]),s._v(" "),t("tr",[t("td",[s._v("eth0.2")]),s._v(" "),t("td",[s._v("虚拟设备，由 VLAN 划分的有线的 LAN 口，VLAN编号为 2")])]),s._v(" "),t("tr",[t("td",[s._v("lo")]),s._v(" "),t("td",[s._v("虚拟设备，回环设备")])]),s._v(" "),t("tr",[t("td",[s._v("ra0")]),s._v(" "),t("td",[s._v("真实设备，启动 Wi-Fi 后将会产生此无线设备")])]),s._v(" "),t("tr",[t("td",[s._v("pppoe-wan")]),s._v(" "),t("td",[s._v("虚拟设备，是 PPPoE 拨号上网成功后产生的")])])])]),s._v(" "),t("h3",{attrs:{id:"查看-br-lan-桥状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-br-lan-桥状态"}},[s._v("#")]),s._v(" 查看 br-lan 桥状态")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# brctl show")]),s._v("\nbridge name\tbridge "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\t\t\tSTP enabled\tinterfaces\nbr-lan\t\t7fff.0cefafd2a9b9\tno\t\t\teth0.1\n\t\t\t\t\t\t\t\t\t\t\tra0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"查看内核日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看内核日志"}},[s._v("#")]),s._v(" 查看内核日志")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# logread")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"查看当前-vlan-划分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看当前-vlan-划分"}},[s._v("#")]),s._v(" 查看当前 VLAN 划分")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# swconfig dev switch0 show")]),s._v("\nGlobal attributes:\n\tenable_vlan: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\talternate_vlan_disable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tbc_storm_protect: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tled_frequency: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nPort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":\n\tdisable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tdoubletag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tuntag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tled: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\tlan: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trecv_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\trecv_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2205")]),s._v("\n\ttr_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52155")]),s._v("\n\tpvid: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\tlink: port:0 link:up speed:100baseT full-duplex\nPort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":\n\tdisable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tdoubletag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tuntag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tled: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\tlan: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trecv_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\trecv_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tpvid: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tlink: port:1 link:down\nPort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":\n\tdisable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tdoubletag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tuntag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tled: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\tlan: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trecv_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\trecv_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tpvid: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tlink: port:2 link:down\nPort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(":\n\tdisable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tdoubletag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tuntag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tled: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\tlan: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trecv_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\trecv_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tpvid: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tlink: port:3 link:down\nPort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":\n\tdisable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tdoubletag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tuntag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tled: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\tlan: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trecv_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\trecv_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tpvid: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tlink: port:4 link:down\nPort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(":\n\tdisable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\tdoubletag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tuntag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tled: ???\n\tlan: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trecv_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\trecv_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_bad: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\ttr_good: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tpvid: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tlink: port:5 link:down\nPort "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(":\n\tdisable: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tdoubletag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tuntag: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tled: ???\n\tlan: ???\n\trecv_bad: ???\n\trecv_good: ???\n\ttr_bad: ???\n\ttr_good: ???\n\tpvid: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\tlink: port:6 link:up speed:1000baseT full-duplex\nVLAN "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":\n\tports: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 6t\nVLAN "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(":\n\tports: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 6t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("哪个网口是 LAN， 哪个是 WAN， 是由 VLAN 划分的。VLAN1 为 LAN 口，包含 1、2、3、4 接口；VLAN2 为 WAN 口，包含了 0 接口。")])]),s._v(" "),t("h3",{attrs:{id:"配置-wan-口外网"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-wan-口外网"}},[s._v("#")]),s._v(" 配置 WAN 口外网")]),s._v(" "),t("h4",{attrs:{id:"查看-wan-口配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-wan-口配置"}},[s._v("#")]),s._v(" 查看 WAN 口配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uci show network.wan")]),s._v("\nnetwork.wan"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("interface\nnetwork.wan.force_link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\nnetwork.wan.macaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0c:ef:af:d2:a9:b8'")]),s._v("\nnetwork.wan.proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dhcp'")]),s._v("\nnetwork.wan.ifname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eth0.2'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("选项")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("可选值")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("ifname")]),s._v(" "),t("td",[s._v("设备接口名")]),s._v(" "),t("td",[s._v("eth0.2")])]),s._v(" "),t("tr",[t("td",[s._v("proto")]),s._v(" "),t("td",[s._v("协议类型")]),s._v(" "),t("td",[s._v("static：静态 IP 地址"),t("br"),s._v("dhcp：动态获取 IP 地址"),t("br"),s._v("pppoe：拨号上网"),t("br"),s._v("pptp：远程 VPN 服务器"),t("br"),s._v("3g：连接 3G/4G 无线电话网络")])]),s._v(" "),t("tr",[t("td",[s._v("macaddr")]),s._v(" "),t("td",[s._v("WAN 口 MAC 地址，修改该地址即可实现 MAC 地址克隆")]),s._v(" "),t("td",[s._v("首次数据根据 factory 分区内参数自动生成")])])])]),s._v(" "),t("h4",{attrs:{id:"动态获取-ip-选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#动态获取-ip-选项"}},[s._v("#")]),s._v(" 动态获取 IP 选项")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("选项")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("可选值及说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("proto")]),s._v(" "),t("td",[s._v("协议类型")]),s._v(" "),t("td",[s._v("dhcp")])]),s._v(" "),t("tr",[t("td",[s._v("ifname")]),s._v(" "),t("td",[s._v("设备名称")]),s._v(" "),t("td",[s._v("eth0.2")])]),s._v(" "),t("tr",[t("td",[s._v("macaddr")]),s._v(" "),t("td",[s._v("MAC 地址")]),s._v(" "),t("td",[s._v("根据 factory 分区自动生成的值")])]),s._v(" "),t("tr",[t("td",[s._v("mtu")]),s._v(" "),t("td",[s._v("最大数据包大小，默认不用设置")]),s._v(" "),t("td",[s._v("数值")])]),s._v(" "),t("tr",[t("td",[s._v("reqopts")]),s._v(" "),t("td",[s._v("在向 DHCP 服务器发出请求时增加附加的 DHCP 信息")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("dns")]),s._v(" "),t("td",[s._v("使用指定的 DNS 服务器地址替代获得的 DNS")]),s._v(" "),t("td",[s._v("字符串")])])])]),s._v(" "),t("h4",{attrs:{id:"指定静态-ip-选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定静态-ip-选项"}},[s._v("#")]),s._v(" 指定静态 IP 选项")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("选项")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("可选值及说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("proto")]),s._v(" "),t("td",[s._v("协议类型")]),s._v(" "),t("td",[s._v("static")])]),s._v(" "),t("tr",[t("td",[s._v("ifname")]),s._v(" "),t("td",[s._v("设备名称")]),s._v(" "),t("td",[s._v("eth0.2")])]),s._v(" "),t("tr",[t("td",[s._v("macaddr")]),s._v(" "),t("td",[s._v("MAC 地址")]),s._v(" "),t("td",[s._v("根据 factory 分区自动生成的值")])]),s._v(" "),t("tr",[t("td",[s._v("mtu")]),s._v(" "),t("td",[s._v("最大数据包大小，默认不用设置")]),s._v(" "),t("td",[s._v("数值")])]),s._v(" "),t("tr",[t("td",[s._v("ipaddr")]),s._v(" "),t("td",[s._v("WAN 口的 IP 地址")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("netmask")]),s._v(" "),t("td",[s._v("WAN 口的子网掩码")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("gateway")]),s._v(" "),t("td",[s._v("默认网关")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("broadcast")]),s._v(" "),t("td",[s._v("广播地址")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("dns")]),s._v(" "),t("td",[s._v("使用指定的 DNS 服务器地址替代获得的 DNS")]),s._v(" "),t("td",[s._v("字符串")])])])]),s._v(" "),t("h4",{attrs:{id:"pppoe-拨号上网选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pppoe-拨号上网选项"}},[s._v("#")]),s._v(" PPPOE 拨号上网选项")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("选项")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("可选值及说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("proto")]),s._v(" "),t("td",[s._v("协议类型")]),s._v(" "),t("td",[s._v("pppoe")])]),s._v(" "),t("tr",[t("td",[s._v("ifname")]),s._v(" "),t("td",[s._v("设备名称")]),s._v(" "),t("td",[s._v("eth0.2")])]),s._v(" "),t("tr",[t("td",[s._v("macaddr")]),s._v(" "),t("td",[s._v("MAC 地址")]),s._v(" "),t("td",[s._v("根据 factory 分区自动生成的值")])]),s._v(" "),t("tr",[t("td",[s._v("mtu")]),s._v(" "),t("td",[s._v("最大数据包大小，默认不用设置")]),s._v(" "),t("td",[s._v("数值")])]),s._v(" "),t("tr",[t("td",[s._v("username")]),s._v(" "),t("td",[s._v("拨号使用的帐号")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("password")]),s._v(" "),t("td",[s._v("拨号使用的密码")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("ac")]),s._v(" "),t("td",[s._v("使用指定的访问集中器进行连接")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("service")]),s._v(" "),t("td",[s._v("连接的服务名称")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("connect")]),s._v(" "),t("td",[s._v("连接时候执行的外部脚本")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("disconnect")]),s._v(" "),t("td",[s._v("断开连接时执行的外部脚本")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("demand")]),s._v(" "),t("td",[s._v("等待多久没有活动就断开 PPPOE 连接")]),s._v(" "),t("td",[s._v("数字，单位秒")])]),s._v(" "),t("tr",[t("td",[s._v("dns")]),s._v(" "),t("td",[s._v("DNS 服务器地址")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("pppd_options")]),s._v(" "),t("td",[s._v("用于 pppd 进程执行时候的附加参数")]),s._v(" "),t("td",[s._v("字符串")])])])]),s._v(" "),t("h3",{attrs:{id:"配置-lan-口服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-lan-口服务"}},[s._v("#")]),s._v(" 配置 LAN 口服务")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("LAN 口下的设备可以通过 WAN 口接入网络，也可以直接访问设备上的各项功能（系统防火墙对 LAN 口默认不做任何拦截）。")])]),s._v(" "),t("h4",{attrs:{id:"查看-lan-口配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-lan-口配置"}},[s._v("#")]),s._v(" 查看 LAN 口配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uci show network.lan")]),s._v("\nnetwork.lan"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("interface\nnetwork.lan.force_link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\nnetwork.lan.macaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0c:ef:af:d2:a9:b9'")]),s._v("\nnetwork.lan.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bridge'")]),s._v("\nnetwork.lan.proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static'")]),s._v("\nnetwork.lan.ipaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.8.1'")]),s._v("\nnetwork.lan.netmask"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'255.255.255.0'")]),s._v("\nnetwork.lan.ip6assign"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'60'")]),s._v("\nnetwork.lan.ifname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eth0.1'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("table",[t("thead",[t("tr",[t("th",[s._v("选项")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("可选值及说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("ifname")]),s._v(" "),t("td",[s._v("设备名称")]),s._v(" "),t("td",[s._v("eth0.1")])]),s._v(" "),t("tr",[t("td",[s._v("proto")]),s._v(" "),t("td",[s._v("协议类型")]),s._v(" "),t("td",[s._v("static")])]),s._v(" "),t("tr",[t("td",[s._v("macaddr")]),s._v(" "),t("td",[s._v("MAC 地址")]),s._v(" "),t("td",[s._v("根据 factory 分区自动生成的值")])]),s._v(" "),t("tr",[t("td",[s._v("type")]),s._v(" "),t("td",[s._v("网络类型")]),s._v(" "),t("td",[s._v("bridge，桥模式（这样才有交换机功能）")])]),s._v(" "),t("tr",[t("td",[s._v("ipaddr")]),s._v(" "),t("td",[s._v("LAN 口的 IP 地址，用于局域网内其它设备访问路由器")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("netmask")]),s._v(" "),t("td",[s._v("LAN 口的子网掩码")]),s._v(" "),t("td",[s._v("字符串")])])])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("修改过 LAN 口的配置后要重启网络以及 DHCP 服务。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/init.d/network restart")]),s._v("\nroot@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/odhcpd restart")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("h3",{attrs:{id:"配置无线网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置无线网络"}},[s._v("#")]),s._v(" 配置无线网络")]),s._v(" "),t("h4",{attrs:{id:"查看无线网络配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看无线网络配置"}},[s._v("#")]),s._v(" 查看无线网络配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/config/wireless")]),s._v("\n\nconfig wifi-device "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'radio0'")]),s._v("\n\toption "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ralink'")]),s._v("\n\toption variant "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mt7628'")]),s._v("\n\toption country "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CN'")]),s._v("\n\toption hwmode "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'11bgn'")]),s._v("\n\toption htmode "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HT40'")]),s._v("\n\toption channel "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'auto'")]),s._v("\n\toption disabled "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v("\n\nconfig wifi-iface "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ap'")]),s._v("\n\toption device "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'radio0'")]),s._v("\n\toption mode "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ap'")]),s._v("\n\toption network "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lan'")]),s._v("\n\toption ifname "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ra0'")]),s._v("\n\toption ssid "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Widora-A9B8'")]),s._v("\n\toption hidden "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0'")]),s._v("\n\toption encryption "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'psk2'")]),s._v("\n\toption key "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'passworkd'")]),s._v("\n\nconfig wifi-iface "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sta'")]),s._v("\n\toption device "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'radio0'")]),s._v("\n\toption disabled "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n\toption mode "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sta'")]),s._v("\n\toption network "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wwan'")]),s._v("\n\toption ifname "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'apcli0'")]),s._v("\n\toption ssid "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'UplinkAp'")]),s._v("\n\toption key "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SecretKey'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("h4",{attrs:{id:"wifi-device-选项参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wifi-device-选项参数"}},[s._v("#")]),s._v(" wifi-device 选项参数")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("选项")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("可选值及说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("type")]),s._v(" "),t("td",[s._v("设备类型")]),s._v(" "),t("td",[s._v("ralink")])]),s._v(" "),t("tr",[t("td",[s._v("channel")]),s._v(" "),t("td",[s._v("无线信道，不同的国家支持的信道不同")]),s._v(" "),t("td",[s._v("auto 或 1～13")])]),s._v(" "),t("tr",[t("td",[s._v("hwmode")]),s._v(" "),t("td",[s._v("无线协议类型")]),s._v(" "),t("td",[s._v("11bgn: IEEE802.11b + IEEE802.11g + IEEE802.11n")])]),s._v(" "),t("tr",[t("td",[s._v("htmode")]),s._v(" "),t("td",[s._v("无线频宽")]),s._v(" "),t("td",[s._v("HT20、HT40")])]),s._v(" "),t("tr",[t("td",[s._v("disable")]),s._v(" "),t("td",[s._v("关闭无线设备")]),s._v(" "),t("td",[s._v("0：启用；1：禁用")])]),s._v(" "),t("tr",[t("td",[s._v("country")]),s._v(" "),t("td",[s._v("国家类型，跟支持的频道有关，中国为 CN，支持 1～13")]),s._v(" "),t("td",[s._v("CN：中国")])])])]),s._v(" "),t("h4",{attrs:{id:"wifi-iface-选项参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wifi-iface-选项参数"}},[s._v("#")]),s._v(" wifi-iface 选项参数")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("选项")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("可选值及说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("device")]),s._v(" "),t("td",[s._v("关联的无线设备")]),s._v(" "),t("td",[s._v("radio0")])]),s._v(" "),t("tr",[t("td",[s._v("network")]),s._v(" "),t("td",[s._v("关联网络设备类型")]),s._v(" "),t("td",[s._v("lan：表示桥接到 LAN 网上"),t("br"),s._v("wwan：表示启用无线中继")])]),s._v(" "),t("tr",[t("td",[s._v("mode")]),s._v(" "),t("td",[s._v("无线工作模式")]),s._v(" "),t("td",[s._v("ap：热点模式"),t("br"),s._v("sta：客户端模式")])]),s._v(" "),t("tr",[t("td",[s._v("ssid")]),s._v(" "),t("td",[s._v("无线的名称")]),s._v(" "),t("td",[s._v("字符串")])]),s._v(" "),t("tr",[t("td",[s._v("hidden")]),s._v(" "),t("td",[s._v("隐藏无线名称")]),s._v(" "),t("td",[s._v("0：显示名称"),t("br"),s._v("1：隐藏名称")])]),s._v(" "),t("tr",[t("td",[s._v("encryption")]),s._v(" "),t("td",[s._v("无线加密方式")]),s._v(" "),t("td",[s._v("none：不加密"),t("br"),s._v("psk：WPA-PSK 模式"),t("br"),s._v("psk2：WPA-PSK2 模式"),t("br"),s._v("psk-mixed：WPA-PSK / WPA-PSK2 混合模式")])]),s._v(" "),t("tr",[t("td",[s._v("key")]),s._v(" "),t("td",[s._v("无线密钥")]),s._v(" "),t("td",[s._v("字符串，长度为 8～64 个 ASCII 字符")])])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("修改过无线配置后需要使用命令 "),t("code",[s._v("wifi")]),s._v(" 使之生效")])]),s._v(" "),t("h4",{attrs:{id:"查看无线网络状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看无线网络状态"}},[s._v("#")]),s._v(" 查看无线网络状态")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iwinfo")]),s._v("\nra0       ESSID: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Widora-A9B8"')]),s._v("\n          Access Point: 0C:EF:AF:D2:A9:B8\n          Mode: Client  Channel: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.442")]),s._v(" GHz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          Tx-Power: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" dBm  Link Quality: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("/100\n          Signal: -256 dBm  Noise: -82 dBm\n          Bit Rate: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("150.0")]),s._v(" MBit/s\n          Encryption: unknown\n          Type: wext  HW Mode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("802")]),s._v(".11bg\n          Hardware: unknown "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Generic WEXT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          TX power offset: unknown\n          Frequency offset: unknown\n          Supports VAPs: no  PHY name: ra0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"搜索范围内的其它无线设备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搜索范围内的其它无线设备"}},[s._v("#")]),s._v(" 搜索范围内的其它无线设备")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iwinfo ra0 scan")]),s._v("\nCell 01 - Address: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(":64:2B:4B:02:4E\n          ESSID: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Xiaomi_024D"')]),s._v("\n          Mode: Master  Channel: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n          Signal: -256 dBm  Quality: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v("/100\n          Encryption: WPA2 PSK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TKIP, AES-OCB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nCell 02 - Address: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(":97:5A:EC:C5:14\n          ESSID: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"FAST_C514"')]),s._v("\n          Mode: Master  Channel: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n          Signal: -256 dBm  Quality: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),s._v("/100\n          Encryption: WPA2 PSK "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("AES-OCB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙"}},[s._v("#")]),s._v(" 防火墙")]),s._v(" "),t("p",[s._v("防火墙、DMZ（独立隔离区）、NAT 转发在 OpenWrt 系统中都是由 /etc/config/firewall 配置文件管理的。")]),s._v(" "),t("h3",{attrs:{id:"防火墙命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙命令"}},[s._v("#")]),s._v(" 防火墙命令")]),s._v(" "),t("h4",{attrs:{id:"重置防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重置防火墙"}},[s._v("#")]),s._v(" 重置防火墙")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/init.d/firewall reload")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"重启防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启防火墙"}},[s._v("#")]),s._v(" 重启防火墙")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/init.d/firewall restart")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"查看防火墙完整策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看防火墙完整策略"}},[s._v("#")]),s._v(" 查看防火墙完整策略")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iptables -L")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"防火墙-defaults-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙-defaults-配置"}},[s._v("#")]),s._v(" 防火墙 defaults 配置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("config defaults\n\toption syn_flood\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用防洪水攻击")]),s._v("\n\toption input\t\tACCEPT\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# INPUT 链过滤策略")]),s._v("\n\toption output\t\tACCEPT\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# OUTPUT 链过滤策略")]),s._v("\n\toption forward\t\tREJECT\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# FORWARD 链过滤策略")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"防火墙-zone-域配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙-zone-域配置"}},[s._v("#")]),s._v(" 防火墙 zone 域配置")]),s._v(" "),t("p",[s._v("系统将 LAN 和 WAN 分为两个不同的 zone，它们之间是隔离的。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("config zone\n\toption name\t\t\tlan\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zone 节点名")]),s._v("\n\tlist   network\t\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lan'")]),s._v("\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定绑定到该 zone 上的设备")]),s._v("\n\toption input\t\tACCEPT\n\toption output\t\tACCEPT\n\toption forward\t\tACCEPT\n\nconfig zone\n\toption name\t\t\twan\n\tlist   network\t\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wan'")]),s._v("\n\tlist   network\t\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wan6'")]),s._v("\n\tlist   network\t\t"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wwan'")]),s._v("\n\toption input\t\tACCEPT\n\toption output\t\tACCEPT\n\toption forward\t\tREJECT\n\toption masq\t\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 传输伪装开关，WAN 必须设为 1")]),s._v("\n\toption mtu_fix\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据输出时开启 MSS 钳制，WAN 必须设为 1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"防火墙-forwarding-转发配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙-forwarding-转发配置"}},[s._v("#")]),s._v(" 防火墙 forwarding 转发配置")]),s._v(" "),t("p",[s._v("forwarding 配置可以实现两个不同 zone 域之间的数据发送")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("config forwarding\n\toption src\t\tlan\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 来源 zone")]),s._v("\n\toption dest\t\twan\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 目标 zone")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"防火墙-rule-规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙-rule-规则"}},[s._v("#")]),s._v(" 防火墙 rule 规则")]),s._v(" "),t("p",[s._v("默认情况下，所有进入 WAN 口的请求都会被拒绝，如果希望有例外，那么要通过 rule 来实现许可。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Allow IPv4 ping")]),s._v("\nconfig rule\n\toption name\t\t\tAllow-Ping\n\toption src\t\t\twan\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据源的 zone 域")]),s._v("\n\toption proto\t\ticmp\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据源的协议类型")]),s._v("\n\toption icmp_type\techo-request\n\toption family\t\tipv4\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# IP 协议类型")]),s._v("\n\toption target\t\tACCEPT\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 规则动作")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止 LAN 口的某个 IP 访问 WAN 口")]),s._v("\nconfig rule\n\toption src\t\tlan\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据源的 zone 域")]),s._v("\n\toption src_ip\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".45.2\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据源的 IP 地址")]),s._v("\n\toption dest\t\twan\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 目的地的 zone 域")]),s._v("\n\toption proto\ttcp\n\toption target\tREJECT\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止某个 MAC 地址访问 WAN")]),s._v("\nconfig rule\n\toption dest\t\twan\n\toption src_mac\t00:11:22:33:44:66\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据源的 MAC 地址")]),s._v("\n\toption target\tREJECT\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阻塞某个 zone 上的 ICMP 流量")]),s._v("\nconfig rule\n\toption src\t\tlan\n\toption proto\tICMP\n\toption target\tDROP\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("h3",{attrs:{id:"防火墙-redirect-端口转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#防火墙-redirect-端口转发"}},[s._v("#")]),s._v(" 防火墙 redirect 端口转发")]),s._v(" "),t("p",[s._v("端口转发允许访问者通过 WAN 口访问 LAN 口中的一个特定端口，并将结果转发回给访问者。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 LAN 口的 80 端口开放到 WAN 口上")]),s._v("\nconfig redirect\n\toption src\t\t\twan\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 被转发来源 zone 域")]),s._v("\n\toption src_dport\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 被转发的端口")]),s._v("\n\toption dest\t\t\tlan\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转发到哪个 zone 域")]),s._v("\n\toption dest_ip\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".16.235 \t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转发到哪个 IP 地址")]),s._v("\n\toption dest_port\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转发到哪个端口")]),s._v("\n\toption proto\t\ttcp\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 协议类型")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将所有来自 WAN 口的 TCP 协议访问 22001 的请求都转发给 LAN 中的一台 80 端口的计算机")]),s._v("\nconfig redirect\n\toption src\t\t\twan\n\toption src_dport\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22001")]),s._v("\n\toption dest\t\t\tlan\n\toption dest_port\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n\toption proto\t\ttcp\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 IP 地址 192.168.1.2 设置到 DMZ 隔离区")]),s._v("\nconfig redirect\n\toption src\t\t\twan\n\toption proto\t\tall\n\toption dest_ip\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h2",{attrs:{id:"ntp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ntp"}},[s._v("#")]),s._v(" NTP")]),s._v(" "),t("p",[s._v("NTP 用来使网络中的各个计算机时间同步的一种协议，它的用途是把系统的时钟同步到 UTC 时区，其精度在局域网内可达到 0.1ms，在互联网上绝大多数情况其精度可以达到1～50ms。")]),s._v(" "),t("p",[s._v("配置内容如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/config/system")]),s._v("\nconfig system\n\toption "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v("\tWidora\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 主机名")]),s._v("\n\toption timezone\tCST-8\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时区")]),s._v("\n\nconfig timeserver ntp\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".openwrt.pool.ntp.org\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# NTP 服务器地址")]),s._v("\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".openwrt.pool.ntp.org\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".openwrt.pool.ntp.org\n\tlist server\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".openwrt.pool.ntp.org\n\toption enabled "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启 NTP 功能")]),s._v("\n\toption enable_server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("阿里云提供了 NTP 服务功能：")]),s._v(" "),t("p",[s._v("ntp1.aliyun.com")]),s._v(" "),t("p",[s._v("ntp2.aliyun.com")]),s._v(" "),t("p",[s._v("ntp3.aliyun.com")])]),s._v(" "),t("h2",{attrs:{id:"服务管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务管理"}},[s._v("#")]),s._v(" 服务管理")]),s._v(" "),t("h3",{attrs:{id:"查看系统服务命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看系统服务命令"}},[s._v("#")]),s._v(" 查看系统服务命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@Widora:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls /etc/init.d/")]),s._v("\navahi-daemon   dbus           dropbear       led            mountd         rpcd           sysctl         system         "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("umount")]),s._v("\nboot           dnsmasq        firewall       log            network        setnetmode     sysfixtime     telnet\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cron")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("           fstab          mjpg-streamer  odhcpd         shairport      sysntpd        uhttpd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"服务命令的语法格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务命令的语法格式"}},[s._v("#")]),s._v(" 服务命令的语法格式")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("服务的语法格式：/etc/init.d/服务名称 [命令]\n可用命令：\n\t\tstart\t临时开启这个服务\n\t\tstop\t临时关闭这个服务\n\t\trestart 重启当前已开启的服务，如果没有开启就开启它\n\t\treload \t重新读取该服务的配置信息（如果服务支持的话）\n\t\tenable\t设置该服务随系统一同启动\n\t\tdisable\t禁止该服务随系统一同启动\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);
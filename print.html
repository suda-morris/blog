<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ğŸ suda-morris ä¸ªäººåšå®¢ ğŸ‡</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Personal Blog">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="resume.html">å…³äºæˆ‘</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">æ“ä½œç³»ç»Ÿ</li><li class="chapter-item expanded "><a href="cs/openwrt.html"><strong aria-hidden="true">1.</strong> OpenWRT</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">æ§åˆ¶ç³»ç»Ÿ</li><li class="chapter-item expanded "><a href="ee/control-system.html"><strong aria-hidden="true">2.</strong> æ§åˆ¶ç³»ç»ŸåŸºç¡€</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">å¤šåª’ä½“</li><li class="chapter-item expanded "><a href="cs/video-process.html"><strong aria-hidden="true">3.</strong> è§†é¢‘å¤„ç†</a></li><li class="chapter-item expanded affix "><li class="part-title">é€šä¿¡åè®®</li><li class="chapter-item expanded "><a href="ee/usb.html"><strong aria-hidden="true">4.</strong> USB åè®®åŸºç¡€</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">ç®¡ç†</li><li class="chapter-item expanded "><a href="cs/git.html"><strong aria-hidden="true">5.</strong> git</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">æ¼”ç¤º</li><li class="chapter-item expanded "><a href="ux/slides-tool.html"><strong aria-hidden="true">6.</strong> slides å·¥å…·</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ğŸ suda-morris ä¸ªäººåšå®¢ ğŸ‡</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/suda-morris/blog" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <center>
    <h1 id="èŒ…èƒœè£"><a class="header" href="#èŒ…èƒœè£">èŒ…èƒœè£</a></h1>
    <div>
        <span>
            ğŸ“ 18862141982
        </span>
        <span>
            ğŸ“¬ 18862141982@163.com
        </span>
        <span>
            âœ’ï¸ <a href="https://suda-morris.github.io/blog">blog</a>
        </span>
        <span>
            ğŸ“· <a href="https://space.bilibili.com/9635864">vlog</a>
        </span>
    </div>
</center>
<h2 id="-ä¸ªäººä¿¡æ¯"><a class="header" href="#-ä¸ªäººä¿¡æ¯">ğŸ›ˆ ä¸ªäººä¿¡æ¯</a></h2>
<ul>
<li>ç”·ï¼Œ1992 å¹´å‡ºç”Ÿ</li>
<li>æ±‚èŒæ„å‘ï¼šé«˜çº§åµŒå…¥å¼è½¯ä»¶å·¥ç¨‹å¸ˆ</li>
<li>å·¥ä½œç»éªŒï¼š4 å¹´</li>
<li>ç°å±…åœ°ï¼šæ±Ÿè‹çœè‹å·å¸‚å´ä¸­åŒº</li>
</ul>
<h2 id="-æ•™è‚²ç»å†"><a class="header" href="#-æ•™è‚²ç»å†">ğŸ“ï¸ æ•™è‚²ç»å†</a></h2>
<ul>
<li>ç¡•å£«ï¼Œè‹å·å¤§å­¦ï¼Œç”µå­ç§‘å­¦ä¸æŠ€æœ¯ä¸“ä¸šï¼Œ2015.9~2018.7ï¼ŒGPA(3.9/4.0)</li>
<li>å­¦å£«ï¼Œè‹å·å¤§å­¦ï¼Œç”µå­ä¿¡æ¯å·¥ç¨‹ä¸“ä¸šï¼Œ2011.9~2015.7ï¼ŒGPA(3.8/4.0)</li>
</ul>
<h2 id="-å·¥ä½œç»å†"><a class="header" href="#-å·¥ä½œç»å†">ğŸ’¼ å·¥ä½œç»å†</a></h2>
<ul>
<li>
<p><strong>ä¹é‘«ä¿¡æ¯ç§‘æŠ€ï¼ŒèŠ¯ç‰‡æ”¯æŒéƒ¨é—¨ï¼ŒåµŒå…¥å¼é©±åŠ¨å·¥ç¨‹å¸ˆï¼Œ2018.7 æœˆè‡³ä»Š</strong></p>
<ul>
<li>èŠ¯ç‰‡ bring up</li>
<li>SOC å¤–è®¾é©±åŠ¨æ¡†æ¶</li>
</ul>
</li>
</ul>
<h2 id="-å“è¶Šè´¡çŒ®"><a class="header" href="#-å“è¶Šè´¡çŒ®">ğŸšµ å“è¶Šè´¡çŒ®</a></h2>
<ul>
<li>
<p><strong>è®¾è®¡å®ç°é€šç”¨åºåˆ—æ”¶å‘å™¨é©±åŠ¨æ¡†æ¶</strong></p>
<p><em>event-driven, OOP, IR, encoder</em></p>
<ul>
<li>å·¥å‚æ¨¡å¼åˆ†é… RMT é€šé“ï¼Œæ”¶å‘åŠŸèƒ½æ¥å£éš”ç¦»</li>
<li>äº‹åŠ¡æ¨¡å‹ï¼Œæ¯ä¸ªäº‹åŠ¡ç‹¬ç«‹çš„ç¼–ç å™¨é©±åŠ¨</li>
<li>ç»„åˆè®¾è®¡æ¨¡å¼ï¼Œå¯è‡ªç”±ç»„åˆåŸç”Ÿç¼–ç å™¨ï¼Œä¸ºç‰¹å®šåº”ç”¨åˆ›å»ºæ–°çš„ç¼–ç å™¨</li>
<li>ä¼ è¾“å±‚æŠ½è±¡ï¼Œæ”¯æŒ DMA ä¸é DMA ä¼ è¾“ï¼Œæ¥å£å±‚ç»Ÿä¸€</li>
<li>è¯¦è§ <a href="https://github.com/espressif/esp-idf/tree/master/components/driver/rmt">GitHub é¡¹ç›®åœ°å€</a></li>
</ul>
</li>
<li>
<p><strong>è®¾è®¡å®ç°åµŒå…¥å¼ä»¥å¤ªç½‘é©±åŠ¨æ¡†æ¶</strong></p>
<p><em>mediator pattern, OOP, Ethernet</em></p>
<ul>
<li>ä¸­ä»‹å™¨è®¾è®¡æ¨¡å¼ï¼Œåˆ†éš”ç”¨æˆ·ã€MAC å±‚å’Œ PHY å±‚</li>
<li>å¤šæ€è®¾è®¡ï¼Œæ”¯æŒ ESP32 å†…éƒ¨ MAC æ§åˆ¶å™¨ä»¥åŠå…¶ä»– SPI æ¥å£çš„ä»¥å¤ªç½‘æ¨¡å—</li>
<li>é©±åŠ¨åˆ†å±‚è®¾è®¡ï¼ŒLL + HAL + driverï¼Œé™ä½é©±åŠ¨åœ¨ä¸åŒèŠ¯ç‰‡å¹³å°ä¸Šç§»æ¤çš„éš¾åº¦</li>
<li>è¯¦è§ <a href="https://github.com/espressif/esp-idf/tree/master/components/esp_eth">GitHub é¡¹ç›®åœ°å€</a></li>
</ul>
</li>
<li>
<p><strong>è®¾è®¡å®ç°åµŒå…¥å¼LCDé©±åŠ¨æ¡†æ¶</strong></p>
<p><em>RGB/YUV, I80, SPI, I2C, LvGL, OOP, LCD</em></p>
<ul>
<li>æŠ½è±¡å‡º panel_io æ¥å£ï¼Œç»Ÿä¸€ SPI/I2C/I80 å¯¹ LCD æ¨¡ç»„å‘é€å‘½ä»¤ä¸æ˜¾å­˜æ•°æ®çš„æ“ä½œ</li>
<li>æŠ½è±¡å‡º panel å¯¹è±¡ï¼Œç»Ÿä¸€åº”ç”¨å±‚å¯¹æ˜¾å­˜è®¾å¤‡çš„æ“ä½œï¼Œæ”¯æŒ RGB æ¥å£çš„ LCD å’Œ panel_io æŠ½è±¡æ¥å£çš„ LCD è®¾å¤‡</li>
<li>IO æ¥å£ä¸æ˜¾å­˜æ“ä½œåˆ†ç¦»ï¼ŒLCD æ§åˆ¶å™¨é©±åŠ¨å¯å¤ç”¨ç¨‹åº¦æœ€å¤§åŒ–</li>
<li>é€‚é… LvGL åº“ï¼Œå¯¹æ¥å¼‚æ­¥æ¥å£</li>
<li>è¯¦è§ <a href="https://github.com/espressif/esp-idf/tree/master/components/esp_lcd">GitHub é¡¹ç›®åœ°å€</a></li>
</ul>
</li>
</ul>
<h2 id="-æŠ€èƒ½æ¸…å•"><a class="header" href="#-æŠ€èƒ½æ¸…å•">ğŸ›  æŠ€èƒ½æ¸…å•</a></h2>
<ul>
<li>â˜…â˜…â˜… C è¯­è¨€é¢å‘å¯¹è±¡å»ºæ¨¡ä¸å®ç°</li>
<li>â˜…â˜…â˜† Pythonã€Bash</li>
<li>â˜…â˜…â˜† è®¡ç®—æœºç½‘ç»œ</li>
</ul>
<h2 id="-èŒä¸šè®¤è¯"><a class="header" href="#-èŒä¸šè®¤è¯">ğŸ†ï¸ èŒä¸šè®¤è¯</a></h2>
<ul>
<li>èŒç§°: æ±Ÿè‹çœ<strong>ä¸­çº§</strong>ä¸“ä¸šæŠ€æœ¯èµ„æ ¼</li>
<li>ç½‘ç»œ: CCNA(920åˆ†), å…¨å›½è®¡ç®—æœºç­‰çº§4çº§(ç½‘ç»œå·¥ç¨‹å¸ˆ)</li>
<li>è¯­è¨€: CET-6(511åˆ†)</li>
<li>ç¼–ç¨‹: æ±Ÿè‹çœè®¡ç®—æœºç­‰çº§3çº§(è½¯ä»¶)</li>
<li>ç«èµ›: å…¨å›½å¤§å­¦ç”Ÿç”µå­è®¾è®¡ç«èµ›äºŒç­‰å¥–</li>
</ul>
<h2 id="-ä¸šä½™çˆ±å¥½"><a class="header" href="#-ä¸šä½™çˆ±å¥½">â›µï¸ ä¸šä½™çˆ±å¥½</a></h2>
<ul>
<li>åª’ä½“: ç”¨åšå®¢ã€è§†é¢‘è®°å½•å·¥ä½œä¸ç”Ÿæ´»</li>
<li>åˆ›å®¢: æ¥è§¦æœ€æ–°æœ€å¥½ç©çš„åˆ›å®¢ç©å…·(æ ‘è“æ´¾, openwrt, XMOS, PSoC)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="openwrt-åŸºç¡€"><a class="header" href="#openwrt-åŸºç¡€">OpenWRT åŸºç¡€</a></h1>
<h2 id="flash-åˆ†åŒº"><a class="header" href="#flash-åˆ†åŒº">Flash åˆ†åŒº</a></h2>
<p>Linuxç³»ç»Ÿå¯¹é—ªå­˜ç±»å­˜å‚¨å™¨æ˜¯é‡‡ç”¨MTDè®¾å¤‡é©±åŠ¨å®ç°çš„ã€‚</p>
<pre><code class="language-bash">[    0.290000] spi-mt7621 10000b00.spi: sys_freq: 193333333
[    0.300000] m25p80 spi32766.0: w25q256 (32768 Kbytes)
[    0.300000] m25p80 spi32766.0: using chunked io
[    0.310000] 4 ofpart partitions found on MTD device spi32766.0
[    0.310000] Creating 4 MTD partitions on &quot;spi32766.0&quot;:
[    0.320000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;
[    0.320000] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;
[    0.330000] 0x000000040000-0x000000050000 : &quot;factory&quot;
[    0.340000] 0x000000050000-0x000002000000 : &quot;firmware&quot;
[    0.410000] 2 uimage-fw partitions found on MTD device firmware
[    0.410000] 0x000000050000-0x000000168da1 : &quot;kernel&quot;
[    0.420000] 0x000000168da1-0x000002000000 : &quot;rootfs&quot;
[    0.420000] mtd: device 5 (rootfs) set to be root filesystem
[    0.430000] 1 squashfs-split partitions found on MTD device rootfs
[    0.440000] 0x000000620000-0x000002000000 : &quot;rootfs_data&quot;
</code></pre>
<p>::: tip
ç³»ç»Ÿåœ¨SPIè®¾å¤‡ä¸Šåˆ›å»ºäº†4ä¸ªMTDåˆ†åŒº
:::</p>
<div class="table-wrapper"><table><thead><tr><th>åˆ†åŒºå</th><th>åˆ†åŒºä½œç”¨</th></tr></thead><tbody>
<tr><td>u-boot</td><td>å¼•å¯¼ç¨‹åº</td></tr>
<tr><td>u-boot-env</td><td>å¼•å¯¼ç¨‹åºçš„é…ç½®æ•°æ®</td></tr>
<tr><td>factory</td><td>è·¯ç”±å™¨èŠ¯ç‰‡çš„åˆå§‹åŒ–å‚æ•°</td></tr>
<tr><td>firmware</td><td>å›ºä»¶åˆ†åŒº</td></tr>
<tr><td>kernel</td><td>å›ºä»¶åˆ†åŒº<br />Linux å†…æ ¸</td></tr>
<tr><td>rootfs</td><td>å›ºä»¶åˆ†åŒº<br />æ–‡ä»¶ç³»ç»Ÿå­é›†</td></tr>
<tr><td>rootfs_rom</td><td>å›ºä»¶åˆ†åŒº<br />æ–‡ä»¶ç³»ç»Ÿå­é›†<br />åªè¯»åˆ†åŒºå­é›†</td></tr>
<tr><td>rootfs_data</td><td>å›ºä»¶åˆ†åŒº<br />æ–‡ä»¶ç³»ç»Ÿå­é›†<br />å¯å†™åˆ†åŒºå­é›†</td></tr>
</tbody></table>
</div>
<p>::: tip
åˆ†åŒºå­˜åœ¨å­åˆ†åŒºï¼Œkernelå’Œrootfså°±æ˜¯firmwareçš„å­åˆ†åŒºï¼Œrootfs_romå’Œrootfs_dataå°±æ˜¯rootfsçš„å­åˆ†åŒºã€‚
:::</p>
<h3 id="æŸ¥çœ‹ç³»ç»Ÿ-mtd-åˆ†é…"><a class="header" href="#æŸ¥çœ‹ç³»ç»Ÿ-mtd-åˆ†é…">æŸ¥çœ‹ç³»ç»Ÿ MTD åˆ†é…</a></h3>
<pre><code class="language-bash">root@Widora:~# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00030000 00010000 &quot;u-boot&quot;
mtd1: 00010000 00010000 &quot;u-boot-env&quot;
mtd2: 00010000 00010000 &quot;factory&quot;
mtd3: 01fb0000 00010000 &quot;firmware&quot;
mtd4: 00118da1 00010000 &quot;kernel&quot;
mtd5: 01e9725f 00010000 &quot;rootfs&quot;
mtd6: 019e0000 00010000 &quot;rootfs_data&quot;
</code></pre>
<h3 id="æŸ¥çœ‹ç³»ç»Ÿ-mtd-åˆ†é…-1"><a class="header" href="#æŸ¥çœ‹ç³»ç»Ÿ-mtd-åˆ†é…-1">æŸ¥çœ‹ç³»ç»Ÿ MTD åˆ†é…</a></h3>
<pre><code class="language-bash">root@Widora:~# cat /proc/partitions
major   minor  #blocks    name
31       0        192   mtdblock0
31       1         64   mtdblock1
31       2         64   mtdblock2
31       3      32448   mtdblock3
31       4       1123   mtdblock4
31       5      31324   mtdblock5
31       6      26496   mtdblock6
</code></pre>
<h3 id="è¯»å–å¤‡ä»½-factory-åˆ†åŒº"><a class="header" href="#è¯»å–å¤‡ä»½-factory-åˆ†åŒº">è¯»å–/å¤‡ä»½ factory åˆ†åŒº</a></h3>
<p>factory åˆ†åŒºï¼ˆä½äº /dev/mtd2ï¼‰ä¿å­˜äº†é‡è¦çš„é…ç½®å‚æ•°ï¼ˆå¦‚MACåœ°å€ï¼Œå¤©çº¿åŒ¹é…å‚æ•°ç­‰ï¼‰ã€‚</p>
<h4 id="æŸ¥çœ‹åˆ†åŒºå†…å®¹"><a class="header" href="#æŸ¥çœ‹åˆ†åŒºå†…å®¹">æŸ¥çœ‹åˆ†åŒºå†…å®¹</a></h4>
<pre><code class="language-bash">root@Widora:~# hexdump /dev/mtd2
0000000 7628 0001 ef0c d2af b8a9 0000 0000 0000
0000010 ffff ffff ffff ffff ffff ffff ffff ffff
0000020 0000 0000 0020 0000 ef0c d2af b8a9 ef0c
0000030 d2af b9a9 3422 2000 ffff 0100 0000 0000
0000040 0000 0022 0000 0000 0030 0000 0000 0000
0000050 0081 9400 b040 c640 c31a c2c3 c5c0 0027
0000060 ffff ffff ffff ffff ffff ffff ffff ffff
*
00000a0 c6c6 c4c4 c0c4 c4c0 c4c4 c0c4 c0c0 0000
00000b0 ffff ffff ffff ffff ffff ffff ffff ffff
*
00000f0 0000 0000 00d1 8800 0000 0000 0000 0000
0000100 ffff ffff ffff ffff ffff ffff ffff ffff
*
0000120 0000 0000 0000 0000 0000 0000 0000 0077
0000130 1d11 1d11 7f15 7f15 7f17 7f17 3b10 3b10
0000140 ffff ffff ffff ffff ffff ffff ffff ffff
*
0010000
</code></pre>
<h4 id="å¤‡ä»½åˆ†åŒº"><a class="header" href="#å¤‡ä»½åˆ†åŒº">å¤‡ä»½åˆ†åŒº</a></h4>
<p>ä½¿ç”¨ <code>dd</code> å‘½ä»¤å°†åˆ†åŒºè¯»åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨æµè§ˆå™¨ä¸‹è½½åˆ°æœ¬åœ°ã€‚</p>
<pre><code class="language-bash">root@Widora:~# dd if=/dev/mtd2 of=/www/art.bin
128+0 records in
128+0 records out
root@Widora:~# ls -l /www/art.bin
-rw-r--r--    1 root     root         65536 Apr 27 18:26 /www/art.bin
</code></pre>
<h2 id="æ–‡ä»¶ç³»ç»Ÿ"><a class="header" href="#æ–‡ä»¶ç³»ç»Ÿ">æ–‡ä»¶ç³»ç»Ÿ</a></h2>
<pre><code class="language-bash">root@Widora:/# df
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                   26496       752     25744   3% /
/dev/root                 4864      4864         0 100% /rom
tmpfs                    63232        84     63148   0% /tmp
/dev/mtdblock6           26496       752     25744   3% /overlay
overlayfs:/overlay       26496       752     25744   3% /
tmpfs                      512         0       512   0% /dev
</code></pre>
<ol>
<li>å¼•å¯¼ç¨‹åºå¯åŠ¨å†…æ ¸å®Œæˆåï¼Œç”±å†…æ ¸åŠ è½½ <code>rootfs_rom</code> åªè¯»åˆ†åŒºæ¥å®Œæˆç³»ç»Ÿçš„åˆæ­¥å¯åŠ¨ã€‚<code>rootfs_rom</code> åªè¯»åˆ†åŒºé‡‡ç”¨çš„æ˜¯ Linux å†…æ ¸æ”¯æŒçš„ <strong>squashFS</strong> æ–‡ä»¶ç³»ç»Ÿï¼ŒåŠ è½½å®Œæ¯•åå°†å…¶æŒ‚è½½åˆ° <code>/rom</code> ç›®å½•ï¼ŒåŒæ—¶ä¹ŸæŒ‚è½½ä¸º <code>/</code> ç›®å½•ã€‚</li>
<li>ç³»ç»Ÿå°†ä½¿ç”¨ <strong>JFFS2</strong> æ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–çš„ <code>rootfs_data</code> å¯å†™æ–‡ä»¶åˆ†åŒºå¹¶å°†è¿™éƒ¨åˆ†æŒ‚è½½åˆ° <code>/overlay</code> ç›®å½•ã€‚</li>
<li>ç³»ç»Ÿå†å°† <code>/overlay</code> é€æ˜æŒ‚è½½ä¸º <code>/</code> æ ¹ç›®å½•ã€‚</li>
<li>æœ€åå°†ä¸€éƒ¨åˆ†å†…å­˜æŒ‚è½½ä¸º<code>/tmp</code> ç›®å½•ã€‚</li>
</ol>
<h3 id="é€æ˜æŒ‚è½½æ ¹ç›®å½•-"><a class="header" href="#é€æ˜æŒ‚è½½æ ¹ç›®å½•-">é€æ˜æŒ‚è½½æ ¹ç›®å½• /</a></h3>
<p>::: tip</p>
<p>OpenWrt è®¾è®¡çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼šç³»ç»Ÿå…ˆå°† <code>rootfs_rom</code> æŒ‚è½½ä¸º <code>/</code> æ ¹ç›®å½•ï¼Œè¿™æ ·å°±å…·å¤‡äº†ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼Œç„¶åå†å°† <code>rootfs_data</code> ä»¥é€æ˜æ–¹å¼æŒ‚è½½åœ¨ <code>/</code> æ ¹ç›®å½•ä¸Šã€‚</p>
<p>:::</p>
<ul>
<li>æœ€ç»ˆå‘ˆç°çš„æ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯ç”± <code>rootfs_rom</code> å’Œ <code>rootfs_data</code> ä¸¤ä¸ªåˆ†åŒºç»„åˆåœ¨ä¸€èµ·çš„æ•ˆæœã€‚</li>
<li>å¯¹ä»»ä½•æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆå¢ã€åˆ ã€æ”¹ï¼‰éƒ½ä¼šè®°å½•åœ¨ <code>rootfs_data</code> åˆ†åŒºä¸­ã€‚</li>
<li>è¯»å–æ–‡ä»¶å†…å®¹æ—¶ï¼Œé¦–å…ˆæ£€æµ‹ <code>rootfs_data</code> é‡Œçš„çŠ¶æ€ï¼Œå†æ£€æµ‹ <code>roots_rom</code> é‡Œçš„å†…å®¹ï¼Œæœ€åè¾“å‡ºç»“æœã€‚</li>
</ul>
<p>::: warning</p>
<p>å¦‚æœä¿®æ”¹äº†ä¸€ä¸ªåä¸º abc çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨ <code>/rom</code> é‡Œè¿˜ä¼šä¿ç•™ä¿®æ”¹ä¹‹å‰çš„é‚£ä¸ª abc æ–‡ä»¶ï¼ŒåŒæ—¶åœ¨ <code>/overlay</code> é‡Œæœ‰ä¿®æ”¹åçš„ abc æ–‡ä»¶ï¼Œå› æ­¤æ‰€å çš„ç©ºé—´å°†ä¼šå€å¢ã€‚è¿™æ ·å¸¦æ¥çš„ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œåœ¨ä»»ä½•æ—¶å€™ï¼Œåªè¦åˆ é™¤ <code>/overlay</code> é‡Œæ‰€æœ‰çš„æ–‡ä»¶ï¼Œå°±èƒ½è¾¾åˆ°æ¢å¤å‡ºå‚çš„æ•ˆæœã€‚</p>
<p>:::</p>
<h3 id="å¸¸ç”¨æ–‡ä»¶å¤¹"><a class="header" href="#å¸¸ç”¨æ–‡ä»¶å¤¹">å¸¸ç”¨æ–‡ä»¶å¤¹</a></h3>
<div class="table-wrapper"><table><thead><tr><th>æ–‡ä»¶å¤¹è·¯å¾„</th><th>ä½œç”¨</th></tr></thead><tbody>
<tr><td>/etc/</td><td>å­˜æ”¾ç³»ç»Ÿæ‰€æœ‰çš„é…ç½®æ–‡ä»¶</td></tr>
<tr><td>/etc/init.d/</td><td>å­˜æ”¾å¯åŠ¨çš„æœåŠ¡è„šæœ¬</td></tr>
<tr><td>/etc/config/</td><td>å­˜æ”¾ OpenWrt çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç»œ</td></tr>
<tr><td>/tmp/</td><td>å­˜æ”¾ä¸´æ—¶æ–‡ä»¶å’ŒåŠ¨æ€çš„é…ç½®æ–‡ä»¶</td></tr>
<tr><td>/tmp/TZ</td><td>ç³»ç»Ÿå¯åŠ¨åæ‰€ä½¿ç”¨çš„æ—¶åŒºå‚æ•°</td></tr>
</tbody></table>
</div>
<h2 id="è½¯ä»¶åŒ…ç®¡ç†å™¨-opkg"><a class="header" href="#è½¯ä»¶åŒ…ç®¡ç†å™¨-opkg">è½¯ä»¶åŒ…ç®¡ç†å™¨ OPKG</a></h2>
<h3 id="é…ç½®-opkg"><a class="header" href="#é…ç½®-opkg">é…ç½® OPKG</a></h3>
<p><code>/etc/opkg.conf</code> æ–‡ä»¶ä¿å­˜ OPKG ç›¸å…³è®¾ç½®ï¼š</p>
<pre><code class="language-bash">root@Widora:/# cat /etc/opkg.conf
dest root /
dest ram /tmp
lists_dir ext /var/opkg-lists
option overlay_root /overlay
option check_signature 1
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>dest root</td><td>å®‰è£…ç›®æ ‡çš„è·Ÿè·¯å¾„</td></tr>
<tr><td>dest ram</td><td>å†…å­˜ä¸´æ—¶æ–‡ä»¶è·¯å¾„</td></tr>
<tr><td>lists_dir ext</td><td>è½¯ä»¶åŒ…åˆ—è¡¨æ–‡ä»¶</td></tr>
<tr><td>option overlay_root</td><td>å¯å†™åˆ†åŒºæŒ‚è½½ä½ç½®</td></tr>
</tbody></table>
</div>
<h3 id="å¸¸ç”¨å‘½ä»¤æ­é…"><a class="header" href="#å¸¸ç”¨å‘½ä»¤æ­é…">å¸¸ç”¨å‘½ä»¤æ­é…</a></h3>
<div class="table-wrapper"><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>opkg update</td><td>ä¸‹è½½æœåŠ¡å™¨ä¸Šå¯ç”¨çš„è½¯ä»¶åŒ…åˆ—è¡¨</td></tr>
<tr><td>opkg upgrade &lt;package&gt;</td><td>å‡çº§è½¯ä»¶åŒ…</td></tr>
<tr><td>opkg install &lt;package&gt;</td><td>å®‰è£…è½¯ä»¶åŒ…</td></tr>
<tr><td>opkg configure &lt;package&gt;</td><td>é…ç½®æŸä¸€ä¸ªè½¯ä»¶åŒ…</td></tr>
<tr><td>opkg remove &lt;package&gt;</td><td>å¸è½½è½¯ä»¶åŒ…</td></tr>
<tr><td>opkg list</td><td>åˆ—å‡ºå…¨éƒ¨å¯ç”¨çš„è½¯ä»¶åŒ…</td></tr>
<tr><td>opkg list-installed</td><td>åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶åŒ…</td></tr>
<tr><td>opkg list-upgradable</td><td>åˆ—å‡ºå¯ä»¥å‡çº§çš„è½¯ä»¶åŒ…</td></tr>
<tr><td>opkg info [package|regexp]</td><td>æ˜¾ç¤ºæŒ‡å®šè½¯ä»¶åŒ…çš„ä¿¡æ¯</td></tr>
<tr><td>opkg status [package|regexp]</td><td>æ˜¾ç¤ºæŒ‡å®šè½¯ä»¶åŒ…çš„çŠ¶æ€</td></tr>
<tr><td>opkg download &lt;package&gt;</td><td>ä¸‹è½½ä¸€ä¸ªè½¯ä»¶åŒ…åˆ°å½“å‰ç›®å½•ï¼Œä½†ä¸å®‰è£…</td></tr>
</tbody></table>
</div>
<p>::: tip</p>
<p>è½¯ä»¶åŒ…åˆ—è¡¨å¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼Œå› æ­¤å¹¶ä¸ä¿å­˜åœ¨ç³»ç»Ÿä¸­ï¼Œæ¯æ¬¡å¯åŠ¨éœ€è¦é¦–å…ˆæ‰§è¡Œ <code>opkg update</code> å–å¾—æœ€æ–°çš„è½¯ä»¶åŒ…ã€‚</p>
<p>:::</p>
<pre><code class="language-bash">root@Widora:/# opkg update
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/base/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_base.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/base/Packages.sig.
Signature check passed.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/luci/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_luci.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/luci/Packages.sig.
Signature check passed.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/management/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_management.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/management/Packages.sig.
Signature check passed.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/packages/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_packages.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/packages/Packages.sig.
Signature check passed.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/routing/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_routing.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/routing/Packages.sig.
Signature check passed.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/telephony/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_telephony.
Downloading http://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7688/packages/telephony/Packages.sig.
Signature check passed.
</code></pre>
<h2 id="uci-å‘½ä»¤ç³»ç»Ÿ"><a class="header" href="#uci-å‘½ä»¤ç³»ç»Ÿ">UCI å‘½ä»¤ç³»ç»Ÿ</a></h2>
<p>UCI (Unified Configuration Interface) æ˜¯ OpenWrt ä¸­é…ç½®å‚æ•°ç®¡ç†ç³»ç»Ÿï¼ŒUCI ä¸­å·²ç»åŒ…å«äº†ç½‘ç»œé…ç½®ã€æ— çº¿é…ç½®ã€ç³»ç»Ÿä¿¡æ¯é…ç½®ç­‰åŸºæœ¬è·¯ç”±å™¨æ‰€éœ€çš„ä¸»è¦é…ç½®å‚æ•°ã€‚</p>
<p>UCI é…ç½®æ–‡ä»¶å…¨éƒ¨å­˜å‚¨åœ¨ <code>/etc/config</code> ç›®å½•ä¸‹ï¼š</p>
<pre><code class="language-bash">root@Widora:/# ls /etc/config/
dhcp           fstab          mountd         shairport      uhttpd
dropbear       luci           network        system         wireless
firewall       mjpg-streamer  rpcd           ucitrack
</code></pre>
<p>å¸¸è§çš„ UCI é…ç½®ï¼š</p>
<div class="table-wrapper"><table><thead><tr><th>é…ç½®æ–‡ä»¶</th><th>ä½œç”¨</th></tr></thead><tbody>
<tr><td>/etc/config/dhcp</td><td>é¢å‘ LAN å£æä¾›çš„ IP åœ°å€åˆ†é…æœåŠ¡é…ç½®</td></tr>
<tr><td>/etc/config/dropbear</td><td>SSH æœåŠ¡é…ç½®</td></tr>
<tr><td>/etc/config/firewall</td><td>è·¯ç”±è½¬å‘ï¼Œç«¯å£è½¬å‘ï¼Œé˜²ç«å¢™è§„åˆ™</td></tr>
<tr><td>/etc/config/network</td><td>è‡ªèº«ç½‘ç»œæ¥å£é…ç½®</td></tr>
<tr><td>/etc/config/system</td><td>æ—¶é—´æœåŠ¡å™¨æ—¶åŒºé…ç½®</td></tr>
<tr><td>/etc/config/wireless</td><td>æ— çº¿ç½‘ç»œé…ç½®</td></tr>
</tbody></table>
</div>
<p>æ”¯æŒ UCI ç®¡ç†æ¨¡å¼çš„è½¯ä»¶åŒ…æ˜¯è¿™æ ·å®Œæˆå¯åŠ¨çš„ï¼ˆä»¥ <strong>samba</strong> è½¯ä»¶ä¸ºä¾‹ï¼‰ï¼š</p>
<ol>
<li>å¯åŠ¨è„šæœ¬ <code>/etc/init.d/samba</code></li>
<li>å¯åŠ¨è„šæœ¬é€šè¿‡ UCI åˆ†æåº“ä» <code>/etc/config/samba</code> è·å¾—å¯åŠ¨å‚æ•°</li>
<li>å¯åŠ¨è„šæœ¬å®Œæˆæ­£å¸¸å¯åŠ¨</li>
</ol>
<p>::: warning</p>
<p>UCI é…ç½®æ–‡ä»¶æ—¢å¯ä»¥ä½¿ç”¨ UCI å‘½ä»¤è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç›´æ¥ä¿®æ”¹ã€‚ä½†å¦‚æœä¸¤ç§æ–¹å¼éƒ½ä½¿ç”¨ï¼Œéœ€è¦æ³¨æ„ UCI å‘½ä»¤ä¿®æ”¹ä¼šäº§ç”Ÿç¼“å­˜ï¼Œæ¯æ¬¡ä¿®æ”¹å¥½è¦å°½å¿«ä¿å­˜ç¡®è®¤ï¼Œä»¥å…å‡ºç°å†²çªã€‚</p>
<p>:::</p>
<h3 id="uci-æ–‡ä»¶æ ¼å¼"><a class="header" href="#uci-æ–‡ä»¶æ ¼å¼">UCI æ–‡ä»¶æ ¼å¼</a></h3>
<pre><code>config 'section-type' 'section'
	option 'key' 'value'
	option 'list_key' 'list_value1'
	option 'list_key' 'list_value2'
</code></pre>
<p>::: tip</p>
<p>UCI å…è®¸åªæœ‰ <strong>section-type</strong> çš„åŒ¿åé…ç½®èŠ‚ç‚¹ã€‚</p>
<p>:::</p>
<h3 id="uci-å‘½ä»¤è¯»å†™é…ç½®"><a class="header" href="#uci-å‘½ä»¤è¯»å†™é…ç½®">UCI å‘½ä»¤è¯»å†™é…ç½®</a></h3>
<pre><code class="language-bash">uci [&lt;option&gt;] &lt;command&gt; [&lt;arguments&gt;]
</code></pre>
<h4 id="è¯»å–ç±»è¯­æ³•"><a class="header" href="#è¯»å–ç±»è¯­æ³•">è¯»å–ç±»è¯­æ³•</a></h4>
<div class="table-wrapper"><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>uci get &lt;config&gt;.&lt;section&gt;</td><td>è·å–èŠ‚ç‚¹ç±»å‹</td></tr>
<tr><td>uci get &lt;config&gt;.&lt;section&gt;.&lt;option&gt;</td><td>è·å–å–å¾—ä¸€ä¸ªå€¼</td></tr>
<tr><td>uci show</td><td>æ˜¾ç¤ºå…¨éƒ¨ UCI é…ç½®</td></tr>
<tr><td>uci show &lt;config&gt;</td><td>æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶é…ç½®</td></tr>
<tr><td>uci show &lt;config&gt;.&lt;section&gt;</td><td>æ˜¾ç¤ºæŒ‡å®šèŠ‚ç‚¹çš„é…ç½®</td></tr>
<tr><td>uci show &lt;config&gt;.&lt;section&gt;.&lt;option&gt;</td><td>æ˜¾ç¤ºæŒ‡å®šé€‰é¡¹é…ç½®</td></tr>
<tr><td>uci changes &lt;config&gt;</td><td>æ˜¾ç¤ºå°šæœªç”Ÿæ•ˆçš„ä¿®æ”¹è®°å½•</td></tr>
<tr><td>uci show -X &lt;config&gt;.&lt;section&gt;.&lt;option&gt;</td><td>æ˜¾ç¤ºåŒ¿åèŠ‚ç‚¹</td></tr>
</tbody></table>
</div>
<h4 id="å†™å…¥ç±»è¯­æ³•"><a class="header" href="#å†™å…¥ç±»è¯­æ³•">å†™å…¥ç±»è¯­æ³•</a></h4>
<div class="table-wrapper"><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>uci add &lt;config&gt; &lt;section-type&gt;</td><td>å¢åŠ ä¸€ä¸ªåŒ¿åèŠ‚ç‚¹</td></tr>
<tr><td>uci set &lt;config&gt;.&lt;section&gt; = &lt;section-type&gt;</td><td>å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹/ä¿®æ”¹èŠ‚ç‚¹ç±»å‹</td></tr>
<tr><td>uci set &lt;config&gt;.&lt;section&gt;.&lt;option&gt; = &lt;value&gt;</td><td>å¢åŠ ä¸€ä¸ªé€‰é¡¹å€¼/ä¿®æ”¹ä¸€ä¸ªé€‰é¡¹å€¼</td></tr>
<tr><td>uci add_list &lt;config&gt;.&lt;section&gt;.&lt;option&gt; = &lt;value&gt;</td><td>åœ¨åˆ—è¡¨ä¸­å¢åŠ ä¸€ä¸ªå€¼</td></tr>
<tr><td>uci delete &lt;config&gt;.&lt;section&gt;</td><td>åˆ é™¤æŒ‡å®šèŠ‚ç‚¹</td></tr>
<tr><td>uci delete &lt;config&gt;.&lt;section&gt;.&lt;option&gt;</td><td>åˆ é™¤æŒ‡å®šé€‰é¡¹</td></tr>
<tr><td>uci delete &lt;config&gt;.&lt;section&gt;.&lt;list&gt;</td><td>åˆ é™¤åˆ—è¡¨</td></tr>
<tr><td>uci del_list &lt;config&gt;.&lt;section&gt;.&lt;option&gt; = &lt;string&gt;</td><td>åˆ é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå€¼</td></tr>
<tr><td>uci commit &lt;config&gt;</td><td>ä½¿ä¿®æ”¹ç”Ÿæ•ˆ</td></tr>
</tbody></table>
</div>
<p>::: warning</p>
<p>UCI è¯»å–æ€»æ˜¯å…ˆè¯»å–å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œç„¶åå†è¯»å–æ–‡ä»¶ä¸­çš„ã€‚è¿›è¡Œè¿‡å¢åˆ æ”¹æ“ä½œåè¦æ‰§è¡Œç”Ÿæ•ˆæŒ‡ä»¤ï¼Œå¦åˆ™æ‰€æœ‰çš„ä¿®æ”¹åªç•™å­˜åœ¨ç¼“å­˜ä¸­ã€‚</p>
<p>:::</p>
<h2 id="å¸¸ç”¨é…ç½®æ“ä½œ"><a class="header" href="#å¸¸ç”¨é…ç½®æ“ä½œ">å¸¸ç”¨é…ç½®æ“ä½œ</a></h2>
<h3 id="æŸ¥çœ‹-system-é…ç½®"><a class="header" href="#æŸ¥çœ‹-system-é…ç½®">æŸ¥çœ‹ system é…ç½®</a></h3>
<pre><code class="language-bash">root@Widora:/# cat /etc/config/system
config system
	option hostname	Widora
	option timezone	CST-8

config timeserver ntp
	list server	0.openwrt.pool.ntp.org
	list server	1.openwrt.pool.ntp.org
	list server	2.openwrt.pool.ntp.org
	list server	3.openwrt.pool.ntp.org
	option enabled 1
	option enable_server 0
root@Widora:/# uci show system
system.@system[0]=system
system.@system[0].hostname='Widora'
system.@system[0].timezone='CST-8'
system.ntp=timeserver
system.ntp.server='0.openwrt.pool.ntp.org' '1.openwrt.pool.ntp.org' '2.openwrt.pool.ntp.org' '3.openwrt.pool.ntp.org'
system.ntp.enabled='1'
system.ntp.enable_server='0'
</code></pre>
<h3 id="æŸ¥çœ‹ç½‘ç»œé…ç½®"><a class="header" href="#æŸ¥çœ‹ç½‘ç»œé…ç½®">æŸ¥çœ‹ç½‘ç»œé…ç½®</a></h3>
<pre><code class="language-bash">root@Widora:/# cat /etc/config/network

config interface 'loopback'
	option ifname 'lo'
	option proto 'static'
	option ipaddr '127.0.0.1'
	option netmask '255.0.0.0'

config globals 'globals'
	option ula_prefix 'fdff:c5b2:821c::/48'

config interface 'lan'
	option force_link '1'
	option macaddr '0c:ef:af:d2:a9:b9'
	option type 'bridge'
	option proto 'static'
	option ipaddr '192.168.8.1'
	option netmask '255.255.255.0'
	option ip6assign '60'
	option ifname 'eth0.1'

config interface 'wan'
	option force_link '1'
	option macaddr '0c:ef:af:d2:a9:b8'
	option proto 'dhcp'
	option ifname 'eth0.2'

config interface 'wan6'
	option proto 'dhcpv6'
	option ifname 'eth0.2'

config switch
	option name 'switch0'
	option reset '1'
	option enable_vlan '1'

config switch_vlan
	option device 'switch0'
	option vlan '1'
	option ports '1 2 3 4 6t'

config switch_vlan
	option device 'switch0'
	option vlan '2'
	option ports '0 6t'
</code></pre>
<h3 id="é‡å¯ç½‘ç»œä½¿é…ç½®ç”Ÿæ•ˆ"><a class="header" href="#é‡å¯ç½‘ç»œä½¿é…ç½®ç”Ÿæ•ˆ">é‡å¯ç½‘ç»œä½¿é…ç½®ç”Ÿæ•ˆ</a></h3>
<pre><code class="language-bash">root@Widora:~# /etc/init.d/network restart
</code></pre>
<h3 id="å¼€å¯-wi-fi"><a class="header" href="#å¼€å¯-wi-fi">å¼€å¯ Wi-Fi</a></h3>
<pre><code class="language-bash">uci set wireless.radio0.disabled=0 # ä½¿èƒ½ Wi-Fi
uci commit wireless # ä½¿é…ç½®ç”Ÿæ•ˆ
wifi # å¯åŠ¨ Wi-Fi
</code></pre>
<h3 id="æŸ¥çœ‹å½“å‰ç½‘ç»œ"><a class="header" href="#æŸ¥çœ‹å½“å‰ç½‘ç»œ">æŸ¥çœ‹å½“å‰ç½‘ç»œ</a></h3>
<pre><code class="language-bash">root@Widora:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B9
          inet addr:192.168.8.1  Bcast:192.168.8.255  Mask:255.255.255.0
          inet6 addr: fe80::eef:afff:fed2:a9b9/64 Scope:Link
          inet6 addr: fdff:c5b2:821c::1/60 Scope:Global
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:574264 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1217669 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:48102567 (45.8 MiB)  TX bytes:1634912136 (1.5 GiB)

eth0      Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8
          inet6 addr: fe80::eef:afff:fed2:a9b8/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1225320 errors:0 dropped:0 overruns:0 frame:0
          TX packets:579507 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:1641989813 (1.5 GiB)  TX bytes:59132909 (56.3 MiB)
          Interrupt:5

eth0.1    Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1 errors:0 dropped:1 overruns:0 frame:0
          TX packets:3544 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:46 (46.0 B)  TX bytes:244206 (238.4 KiB)

eth0.2    Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8
          inet addr:192.168.1.5  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::eef:afff:fed2:a9b8/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1176423 errors:0 dropped:10706 overruns:0 frame:0
          TX packets:575928 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1617670919 (1.5 GiB)  TX bytes:56565373 (53.9 MiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:294 errors:0 dropped:0 overruns:0 frame:0
          TX packets:294 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:41961 (40.9 KiB)  TX bytes:41961 (40.9 KiB)

ra0       Link encap:Ethernet  HWaddr 0C:EF:AF:D2:A9:B8
          inet6 addr: fe80::eef:afff:fed2:a9b8/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:641847 errors:830 dropped:0 overruns:0 frame:0
          TX packets:1228723 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:70965355 (67.6 MiB)  TX bytes:1630822247 (1.5 GiB)
          Interrupt:6
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>ç½‘ç»œè®¾å¤‡å</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>br-lan</td><td>è™šæ‹Ÿè®¾å¤‡ï¼ŒLAN å£æ¡¥æ¥è®¾å¤‡ï¼ŒåŒ…å«é€šè¿‡ LAN å£å’Œ WAN å£è¿å…¥ç³»ç»Ÿçš„è®¾å¤‡ç»Ÿä¸€æ¡¥æ¥</td></tr>
<tr><td>eth0</td><td>çœŸå®è®¾å¤‡ï¼ŒCPU å†…éƒ¨åˆ°äº¤æ¢æœºèŠ¯ç‰‡ä¹‹é—´åªæœ‰ä¸€ä¸ªæ¥å£</td></tr>
<tr><td>eth0.1</td><td>è™šæ‹Ÿè®¾å¤‡ï¼Œç”± VLAN åˆ’åˆ†çš„æœ‰çº¿çš„ LAN å£ï¼ŒVLAN ç¼–å·ä¸º 1</td></tr>
<tr><td>eth0.2</td><td>è™šæ‹Ÿè®¾å¤‡ï¼Œç”± VLAN åˆ’åˆ†çš„æœ‰çº¿çš„ LAN å£ï¼ŒVLANç¼–å·ä¸º 2</td></tr>
<tr><td>lo</td><td>è™šæ‹Ÿè®¾å¤‡ï¼Œå›ç¯è®¾å¤‡</td></tr>
<tr><td>ra0</td><td>çœŸå®è®¾å¤‡ï¼Œå¯åŠ¨ Wi-Fi åå°†ä¼šäº§ç”Ÿæ­¤æ— çº¿è®¾å¤‡</td></tr>
<tr><td>pppoe-wan</td><td>è™šæ‹Ÿè®¾å¤‡ï¼Œæ˜¯ PPPoE æ‹¨å·ä¸Šç½‘æˆåŠŸåäº§ç”Ÿçš„</td></tr>
</tbody></table>
</div>
<h3 id="æŸ¥çœ‹-br-lan-æ¡¥çŠ¶æ€"><a class="header" href="#æŸ¥çœ‹-br-lan-æ¡¥çŠ¶æ€">æŸ¥çœ‹ br-lan æ¡¥çŠ¶æ€</a></h3>
<pre><code class="language-bash">root@Widora:/# brctl show
bridge name	bridge id			STP enabled	interfaces
br-lan		7fff.0cefafd2a9b9	no			eth0.1
											ra0
</code></pre>
<h3 id="æŸ¥çœ‹å†…æ ¸æ—¥å¿—"><a class="header" href="#æŸ¥çœ‹å†…æ ¸æ—¥å¿—">æŸ¥çœ‹å†…æ ¸æ—¥å¿—</a></h3>
<pre><code class="language-bash">root@Widora:/# logread
</code></pre>
<h3 id="æŸ¥çœ‹å½“å‰-vlan-åˆ’åˆ†"><a class="header" href="#æŸ¥çœ‹å½“å‰-vlan-åˆ’åˆ†">æŸ¥çœ‹å½“å‰ VLAN åˆ’åˆ†</a></h3>
<pre><code class="language-bash">root@Widora:/# swconfig dev switch0 show
Global attributes:
	enable_vlan: 1
	alternate_vlan_disable: 0
	bc_storm_protect: 0
	led_frequency: 0
Port 0:
	disable: 0
	doubletag: 0
	untag: 1
	led: 5
	lan: 1
	recv_bad: 0
	recv_good: 2205
	tr_bad: 0
	tr_good: 52155
	pvid: 2
	link: port:0 link:up speed:100baseT full-duplex
Port 1:
	disable: 0
	doubletag: 0
	untag: 1
	led: 5
	lan: 1
	recv_bad: 0
	recv_good: 0
	tr_bad: 0
	tr_good: 0
	pvid: 1
	link: port:1 link:down
Port 2:
	disable: 0
	doubletag: 0
	untag: 1
	led: 5
	lan: 1
	recv_bad: 0
	recv_good: 0
	tr_bad: 0
	tr_good: 0
	pvid: 1
	link: port:2 link:down
Port 3:
	disable: 0
	doubletag: 0
	untag: 1
	led: 5
	lan: 1
	recv_bad: 0
	recv_good: 0
	tr_bad: 0
	tr_good: 0
	pvid: 1
	link: port:3 link:down
Port 4:
	disable: 0
	doubletag: 0
	untag: 1
	led: 5
	lan: 1
	recv_bad: 0
	recv_good: 0
	tr_bad: 0
	tr_good: 0
	pvid: 1
	link: port:4 link:down
Port 5:
	disable: 1
	doubletag: 0
	untag: 0
	led: ???
	lan: 1
	recv_bad: 0
	recv_good: 0
	tr_bad: 0
	tr_good: 0
	pvid: 0
	link: port:5 link:down
Port 6:
	disable: 0
	doubletag: 0
	untag: 0
	led: ???
	lan: ???
	recv_bad: ???
	recv_good: ???
	tr_bad: ???
	tr_good: ???
	pvid: 0
	link: port:6 link:up speed:1000baseT full-duplex
VLAN 1:
	ports: 1 2 3 4 6t
VLAN 2:
	ports: 0 6t
</code></pre>
<p>::: tip</p>
<p>å“ªä¸ªç½‘å£æ˜¯ LANï¼Œ å“ªä¸ªæ˜¯ WANï¼Œ æ˜¯ç”± VLAN åˆ’åˆ†çš„ã€‚VLAN1 ä¸º LAN å£ï¼ŒåŒ…å« 1ã€2ã€3ã€4 æ¥å£ï¼›VLAN2 ä¸º WAN å£ï¼ŒåŒ…å«äº† 0 æ¥å£ã€‚</p>
<p>:::</p>
<h3 id="é…ç½®-wan-å£å¤–ç½‘"><a class="header" href="#é…ç½®-wan-å£å¤–ç½‘">é…ç½® WAN å£å¤–ç½‘</a></h3>
<h4 id="æŸ¥çœ‹-wan-å£é…ç½®"><a class="header" href="#æŸ¥çœ‹-wan-å£é…ç½®">æŸ¥çœ‹ WAN å£é…ç½®</a></h4>
<pre><code class="language-bash">root@Widora:/# uci show network.wan
network.wan=interface
network.wan.force_link='1'
network.wan.macaddr='0c:ef:af:d2:a9:b8'
network.wan.proto='dhcp'
network.wan.ifname='eth0.2'
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>å¯é€‰å€¼</th></tr></thead><tbody>
<tr><td>ifname</td><td>è®¾å¤‡æ¥å£å</td><td>eth0.2</td></tr>
<tr><td>proto</td><td>åè®®ç±»å‹</td><td>staticï¼šé™æ€ IP åœ°å€<br />dhcpï¼šåŠ¨æ€è·å– IP åœ°å€<br />pppoeï¼šæ‹¨å·ä¸Šç½‘<br />pptpï¼šè¿œç¨‹ VPN æœåŠ¡å™¨<br />3gï¼šè¿æ¥ 3G/4G æ— çº¿ç”µè¯ç½‘ç»œ</td></tr>
<tr><td>macaddr</td><td>WAN å£ MAC åœ°å€ï¼Œä¿®æ”¹è¯¥åœ°å€å³å¯å®ç° MAC åœ°å€å…‹éš†</td><td>é¦–æ¬¡æ•°æ®æ ¹æ® factory åˆ†åŒºå†…å‚æ•°è‡ªåŠ¨ç”Ÿæˆ</td></tr>
</tbody></table>
</div>
<h4 id="åŠ¨æ€è·å–-ip-é€‰é¡¹"><a class="header" href="#åŠ¨æ€è·å–-ip-é€‰é¡¹">åŠ¨æ€è·å– IP é€‰é¡¹</a></h4>
<div class="table-wrapper"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>å¯é€‰å€¼åŠè¯´æ˜</th></tr></thead><tbody>
<tr><td>proto</td><td>åè®®ç±»å‹</td><td>dhcp</td></tr>
<tr><td>ifname</td><td>è®¾å¤‡åç§°</td><td>eth0.2</td></tr>
<tr><td>macaddr</td><td>MAC åœ°å€</td><td>æ ¹æ® factory åˆ†åŒºè‡ªåŠ¨ç”Ÿæˆçš„å€¼</td></tr>
<tr><td>mtu</td><td>æœ€å¤§æ•°æ®åŒ…å¤§å°ï¼Œé»˜è®¤ä¸ç”¨è®¾ç½®</td><td>æ•°å€¼</td></tr>
<tr><td>reqopts</td><td>åœ¨å‘ DHCP æœåŠ¡å™¨å‘å‡ºè¯·æ±‚æ—¶å¢åŠ é™„åŠ çš„ DHCP ä¿¡æ¯</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>dns</td><td>ä½¿ç”¨æŒ‡å®šçš„ DNS æœåŠ¡å™¨åœ°å€æ›¿ä»£è·å¾—çš„ DNS</td><td>å­—ç¬¦ä¸²</td></tr>
</tbody></table>
</div>
<h4 id="æŒ‡å®šé™æ€-ip-é€‰é¡¹"><a class="header" href="#æŒ‡å®šé™æ€-ip-é€‰é¡¹">æŒ‡å®šé™æ€ IP é€‰é¡¹</a></h4>
<div class="table-wrapper"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>å¯é€‰å€¼åŠè¯´æ˜</th></tr></thead><tbody>
<tr><td>proto</td><td>åè®®ç±»å‹</td><td>static</td></tr>
<tr><td>ifname</td><td>è®¾å¤‡åç§°</td><td>eth0.2</td></tr>
<tr><td>macaddr</td><td>MAC åœ°å€</td><td>æ ¹æ® factory åˆ†åŒºè‡ªåŠ¨ç”Ÿæˆçš„å€¼</td></tr>
<tr><td>mtu</td><td>æœ€å¤§æ•°æ®åŒ…å¤§å°ï¼Œé»˜è®¤ä¸ç”¨è®¾ç½®</td><td>æ•°å€¼</td></tr>
<tr><td>ipaddr</td><td>WAN å£çš„ IP åœ°å€</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>netmask</td><td>WAN å£çš„å­ç½‘æ©ç </td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>gateway</td><td>é»˜è®¤ç½‘å…³</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>broadcast</td><td>å¹¿æ’­åœ°å€</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>dns</td><td>ä½¿ç”¨æŒ‡å®šçš„ DNS æœåŠ¡å™¨åœ°å€æ›¿ä»£è·å¾—çš„ DNS</td><td>å­—ç¬¦ä¸²</td></tr>
</tbody></table>
</div>
<h4 id="pppoe-æ‹¨å·ä¸Šç½‘é€‰é¡¹"><a class="header" href="#pppoe-æ‹¨å·ä¸Šç½‘é€‰é¡¹">PPPOE æ‹¨å·ä¸Šç½‘é€‰é¡¹</a></h4>
<div class="table-wrapper"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>å¯é€‰å€¼åŠè¯´æ˜</th></tr></thead><tbody>
<tr><td>proto</td><td>åè®®ç±»å‹</td><td>pppoe</td></tr>
<tr><td>ifname</td><td>è®¾å¤‡åç§°</td><td>eth0.2</td></tr>
<tr><td>macaddr</td><td>MAC åœ°å€</td><td>æ ¹æ® factory åˆ†åŒºè‡ªåŠ¨ç”Ÿæˆçš„å€¼</td></tr>
<tr><td>mtu</td><td>æœ€å¤§æ•°æ®åŒ…å¤§å°ï¼Œé»˜è®¤ä¸ç”¨è®¾ç½®</td><td>æ•°å€¼</td></tr>
<tr><td>username</td><td>æ‹¨å·ä½¿ç”¨çš„å¸å·</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>password</td><td>æ‹¨å·ä½¿ç”¨çš„å¯†ç </td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>ac</td><td>ä½¿ç”¨æŒ‡å®šçš„è®¿é—®é›†ä¸­å™¨è¿›è¡Œè¿æ¥</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>service</td><td>è¿æ¥çš„æœåŠ¡åç§°</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>connect</td><td>è¿æ¥æ—¶å€™æ‰§è¡Œçš„å¤–éƒ¨è„šæœ¬</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>disconnect</td><td>æ–­å¼€è¿æ¥æ—¶æ‰§è¡Œçš„å¤–éƒ¨è„šæœ¬</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>demand</td><td>ç­‰å¾…å¤šä¹…æ²¡æœ‰æ´»åŠ¨å°±æ–­å¼€ PPPOE è¿æ¥</td><td>æ•°å­—ï¼Œå•ä½ç§’</td></tr>
<tr><td>dns</td><td>DNS æœåŠ¡å™¨åœ°å€</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>pppd_options</td><td>ç”¨äº pppd è¿›ç¨‹æ‰§è¡Œæ—¶å€™çš„é™„åŠ å‚æ•°</td><td>å­—ç¬¦ä¸²</td></tr>
</tbody></table>
</div>
<h3 id="é…ç½®-lan-å£æœåŠ¡"><a class="header" href="#é…ç½®-lan-å£æœåŠ¡">é…ç½® LAN å£æœåŠ¡</a></h3>
<p>::: tip</p>
<p>LAN å£ä¸‹çš„è®¾å¤‡å¯ä»¥é€šè¿‡ WAN å£æ¥å…¥ç½‘ç»œï¼Œä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®è®¾å¤‡ä¸Šçš„å„é¡¹åŠŸèƒ½ï¼ˆç³»ç»Ÿé˜²ç«å¢™å¯¹ LAN å£é»˜è®¤ä¸åšä»»ä½•æ‹¦æˆªï¼‰ã€‚</p>
<p>:::</p>
<h4 id="æŸ¥çœ‹-lan-å£é…ç½®"><a class="header" href="#æŸ¥çœ‹-lan-å£é…ç½®">æŸ¥çœ‹ LAN å£é…ç½®</a></h4>
<pre><code class="language-bash">root@Widora:~# uci show network.lan
network.lan=interface
network.lan.force_link='1'
network.lan.macaddr='0c:ef:af:d2:a9:b9'
network.lan.type='bridge'
network.lan.proto='static'
network.lan.ipaddr='192.168.8.1'
network.lan.netmask='255.255.255.0'
network.lan.ip6assign='60'
network.lan.ifname='eth0.1'
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>å¯é€‰å€¼åŠè¯´æ˜</th></tr></thead><tbody>
<tr><td>ifname</td><td>è®¾å¤‡åç§°</td><td>eth0.1</td></tr>
<tr><td>proto</td><td>åè®®ç±»å‹</td><td>static</td></tr>
<tr><td>macaddr</td><td>MAC åœ°å€</td><td>æ ¹æ® factory åˆ†åŒºè‡ªåŠ¨ç”Ÿæˆçš„å€¼</td></tr>
<tr><td>type</td><td>ç½‘ç»œç±»å‹</td><td>bridgeï¼Œæ¡¥æ¨¡å¼ï¼ˆè¿™æ ·æ‰æœ‰äº¤æ¢æœºåŠŸèƒ½ï¼‰</td></tr>
<tr><td>ipaddr</td><td>LAN å£çš„ IP åœ°å€ï¼Œç”¨äºå±€åŸŸç½‘å†…å…¶å®ƒè®¾å¤‡è®¿é—®è·¯ç”±å™¨</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>netmask</td><td>LAN å£çš„å­ç½‘æ©ç </td><td>å­—ç¬¦ä¸²</td></tr>
</tbody></table>
</div>
<p>::: warning</p>
<p>ä¿®æ”¹è¿‡ LAN å£çš„é…ç½®åè¦é‡å¯ç½‘ç»œä»¥åŠ DHCP æœåŠ¡ã€‚</p>
<pre><code class="language-bash">root@Widora:~# /etc/init.d/network restart
root@Widora:~# /etc/odhcpd restart
</code></pre>
<p>:::</p>
<h3 id="é…ç½®æ— çº¿ç½‘ç»œ"><a class="header" href="#é…ç½®æ— çº¿ç½‘ç»œ">é…ç½®æ— çº¿ç½‘ç»œ</a></h3>
<h4 id="æŸ¥çœ‹æ— çº¿ç½‘ç»œé…ç½®"><a class="header" href="#æŸ¥çœ‹æ— çº¿ç½‘ç»œé…ç½®">æŸ¥çœ‹æ— çº¿ç½‘ç»œé…ç½®</a></h4>
<pre><code class="language-bash">root@Widora:~# cat /etc/config/wireless

config wifi-device 'radio0'
	option type 'ralink'
	option variant 'mt7628'
	option country 'CN'
	option hwmode '11bgn'
	option htmode 'HT40'
	option channel 'auto'
	option disabled '0'

config wifi-iface 'ap'
	option device 'radio0'
	option mode 'ap'
	option network 'lan'
	option ifname 'ra0'
	option ssid 'Widora-A9B8'
	option hidden '0'
	option encryption 'psk2'
	option key 'passworkd'

config wifi-iface 'sta'
	option device 'radio0'
	option disabled '1'
	option mode 'sta'
	option network 'wwan'
	option ifname 'apcli0'
	option ssid 'UplinkAp'
	option key 'SecretKey'
</code></pre>
<h4 id="wifi-device-é€‰é¡¹å‚æ•°"><a class="header" href="#wifi-device-é€‰é¡¹å‚æ•°">wifi-device é€‰é¡¹å‚æ•°</a></h4>
<div class="table-wrapper"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>å¯é€‰å€¼åŠè¯´æ˜</th></tr></thead><tbody>
<tr><td>type</td><td>è®¾å¤‡ç±»å‹</td><td>ralink</td></tr>
<tr><td>channel</td><td>æ— çº¿ä¿¡é“ï¼Œä¸åŒçš„å›½å®¶æ”¯æŒçš„ä¿¡é“ä¸åŒ</td><td>auto æˆ– 1ï½13</td></tr>
<tr><td>hwmode</td><td>æ— çº¿åè®®ç±»å‹</td><td>11bgn: IEEE802.11b + IEEE802.11g + IEEE802.11n</td></tr>
<tr><td>htmode</td><td>æ— çº¿é¢‘å®½</td><td>HT20ã€HT40</td></tr>
<tr><td>disable</td><td>å…³é—­æ— çº¿è®¾å¤‡</td><td>0ï¼šå¯ç”¨ï¼›1ï¼šç¦ç”¨</td></tr>
<tr><td>country</td><td>å›½å®¶ç±»å‹ï¼Œè·Ÿæ”¯æŒçš„é¢‘é“æœ‰å…³ï¼Œä¸­å›½ä¸º CNï¼Œæ”¯æŒ 1ï½13</td><td>CNï¼šä¸­å›½</td></tr>
</tbody></table>
</div>
<h4 id="wifi-iface-é€‰é¡¹å‚æ•°"><a class="header" href="#wifi-iface-é€‰é¡¹å‚æ•°">wifi-iface é€‰é¡¹å‚æ•°</a></h4>
<div class="table-wrapper"><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th><th>å¯é€‰å€¼åŠè¯´æ˜</th></tr></thead><tbody>
<tr><td>device</td><td>å…³è”çš„æ— çº¿è®¾å¤‡</td><td>radio0</td></tr>
<tr><td>network</td><td>å…³è”ç½‘ç»œè®¾å¤‡ç±»å‹</td><td>lanï¼šè¡¨ç¤ºæ¡¥æ¥åˆ° LAN ç½‘ä¸Š<br />wwanï¼šè¡¨ç¤ºå¯ç”¨æ— çº¿ä¸­ç»§</td></tr>
<tr><td>mode</td><td>æ— çº¿å·¥ä½œæ¨¡å¼</td><td>apï¼šçƒ­ç‚¹æ¨¡å¼<br />staï¼šå®¢æˆ·ç«¯æ¨¡å¼</td></tr>
<tr><td>ssid</td><td>æ— çº¿çš„åç§°</td><td>å­—ç¬¦ä¸²</td></tr>
<tr><td>hidden</td><td>éšè—æ— çº¿åç§°</td><td>0ï¼šæ˜¾ç¤ºåç§°<br />1ï¼šéšè—åç§°</td></tr>
<tr><td>encryption</td><td>æ— çº¿åŠ å¯†æ–¹å¼</td><td>noneï¼šä¸åŠ å¯†<br />pskï¼šWPA-PSK æ¨¡å¼<br />psk2ï¼šWPA-PSK2 æ¨¡å¼<br />psk-mixedï¼šWPA-PSK / WPA-PSK2 æ··åˆæ¨¡å¼</td></tr>
<tr><td>key</td><td>æ— çº¿å¯†é’¥</td><td>å­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸º 8ï½64 ä¸ª ASCII å­—ç¬¦</td></tr>
</tbody></table>
</div>
<p>::: tip</p>
<p>ä¿®æ”¹è¿‡æ— çº¿é…ç½®åéœ€è¦ä½¿ç”¨å‘½ä»¤ <code>wifi</code> ä½¿ä¹‹ç”Ÿæ•ˆ</p>
<p>:::</p>
<h4 id="æŸ¥çœ‹æ— çº¿ç½‘ç»œçŠ¶æ€"><a class="header" href="#æŸ¥çœ‹æ— çº¿ç½‘ç»œçŠ¶æ€">æŸ¥çœ‹æ— çº¿ç½‘ç»œçŠ¶æ€</a></h4>
<pre><code class="language-bash">root@Widora:~# iwinfo
ra0       ESSID: &quot;Widora-A9B8&quot;
          Access Point: 0C:EF:AF:D2:A9:B8
          Mode: Client  Channel: 7 (2.442 GHz)
          Tx-Power: 18 dBm  Link Quality: 10/100
          Signal: -256 dBm  Noise: -82 dBm
          Bit Rate: 150.0 MBit/s
          Encryption: unknown
          Type: wext  HW Mode(s): 802.11bg
          Hardware: unknown [Generic WEXT]
          TX power offset: unknown
          Frequency offset: unknown
          Supports VAPs: no  PHY name: ra0
</code></pre>
<h4 id="æœç´¢èŒƒå›´å†…çš„å…¶å®ƒæ— çº¿è®¾å¤‡"><a class="header" href="#æœç´¢èŒƒå›´å†…çš„å…¶å®ƒæ— çº¿è®¾å¤‡">æœç´¢èŒƒå›´å†…çš„å…¶å®ƒæ— çº¿è®¾å¤‡</a></h4>
<pre><code class="language-bash">root@Widora:~# iwinfo ra0 scan
Cell 01 - Address: 50:64:2B:4B:02:4E
          ESSID: &quot;Xiaomi_024D&quot;
          Mode: Master  Channel: 11
          Signal: -256 dBm  Quality: 55/100
          Encryption: WPA2 PSK (TKIP, AES-OCB)

Cell 02 - Address: 44:97:5A:EC:C5:14
          ESSID: &quot;FAST_C514&quot;
          Mode: Master  Channel: 1
          Signal: -256 dBm  Quality: 47/100
          Encryption: WPA2 PSK (AES-OCB)
</code></pre>
<h2 id="é˜²ç«å¢™"><a class="header" href="#é˜²ç«å¢™">é˜²ç«å¢™</a></h2>
<p>é˜²ç«å¢™ã€DMZï¼ˆç‹¬ç«‹éš”ç¦»åŒºï¼‰ã€NAT è½¬å‘åœ¨ OpenWrt ç³»ç»Ÿä¸­éƒ½æ˜¯ç”± /etc/config/firewall é…ç½®æ–‡ä»¶ç®¡ç†çš„ã€‚</p>
<h3 id="é˜²ç«å¢™å‘½ä»¤"><a class="header" href="#é˜²ç«å¢™å‘½ä»¤">é˜²ç«å¢™å‘½ä»¤</a></h3>
<h4 id="é‡ç½®é˜²ç«å¢™"><a class="header" href="#é‡ç½®é˜²ç«å¢™">é‡ç½®é˜²ç«å¢™</a></h4>
<pre><code class="language-bash">root@Widora:~# /etc/init.d/firewall reload
</code></pre>
<h3 id="é‡å¯é˜²ç«å¢™"><a class="header" href="#é‡å¯é˜²ç«å¢™">é‡å¯é˜²ç«å¢™</a></h3>
<pre><code class="language-bash">root@Widora:~# /etc/init.d/firewall restart
</code></pre>
<h4 id="æŸ¥çœ‹é˜²ç«å¢™å®Œæ•´ç­–ç•¥"><a class="header" href="#æŸ¥çœ‹é˜²ç«å¢™å®Œæ•´ç­–ç•¥">æŸ¥çœ‹é˜²ç«å¢™å®Œæ•´ç­–ç•¥</a></h4>
<pre><code class="language-bash">root@Widora:~# iptables -L
</code></pre>
<h3 id="é˜²ç«å¢™-defaults-é…ç½®"><a class="header" href="#é˜²ç«å¢™-defaults-é…ç½®">é˜²ç«å¢™ defaults é…ç½®</a></h3>
<pre><code class="language-bash">config defaults
	option syn_flood	1			# å¯ç”¨é˜²æ´ªæ°´æ”»å‡»
	option input		ACCEPT		# INPUT é“¾è¿‡æ»¤ç­–ç•¥
	option output		ACCEPT		# OUTPUT é“¾è¿‡æ»¤ç­–ç•¥
	option forward		REJECT		# FORWARD é“¾è¿‡æ»¤ç­–ç•¥
</code></pre>
<h3 id="é˜²ç«å¢™-zone-åŸŸé…ç½®"><a class="header" href="#é˜²ç«å¢™-zone-åŸŸé…ç½®">é˜²ç«å¢™ zone åŸŸé…ç½®</a></h3>
<p>ç³»ç»Ÿå°† LAN å’Œ WAN åˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„ zoneï¼Œå®ƒä»¬ä¹‹é—´æ˜¯éš”ç¦»çš„ã€‚</p>
<pre><code class="language-bash">config zone
	option name			lan			# zone èŠ‚ç‚¹å
	list   network		'lan'		# æŒ‡å®šç»‘å®šåˆ°è¯¥ zone ä¸Šçš„è®¾å¤‡
	option input		ACCEPT
	option output		ACCEPT
	option forward		ACCEPT

config zone
	option name			wan
	list   network		'wan'
	list   network		'wan6'
	list   network		'wwan'
	option input		ACCEPT
	option output		ACCEPT
	option forward		REJECT
	option masq			1			# ä¼ è¾“ä¼ªè£…å¼€å…³ï¼ŒWAN å¿…é¡»è®¾ä¸º 1
	option mtu_fix		1			# æ•°æ®è¾“å‡ºæ—¶å¼€å¯ MSS é’³åˆ¶ï¼ŒWAN å¿…é¡»è®¾ä¸º 1
</code></pre>
<h3 id="é˜²ç«å¢™-forwarding-è½¬å‘é…ç½®"><a class="header" href="#é˜²ç«å¢™-forwarding-è½¬å‘é…ç½®">é˜²ç«å¢™ forwarding è½¬å‘é…ç½®</a></h3>
<p>forwarding é…ç½®å¯ä»¥å®ç°ä¸¤ä¸ªä¸åŒ zone åŸŸä¹‹é—´çš„æ•°æ®å‘é€</p>
<pre><code class="language-bash">config forwarding
	option src		lan			# æ¥æº zone
	option dest		wan			# ç›®æ ‡ zone
</code></pre>
<h3 id="é˜²ç«å¢™-rule-è§„åˆ™"><a class="header" href="#é˜²ç«å¢™-rule-è§„åˆ™">é˜²ç«å¢™ rule è§„åˆ™</a></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è¿›å…¥ WAN å£çš„è¯·æ±‚éƒ½ä¼šè¢«æ‹’ç»ï¼Œå¦‚æœå¸Œæœ›æœ‰ä¾‹å¤–ï¼Œé‚£ä¹ˆè¦é€šè¿‡ rule æ¥å®ç°è®¸å¯ã€‚</p>
<pre><code class="language-bash"># Allow IPv4 ping
config rule
	option name			Allow-Ping
	option src			wan					# æ•°æ®æºçš„ zone åŸŸ
	option proto		icmp				# æ•°æ®æºçš„åè®®ç±»å‹
	option icmp_type	echo-request
	option family		ipv4				# IP åè®®ç±»å‹
	option target		ACCEPT				# è§„åˆ™åŠ¨ä½œ

# ç¦æ­¢ LAN å£çš„æŸä¸ª IP è®¿é—® WAN å£
config rule
	option src		lan						# æ•°æ®æºçš„ zone åŸŸ
	option src_ip	192.168.45.2			# æ•°æ®æºçš„ IP åœ°å€
	option dest		wan						# ç›®çš„åœ°çš„ zone åŸŸ
	option proto	tcp
	option target	REJECT

# ç¦æ­¢æŸä¸ª MAC åœ°å€è®¿é—® WAN
config rule
	option dest		wan
	option src_mac	00:11:22:33:44:66		# æ•°æ®æºçš„ MAC åœ°å€
	option target	REJECT

# é˜»å¡æŸä¸ª zone ä¸Šçš„ ICMP æµé‡
config rule
	option src		lan
	option proto	ICMP
	option target	DROP
</code></pre>
<h3 id="é˜²ç«å¢™-redirect-ç«¯å£è½¬å‘"><a class="header" href="#é˜²ç«å¢™-redirect-ç«¯å£è½¬å‘">é˜²ç«å¢™ redirect ç«¯å£è½¬å‘</a></h3>
<p>ç«¯å£è½¬å‘å…è®¸è®¿é—®è€…é€šè¿‡ WAN å£è®¿é—® LAN å£ä¸­çš„ä¸€ä¸ªç‰¹å®šç«¯å£ï¼Œå¹¶å°†ç»“æœè½¬å‘å›ç»™è®¿é—®è€…ã€‚</p>
<pre><code class="language-bash"># å°† LAN å£çš„ 80 ç«¯å£å¼€æ”¾åˆ° WAN å£ä¸Š
config redirect
	option src			wan				# è¢«è½¬å‘æ¥æº zone åŸŸ
	option src_dport	80				# è¢«è½¬å‘çš„ç«¯å£
	option dest			lan				# è½¬å‘åˆ°å“ªä¸ª zone åŸŸ
	option dest_ip		192.168.16.235 	# è½¬å‘åˆ°å“ªä¸ª IP åœ°å€
	option dest_port	80				# è½¬å‘åˆ°å“ªä¸ªç«¯å£
	option proto		tcp				# åè®®ç±»å‹

# å°†æ‰€æœ‰æ¥è‡ª WAN å£çš„ TCP åè®®è®¿é—® 22001 çš„è¯·æ±‚éƒ½è½¬å‘ç»™ LAN ä¸­çš„ä¸€å° 80 ç«¯å£çš„è®¡ç®—æœº
config redirect
	option src			wan
	option src_dport	22001
	option dest			lan
	option dest_port	22
	option proto		tcp

# å°† IP åœ°å€ 192.168.1.2 è®¾ç½®åˆ° DMZ éš”ç¦»åŒº
config redirect
	option src			wan
	option proto		all
	option dest_ip		192.168.1.2
</code></pre>
<h2 id="ntp"><a class="header" href="#ntp">NTP</a></h2>
<p>NTP ç”¨æ¥ä½¿ç½‘ç»œä¸­çš„å„ä¸ªè®¡ç®—æœºæ—¶é—´åŒæ­¥çš„ä¸€ç§åè®®ï¼Œå®ƒçš„ç”¨é€”æ˜¯æŠŠç³»ç»Ÿçš„æ—¶é’ŸåŒæ­¥åˆ° UTC æ—¶åŒºï¼Œå…¶ç²¾åº¦åœ¨å±€åŸŸç½‘å†…å¯è¾¾åˆ° 0.1msï¼Œåœ¨äº’è”ç½‘ä¸Šç»å¤§å¤šæ•°æƒ…å†µå…¶ç²¾åº¦å¯ä»¥è¾¾åˆ°1ï½50msã€‚</p>
<p>é…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-bash">root@Widora:~# cat /etc/config/system
config system
	option hostname	Widora				# ä¸»æœºå
	option timezone	CST-8				# æ—¶åŒº

config timeserver ntp
	list server	0.openwrt.pool.ntp.org	# NTP æœåŠ¡å™¨åœ°å€
	list server	1.openwrt.pool.ntp.org
	list server	2.openwrt.pool.ntp.org
	list server	3.openwrt.pool.ntp.org
	option enabled 1					# å¼€å¯ NTP åŠŸèƒ½
	option enable_server 0
</code></pre>
<p>::: tip</p>
<p>é˜¿é‡Œäº‘æä¾›äº† NTP æœåŠ¡åŠŸèƒ½ï¼š</p>
<p>ntp1.aliyun.com</p>
<p>ntp2.aliyun.com</p>
<p>ntp3.aliyun.com</p>
<p>:::</p>
<h2 id="æœåŠ¡ç®¡ç†"><a class="header" href="#æœåŠ¡ç®¡ç†">æœåŠ¡ç®¡ç†</a></h2>
<h3 id="æŸ¥çœ‹ç³»ç»ŸæœåŠ¡å‘½ä»¤"><a class="header" href="#æŸ¥çœ‹ç³»ç»ŸæœåŠ¡å‘½ä»¤">æŸ¥çœ‹ç³»ç»ŸæœåŠ¡å‘½ä»¤</a></h3>
<pre><code class="language-bash">root@Widora:~# ls /etc/init.d/
avahi-daemon   dbus           dropbear       led            mountd         rpcd           sysctl         system         umount
boot           dnsmasq        firewall       log            network        setnetmode     sysfixtime     telnet
cron           done           fstab          mjpg-streamer  odhcpd         shairport      sysntpd        uhttpd
</code></pre>
<h3 id="æœåŠ¡å‘½ä»¤çš„è¯­æ³•æ ¼å¼"><a class="header" href="#æœåŠ¡å‘½ä»¤çš„è¯­æ³•æ ¼å¼">æœåŠ¡å‘½ä»¤çš„è¯­æ³•æ ¼å¼</a></h3>
<pre><code>æœåŠ¡çš„è¯­æ³•æ ¼å¼ï¼š/etc/init.d/æœåŠ¡åç§° [å‘½ä»¤]
å¯ç”¨å‘½ä»¤ï¼š
		start	ä¸´æ—¶å¼€å¯è¿™ä¸ªæœåŠ¡
		stop	ä¸´æ—¶å…³é—­è¿™ä¸ªæœåŠ¡
		restart é‡å¯å½“å‰å·²å¼€å¯çš„æœåŠ¡ï¼Œå¦‚æœæ²¡æœ‰å¼€å¯å°±å¼€å¯å®ƒ
		reload 	é‡æ–°è¯»å–è¯¥æœåŠ¡çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚æœæœåŠ¡æ”¯æŒçš„è¯ï¼‰
		enable	è®¾ç½®è¯¥æœåŠ¡éšç³»ç»Ÿä¸€åŒå¯åŠ¨
		disable	ç¦æ­¢è¯¥æœåŠ¡éšç³»ç»Ÿä¸€åŒå¯åŠ¨
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æ§åˆ¶ç³»ç»ŸåŸºç¡€"><a class="header" href="#æ§åˆ¶ç³»ç»ŸåŸºç¡€">æ§åˆ¶ç³»ç»ŸåŸºç¡€</a></h1>
<h2 id="æ§åˆ¶ç³»ç»Ÿå»ºæ¨¡"><a class="header" href="#æ§åˆ¶ç³»ç»Ÿå»ºæ¨¡">æ§åˆ¶ç³»ç»Ÿå»ºæ¨¡</a></h2>
<p>å¯¹äºä¸€ä¸ªè¾“å…¥ä¸º \(u\)ï¼Œè¾“å‡ºä¸º \(y\) çš„åŠ¨æ€ç³»ç»Ÿï¼Œå½“ \(t\) æ—¶åˆ»çš„è¾“å‡º \(y(t)\) ç”±ç›´åˆ° \(t\) æ—¶åˆ»ä¸ºæ­¢çš„è¾“å…¥å’Œè¾“å‡ºæ¥å†³å®šçš„æ—¶å€™ï¼Œè¿™ä¸ªç³»ç»Ÿå¯ä»¥ç”¨ä¸‹é¢çš„å¾®åˆ†æ–¹ç¨‹æ¥è¡¨ç¤ºï¼š</p>
<p>$$
\frac{d^n}{dt^n}y(t) + a_{n-1}\frac{d^{n-1}}{dt^{n-1}}y(t) + \cdots + a_1\frac{d}{dt}y(t) + a_0y(t) \\
= b_m\frac{d^m}{dt^m}u(t) + b_{m-1}\frac{d^{m-1}}{dt^{m-1}}u(t) + \cdots + b_1\frac{d}{dt}u(t) + b_0u(t)
$$</p>
<p>å¾®åˆ†æ–¹ç¨‹å¾ˆéš¾æ±‚è§£ä»¥åŠåˆ†æç³»ç»Ÿè¡Œä¸ºï¼Œæ‰€ä»¥é€šå¸¸ä¼šå°†å¾®åˆ†æ–¹ç¨‹è½¬æ¢æˆ<strong>ä¼ é€’å‡½æ•°æ¨¡å‹</strong>æˆ–è€…<strong>çŠ¶æ€ç©ºé—´æ¨¡å‹</strong>ã€‚</p>
<h3 id="ä¼ é€’å‡½æ•°"><a class="header" href="#ä¼ é€’å‡½æ•°">ä¼ é€’å‡½æ•°</a></h3>
<p>ä¼ é€’å‡½æ•°æ¨¡å‹ä½¿ç”¨å¤å˜å‡½æ•°æ¥è¡¨ç°ç³»ç»Ÿæ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡å°†å¾®åˆ†æ–¹ç¨‹ä¸¤è¾¹è¿›è¡Œåˆå§‹å€¼ä¸º0çš„æ‹‰æ™®æ‹‰æ–¯å˜æ¢å¾—åˆ°ã€‚</p>
<p>æ‹‰æ™®æ‹‰æ–¯å˜æ¢çš„å®šä¹‰ï¼š\(g(s) = \mathcal{L}[g(t)] = \int_0^{\infty}g(\tau)e^{-s\tau}d\tau\)</p>
<hr />
<p>å¾®åˆ†çš„æ‹‰æ™®æ‹‰æ–¯å˜æ¢</p>
<p>$$
\begin{align}
\mathcal{L}[\dot y(t)] &amp;= \int_0^{\infty}\dot y(\tau)e^{-s\tau}d\tau \\
&amp;= [y(\tau)e^{-s\tau}]_0^{\infty} - \int_0^{\infty}-sy(\tau)e^{-s\tau}d\tau \\
&amp;= [y(\tau)e^{-s\tau}]_0^{\infty} + s\int_0^{\infty}y(\tau)e^{-s\tau}d\tau \\
&amp;= y(\infty) -y(0) + s\mathcal{L}[y(t)] \\
&amp;= sy(s) - y(0)
\end{align}
$$</p>
<p>ä»¤ \(y(0) = 0\)ï¼Œåˆ™å¾—åˆ° \(\mathcal{L}[\dot y(t)] = sy(s)\)</p>
<hr />
<p>ç§¯åˆ†çš„æ‹‰æ™®æ‹‰æ–¯å˜æ¢</p>
<p>ä»¤ \(f(t) = \int_0^ty(\tau)d\tau\), åˆ™ \(\dot f(t) = y(t)\)</p>
<p>$$
\begin{align}
\mathcal{L}[\dot f(t)] &amp;= sf(s) - f(0) \\
&amp;= sf(s) - \int_0^0y(\tau)d\tau \\
&amp;= sf(s)
\end{align}
$$</p>
<p>$$
\mathcal{L}[\int_0^ty(\tau)d\tau] = \mathcal{L}[f(t)] = f(s) = \frac{1}{s}\mathcal{L}[\dot f(t)] = \frac{1}{s}\mathcal{L}[y(t)] = \frac{1}{s}y(s)
$$</p>
<h3 id="çŠ¶æ€ç©ºé—´"><a class="header" href="#çŠ¶æ€ç©ºé—´">çŠ¶æ€ç©ºé—´</a></h3>
<p>çŠ¶æ€ç©ºé—´æ¨¡å‹é€šè¿‡çŸ©é˜µçš„å½¢å¼å°†å¤šå…ƒé«˜é˜¶å¾®åˆ†æ–¹ç¨‹è¡¨ç¤ºæˆä¸€é˜¶å¾®åˆ†æ–¹ç¨‹çš„å½¢å¼ã€‚ä¼ é€’å‡½æ•°æ¨¡å‹è¡¨è¾¾çš„æ˜¯è¾“å…¥å’Œè¾“å‡ºçš„å…³ç³»ï¼Œè€ŒçŠ¶æ€ç©ºé—´æ¨¡å‹è¡¨è¾¾çš„æ˜¯è¾“å…¥-&gt;çŠ¶æ€-&gt;è¾“å‡ºçš„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°é€‰æ‹©çŠ¶æ€å˜é‡ã€‚æ­¤å¤–ï¼ŒçŠ¶æ€ç©ºé—´æ¨¡å‹ä¹Ÿå¯ä»¥å¤„ç†åˆå§‹å€¼ä¸ä¸º0çš„æƒ…å†µã€‚</p>
<p>$$
\mathcal{P}:
\begin{cases}
\mathbf{\dot x}(t) &amp;= \mathbf{A} \mathbf{x}(t) + \mathbf{B} \mathbf{u}(t) \\
\mathbf{y}(t)      &amp;= \mathbf{C} \mathbf{x}(t) + \mathbf{D} \mathbf{u}(t)
\end{cases}
$$</p>
<p>è¿™é‡Œçš„\(\mathbf{x}\)ä¸ºçŠ¶æ€ï¼Œ\(\mathbf{u}\)ä¸ºè¾“å…¥ï¼Œ\(\mathbf{y}\)ä¸ºè¾“å‡ºï¼Œ\(\mathbf{A}\), \(\mathbf{B}\), \(\mathbf{C}\), \(\mathbf{D}\)ä¸ºå¸¸æ•°çŸ©é˜µã€‚</p>
<h3 id="rlc-ç”µè·¯"><a class="header" href="#rlc-ç”µè·¯">RLC ç”µè·¯</a></h3>
<p><img src="ee/../images/control/RLC.jpg" alt="RLCç”µè·¯" /></p>
<p>æ ¹æ®æ¬§å§†å®šå¾‹ï¼Œ
$$
v_{in}(t) = L\frac{d}{dt}i(t) + Ri(t) + \frac{1}{C}\int_{0}^{t}i(\tau) d\tau
$$</p>
<p>è®¾å®šè¾“å‡ºä¸º \(y(t) = v_{out}(t) = \frac{1}{C}\int_{0}^{t}i(\tau) d\tau\), åˆ™ \(C\dot y(t) = i(t)\)</p>
<p>è®¾å®šè¾“å…¥ä¸º \(u(t) = v_{in}(t)\)</p>
<p>å¯ä»¥å¾—åˆ°
$$
LC\ddot y(t) + RC\dot y(t) + y(t) = u(t)
$$</p>
<h4 id="ä¼ é€’å‡½æ•°æ¨¡å‹"><a class="header" href="#ä¼ é€’å‡½æ•°æ¨¡å‹">ä¼ é€’å‡½æ•°æ¨¡å‹</a></h4>
<p>å¯¹å¾®åˆ†æ–¹ç¨‹ä¸¤è¾¹åšæ‹‰æ™®æ‹‰æ–¯å˜æ¢ï¼Œå¾—åˆ°
$$
LCs^2y(s) + RCsy(s) + y(s) = u(s)
$$</p>
<p>äºæ˜¯ä¼ é€’å‡½æ•°æ¨¡å‹ç­‰äº
$$
\mathcal{P} = \frac{y(s)}{u(s)} = \frac{1}{LCs^2 + RCs + 1}
$$</p>
<h4 id="çŠ¶æ€ç©ºé—´æ¨¡å‹"><a class="header" href="#çŠ¶æ€ç©ºé—´æ¨¡å‹">çŠ¶æ€ç©ºé—´æ¨¡å‹</a></h4>
<p>è®¾ \(\mathbf{x}(t) = \left[ \begin{matrix}
\int_0^t i(\tau)d\tau \\
i(t) \\
\end{matrix} \right] \)ï¼Œ \(u(t) = v_{in}\)ï¼Œ\(y(t) = \frac{1}{C}\int_0^t i(\tau)d\tau\)</p>
<p>åˆ™çŠ¶æ€æ–¹ç¨‹ä¸º
$$
\mathbf{\dot x}(t) = \left[ \begin{matrix}
0&amp; 1 \\
-\frac{1}{LC}&amp; -\frac{R}{L} \\
\end{matrix}\right] \mathbf{x}(t) + \left[ \begin{matrix}
0 \\
\frac{1}{L} \\
\end{matrix} \right] u(t)
$$</p>
<p>è€Œè¾“å‡ºæ–¹ç¨‹ä¸º
$$
y(t) = \left[ \begin{matrix}
\frac{1}{C} \quad 0
\end{matrix}\right] \mathbf{x}(t)
$$</p>
<h3 id="è¿æ”¾ç”µè·¯"><a class="header" href="#è¿æ”¾ç”µè·¯">è¿æ”¾ç”µè·¯</a></h3>
<p><img src="ee/../images/control/Opamp.jpg" alt="è¿æ”¾ç”µè·¯" /></p>
<p>æ ¹æ®è¿æ”¾çš„&quot;è™šçŸ­&quot;ç‰¹æ€§ï¼Œå¯ä»¥å¾—åˆ° \(i_1(t) = \frac{v_{in}(t)}{R_1}\), \(i_2(t) = \frac{v_{out}(t)}{R_2}\)</p>
<p>ä»¥åŠ \(v_{out}(t) = \frac{1}{C}\int_{0}^{\tau}i_3(\tau) d\tau\)ï¼Œ å³ \(i_3(t) = C\dot v_{out}\)</p>
<p>æ ¹æ®è¿æ”¾çš„&quot;è™šæ–­&quot;ç‰¹æ€§ï¼Œ\(i_1(t) + i_2(t) + i_3(t) = 0\)</p>
<p>ä»£å…¥æ–¹ç¨‹å¾—åˆ°
$$
\frac{v_{in}(t)}{R_1} + \frac{v_{out}(t)}{R_2} + C\dot v_{out}(t) = 0
$$</p>
<p>è®¾å®šè¾“å‡º \(y(t)=v_{out}(t)\), è®¾å®šè¾“å…¥ \(u(t)=v_{in}(t)\)</p>
<p>å› æ­¤å¯ä»¥å¾—åˆ°
$$R_1R_2C\dot y(t) + R_1y(t) = -R_2u(t)$$</p>
<h4 id="ä¼ é€’å‡½æ•°æ¨¡å‹-1"><a class="header" href="#ä¼ é€’å‡½æ•°æ¨¡å‹-1">ä¼ é€’å‡½æ•°æ¨¡å‹</a></h4>
<p>å¯¹å¾®åˆ†æ–¹ç¨‹ä¸¤è¾¹åšæ‹‰æ™®æ‹‰æ–¯å˜æ¢ï¼Œå¾—åˆ° \(R_1R_2Csy(s) + R_1y(s) = -R_2u(s)\), äºæ˜¯ä¼ é€’å‡½æ•°æ¨¡å‹ç­‰äº
$$
\mathcal{P} = \frac{y(s)}{u(s)} = \frac{-R_2}{R_1R_2Cs + R_1}
$$</p>
<h4 id="çŠ¶æ€ç©ºé—´æ¨¡å‹-1"><a class="header" href="#çŠ¶æ€ç©ºé—´æ¨¡å‹-1">çŠ¶æ€ç©ºé—´æ¨¡å‹</a></h4>
<p>è®¾ \(x(t) = v_{out}(t), u(t)=v_{in}(t),y(t)=v_{out}(t)\)ï¼Œåˆ™å¯å¾—åˆ°çŠ¶æ€æ–¹ç¨‹
$$
\dot x(t) = -\frac{1}{CR_2}x(t) - \frac{1}{CR_1}u(t)
$$
è¾“å‡ºæ–¹ç¨‹ä¸º
$$
y(t)=x(t)
$$</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="è§†é¢‘å¤„ç†"><a class="header" href="#è§†é¢‘å¤„ç†">è§†é¢‘å¤„ç†</a></h1>
<p><img src="cs/../images/video-process/video-process-flow.jpg" alt="è§†é¢‘å¤„ç†å·¥ä½œæµç¨‹" /></p>
<h2 id="å›¾åƒçš„åŸºæœ¬æ¦‚å¿µ"><a class="header" href="#å›¾åƒçš„åŸºæœ¬æ¦‚å¿µ">å›¾åƒçš„åŸºæœ¬æ¦‚å¿µ</a></h2>
<h3 id="åƒç´ "><a class="header" href="#åƒç´ ">åƒç´ </a></h3>
<p>åƒç´ æ˜¯å›¾åƒçš„åŸºæœ¬å•å…ƒï¼Œä¸€ä¸ªä¸ªåƒç´ å°±ç»„æˆäº†å›¾åƒã€‚å¯ä»¥è®¤ä¸ºåƒç´ å°±æ˜¯å›¾åƒä¸­çš„ä¸€ä¸ªç‚¹ã€‚</p>
<h3 id="åˆ†è¾¨ç‡"><a class="header" href="#åˆ†è¾¨ç‡">åˆ†è¾¨ç‡</a></h3>
<p>å›¾åƒï¼ˆæˆ–è§†é¢‘ï¼‰çš„åˆ†è¾¨ç‡æ˜¯æŒ‡å›¾åƒçš„å¤§å°æˆ–å°ºå¯¸ã€‚è§†é¢‘è¡Œä¸šå¸¸è§çš„åˆ†è¾¨ç‡æœ‰ï¼š</p>
<div class="table-wrapper"><table><thead><tr><th>åˆ†è¾¨ç‡</th><th>å®½åº¦</th><th>é«˜åº¦</th></tr></thead><tbody>
<tr><td>QCIF</td><td>176</td><td>144</td></tr>
<tr><td>CIF</td><td>352</td><td>288</td></tr>
<tr><td>D1</td><td>720</td><td>576</td></tr>
<tr><td>360P</td><td>640</td><td>360</td></tr>
<tr><td>720P</td><td>1280</td><td>720</td></tr>
<tr><td>1080P</td><td>1920</td><td>1080</td></tr>
<tr><td>4K</td><td>3840</td><td>2160</td></tr>
<tr><td>8K</td><td>7680</td><td>4320</td></tr>
</tbody></table>
</div>
<p><strong>ä¸èƒ½ç®€å•åœ°è®¤ä¸ºåˆ†è¾¨ç‡æ•°å€¼è¶Šé«˜çš„å›¾åƒå°±è¶Šæ¸…æ™°ã€‚</strong></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usb-åŸºç¡€"><a class="header" href="#usb-åŸºç¡€">USB åŸºç¡€</a></h1>
<h2 id="usb-åŸºæœ¬æ¦‚å¿µ"><a class="header" href="#usb-åŸºæœ¬æ¦‚å¿µ">USB åŸºæœ¬æ¦‚å¿µ</a></h2>
<h3 id="usb-åè®®æ ‡å‡†"><a class="header" href="#usb-åè®®æ ‡å‡†">USB åè®®æ ‡å‡†</a></h3>
<div class="table-wrapper"><table><thead><tr><th>USB åè®®æ ‡å‡†</th><th>ä¸»è¦ç‰¹ç‚¹</th><th>é€Ÿåº¦ç­‰çº§</th></tr></thead><tbody>
<tr><td>USB 2.0 Full Speed<br />ï¼ˆæ—§ç§° USB 1.1ï¼‰</td><td>è§„èŒƒäº† USB ä½å…¨é€Ÿä¼ è¾“</td><td>1.5 Mbps~12 Mbps</td></tr>
<tr><td>USB 2.0 High Speed<br />ï¼ˆæ—§ç§° USB 2.0ï¼‰</td><td>è§„èŒƒäº† USB é«˜é€Ÿä¼ è¾“</td><td>480 Mbps</td></tr>
<tr><td>USB 3.2 gen1<br />ï¼ˆæ—§ç§° USB 3.0ï¼‰</td><td>é‡‡ç”¨ 8b/10b ç¼–ç ï¼Œå¢åŠ ä¸€å¯¹è¶…é«˜é€Ÿå·®åˆ†çº¿ï¼Œä¾›ç”µ 5V/0.9A</td><td>5 Gbps</td></tr>
<tr><td>USB 3.2 gen2<br />ï¼ˆæ—§ç§° USB 3.1ï¼‰</td><td>é‡‡ç”¨ 128b/132b ç¼–ç ï¼Œé€Ÿåº¦æé«˜ 1 å€ï¼Œä¾›ç”µ 20V/5Aï¼ŒåŒæ—¶å¢åŠ äº† A/V å½±éŸ³ä¼ è¾“æ ‡å‡†</td><td>10 Gbps</td></tr>
<tr><td>USB 3.2 gen2*2<br />ï¼ˆæ—§ç§° USB 3.2ï¼‰</td><td>å¢åŠ ä¸€å¯¹è¶…é«˜é€Ÿä¼ è¾“é€šé“ï¼Œé€Ÿåº¦å†æ¬¡ç¿»å€ï¼Œåªèƒ½åœ¨ C å‹æ¥å£ä¸Šè¿è¡Œ</td><td>20 Gbps</td></tr>
</tbody></table>
</div>
<h3 id="é€šè®¯æ¥å£"><a class="header" href="#é€šè®¯æ¥å£">é€šè®¯æ¥å£</a></h3>
<p><img src="ee/../images/usb/USB_slot_interface.png" alt="USB é€šè®¯æ¥å£" /></p>
<h3 id="ç¼–ç æ–¹å¼"><a class="header" href="#ç¼–ç æ–¹å¼">ç¼–ç æ–¹å¼</a></h3>
<p><img src="ee/../images/usb/USB_encoding.png" alt="USB ç¼–ç æ–¹å¼" /></p>
<p>è¿™ç§ç¼–ç æ–¹å¼ä¹Ÿç§°ä¸º<strong>åå‘ä¸å½’é›¶ç¼–ç ï¼ˆNRZIï¼‰</strong></p>
<p><strong>ä½å¡«å……</strong>ï¼šåœ¨æ•°æ®è¿›è¡Œ NRZI ç¼–ç å‰ï¼Œæ¯ 6 ä¸ªè¿ç»­çš„ <strong>1</strong> ä¿¡å·ä¹‹åéƒ½ä¼šæ’å…¥ 1 ä¸ª <strong>0</strong> ä¿¡å·ï¼Œä»¥é¿å…é•¿æ—¶é—´ç”µå¹³ä¿æŒä¸å˜å¸¦æ¥çš„åŒæ­¥æ¼‚ç§»ã€‚</p>
<h3 id="ä¿¡å·ä¼ è¾“çŠ¶æ€"><a class="header" href="#ä¿¡å·ä¼ è¾“çŠ¶æ€">ä¿¡å·ä¼ è¾“çŠ¶æ€</a></h3>
<p><img src="ee/../images/usb/USB_signal_state.png" alt="USB ä¿¡å·ä¼ è¾“çŠ¶æ€" /></p>
<h3 id="å¸§"><a class="header" href="#å¸§">å¸§</a></h3>
<p>å¸§æ˜¯ä¸€ä¸ªæ—¶é—´å•ä½ï¼Œå›ºå®šä¸º<strong>1ms</strong>ï¼ˆä½/å…¨é€Ÿï¼‰ï¼Œé«˜é€Ÿ-å¾®å¸§ä¸º <strong>125us</strong></p>
<h3 id="é€šè®¯è¿‡ç¨‹åˆ’åˆ†"><a class="header" href="#é€šè®¯è¿‡ç¨‹åˆ’åˆ†">é€šè®¯è¿‡ç¨‹åˆ’åˆ†</a></h3>
<p><img src="ee/../images/usb/USB_field_package_transaction_transfer.png" alt="USB é€šè®¯è¿‡ç¨‹åˆ’åˆ†" /></p>
<p><strong>äº‹åŠ¡</strong>æ˜¯æœ€åŸºæœ¬çš„ä¼ è¾“å•ä½ã€‚</p>
<h3 id="å››ç§ä¼ è¾“"><a class="header" href="#å››ç§ä¼ è¾“">å››ç§ä¼ è¾“</a></h3>
<p>::: tip æ§åˆ¶ä¼ è¾“
ä¸»æœºè·å–è®¾å¤‡ä¿¡æ¯ã€çŠ¶æ€ï¼Œé€‰æ‹©è®¾å¤‡é…ç½®ç­‰ä¸€ç³»åˆ—å‘½ä»¤å¼å·¥ä½œã€‚
:::</p>
<p>::: tip ä¸­æ–­ä¼ è¾“</p>
<p>æ”¶å‘æ•°æ®é‡å°‘ã€å‘¨æœŸæ€§ä¼ è¾“ã€‚</p>
<p>:::</p>
<p>::: tip æ‰¹é‡ä¼ è¾“</p>
<p>åˆ©ç”¨ä»»ä½•å¯è·å¾—çš„æ€»çº¿å¸¦å®½è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚</p>
<p>:::</p>
<p>::: tip ç­‰æ—¶ä¼ è¾“</p>
<p>æ’å®šé€Ÿç‡ã€æ²¡æœ‰å·®é”™æ§åˆ¶çš„ä¼ è¾“ã€‚</p>
<p>:::</p>
<h3 id="å…¶ä»–æœ¯è¯­"><a class="header" href="#å…¶ä»–æœ¯è¯­">å…¶ä»–æœ¯è¯­</a></h3>
<h4 id="ä¸Šä¼ ä¸‹ä¼ "><a class="header" href="#ä¸Šä¼ ä¸‹ä¼ ">ä¸Šä¼ /ä¸‹ä¼ </a></h4>
<p>USB ä¸»æœºæ¥æ”¶ USB è®¾å¤‡çš„æ•°æ®ç§°ä¸ºä¸Šä¼ ï¼ŒUSB ä¸»æœºå‘é€æ•°æ®ç»™ USB è®¾å¤‡ç§°ä¸ºä¸‹ä¼ ã€‚</p>
<h4 id="åœ°å€"><a class="header" href="#åœ°å€">åœ°å€</a></h4>
<p>ä¸»æœºç®¡ç†è®¾å¤‡ï¼Œè€Œä¸ºæ¯ä¸€ä¸ªè¿æ¥çš„è®¾å¤‡åˆ†é…ä¸€ä¸ªåœ°å€ï¼Œä¸»æœºæœ€å¤šå¯ä»¥åˆ†é… 127 ä¸ªåœ°å€ã€‚</p>
<h4 id="ç«¯ç‚¹"><a class="header" href="#ç«¯ç‚¹">ç«¯ç‚¹</a></h4>
<p>USB è®¾å¤‡ä¸­å®é™…çš„ç‰©ç†å•å…ƒï¼Œç«¯ç‚¹å’Œåœ°å€å†³å®šäº†ä¸»æœºå’Œè®¾å¤‡ä¹‹é—´é€šè®¯çš„ç‰©ç†é€šé“ã€‚</p>
<h4 id="usb-ä¼ è¾“ç‰¹ç‚¹"><a class="header" href="#usb-ä¼ è¾“ç‰¹ç‚¹">USB ä¼ è¾“ç‰¹ç‚¹</a></h4>
<p>ç‰©ç†ä¼ è¾“åŒæ–¹è§’è‰²ä¸€å®šæ˜¯ä¸»æœºå’Œè®¾å¤‡ï¼Œä¸€é—®ä¸€ç­”ä¼ è¾“æ–¹å¼ï¼Œæ°¸è¿œæ˜¯ä¸»æœºå…ˆå‘èµ·åŒ…è¯·æ±‚ã€‚</p>
<h2 id="ä¸»è®¾å¤‡å’Œä»è®¾å¤‡"><a class="header" href="#ä¸»è®¾å¤‡å’Œä»è®¾å¤‡">ä¸»è®¾å¤‡å’Œä»è®¾å¤‡</a></h2>
<h3 id="ä¸»è®¾å¤‡"><a class="header" href="#ä¸»è®¾å¤‡">ä¸»è®¾å¤‡</a></h3>
<ul>
<li>æ£€æµ‹ USB è®¾å¤‡çš„æ’æ‹”åŠ¨ä½œ</li>
<li>ç®¡ç†ä¸»ä»é€šè®¯ä¹‹é—´çš„æ§åˆ¶æµ</li>
<li>ç®¡ç†ä¸»ä»é€šè®¯ä¹‹é—´çš„æ•°æ®æµ</li>
<li>è®°å½•ä¸»æœºçŠ¶æ€å’Œè®¾å¤‡åŠ¨ä½œä¿¡æ¯</li>
<li>æ§åˆ¶ä¸»æ§åˆ¶å™¨å’Œ USB è®¾å¤‡é—´çš„ç”µæ°”æ¥å£</li>
</ul>
<h3 id="é›†çº¿å™¨"><a class="header" href="#é›†çº¿å™¨">é›†çº¿å™¨</a></h3>
<ul>
<li>æ‰©å±• USB ä¸»æœºå’Œ USB ç«¯å£</li>
<li>ç»“æ„ä¸Šæœ‰ä¸€ä¸ªä¸Šè¡Œç«¯å£ï¼Œå¤šä¸ªä¸‹è¡Œç«¯å£</li>
<li>æ”¯æŒçº§è”ï¼Œç³»ç»Ÿä¸­æœ€å¤š 5 ä¸ªé›†çº¿å™¨ï¼ˆä¸åŒ…æ‹¬ä¸»æœºçš„æ ¹é›†çº¿å™¨ï¼‰</li>
<li>æ”¯æŒé€Ÿåº¦åˆ‡æ¢</li>
</ul>
<h3 id="åŠŸèƒ½è®¾å¤‡"><a class="header" href="#åŠŸèƒ½è®¾å¤‡">åŠŸèƒ½è®¾å¤‡</a></h3>
<ul>
<li>ä¸€ä¸ªç‹¬ç«‹çš„å¤–å›´è®¾å¤‡ï¼Œå¯ä»¥æ˜¯å•ä¸€åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šåŠŸèƒ½çš„åˆæˆè®¾å¤‡</li>
<li>å†…éƒ¨åŒ…å«æœ‰æè¿°è‡ªèº«åŠŸèƒ½å’Œèµ„æºéœ€æ±‚çš„é…ç½®ä¿¡æ¯</li>
</ul>
<p><img src="ee/../images/usb/USB_device_structure.png" alt="USB è®¾å¤‡ç»“æ„å›¾" /></p>
<h2 id="usb-ç³»ç»Ÿåˆ†å±‚"><a class="header" href="#usb-ç³»ç»Ÿåˆ†å±‚">USB ç³»ç»Ÿåˆ†å±‚</a></h2>
<p><img src="ee/../images/usb/USB_system_tier.png" alt="USB ç³»ç»Ÿåˆ†å±‚" /></p>
<h2 id="è¿æ¥ä¸æ£€æµ‹"><a class="header" href="#è¿æ¥ä¸æ£€æµ‹">è¿æ¥ä¸æ£€æµ‹</a></h2>
<p><img src="ee/../images/usb/USB_connection_detection.png" alt="USB è¿æ¥æ£€æµ‹" /></p>
<p><img src="ee/../images/usb/USB_fs_device_connection.png" alt="USB å…¨é€Ÿè®¾å¤‡è¿æ¥" /></p>
<p><img src="ee/../images/usb/USB_hs_device_connection.png" alt="USB é«˜é€Ÿè®¾å¤‡è¿æ¥" /></p>
<h3 id="æ€»çº¿çš„çŠ¶æ€"><a class="header" href="#æ€»çº¿çš„çŠ¶æ€">æ€»çº¿çš„çŠ¶æ€</a></h3>
<div class="table-wrapper"><table><thead><tr><th>å¸¸è§çš„æ€»çº¿çŠ¶æ€</th><th>æè¿°</th></tr></thead><tbody>
<tr><td>æ­£å¸¸å·¥ä½œ</td><td>æ€»çº¿ä¸Šå­˜åœ¨å‘¨æœŸæ€§ SOF åŒ…</td></tr>
<tr><td>æ€»çº¿å¤ä½</td><td>æ€»çº¿ç»´æŒ SE0 çŠ¶æ€  &gt; 10ms</td></tr>
<tr><td>æ€»çº¿æŒ‚èµ·</td><td>æ€»çº¿æ— æ´»åŠ¨ &gt; 3ms</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>å¸¸è§çš„å‡ ç§å˜åŒ–</th><th>è§¦å‘ç‚¹</th></tr></thead><tbody>
<tr><td>æ— è¿æ¥ -&gt; è¿æ¥</td><td>D+/D- ä¸Šå‡ºç°é«˜ç”µå¹³ &gt; 2ms</td></tr>
<tr><td>æ­£å¸¸ -&gt; æŒ‚èµ·</td><td>J çŠ¶æ€ä¿æŒ &gt; 3ms</td></tr>
<tr><td>æŒ‚èµ· -&gt; æ­£å¸¸ï¼ˆå”¤é†’ï¼‰</td><td>å‡ºç° K çŠ¶æ€ä¿¡å·å¹¶æŒç»­ä¸€æ®µæ—¶é—´</td></tr>
</tbody></table>
</div>
<h2 id="æšä¸¾"><a class="header" href="#æšä¸¾">æšä¸¾</a></h2>
<p>:::tip æšä¸¾çš„å®šä¹‰</p>
<p>USB ä¸»è®¾å¤‡å‘ USB ä»è®¾å¤‡é€šè¿‡è·å–å„ç§æè¿°ç¬¦ï¼Œä»è€Œäº†è§£è®¾å¤‡å±æ€§ï¼ŒçŸ¥é“æ˜¯ä»€ä¹ˆæ ·çš„è®¾å¤‡ï¼Œå¹¶åŠ è½½å¯¹åº”çš„ USB ç±»ã€åŠŸèƒ½é©±åŠ¨ç¨‹åºï¼Œç„¶åè¿›è¡Œåç»­ä¸€ç³»åˆ—çš„æ•°æ®é€šä¿¡ã€‚</p>
<p>:::</p>
<ul>
<li>ä¸»è®¾å¤‡è¿æ¥è¯†åˆ«ä»è®¾å¤‡å¿…é¡»çš„è¿‡ç¨‹</li>
<li>ç”±å¤šä¸ªæ§åˆ¶ä¼ è¾“æ„æˆ</li>
<li>ç»è¿‡åœ°å€0 ï¼ˆç¼ºçœåœ°å€ï¼‰åˆ°å…¶ä»–åœ°å€ï¼ˆä¸»è®¾å¤‡åˆ†é…åœ°å€ï¼‰çš„é€šè®¯</li>
<li>å¯¹äºæŒ‚è½½å¤šä¸ª USB ä»è®¾å¤‡çš„ç³»ç»Ÿï¼Œä¸»è®¾å¤‡æ˜¯é€ä¸€è¿›è¡Œæšä¸¾æ“ä½œ</li>
</ul>
<p><img src="ee/../images/usb/USB_enumeration.png" alt="USB æšä¸¾" /></p>
<h3 id="è®¾å¤‡æè¿°ç¬¦"><a class="header" href="#è®¾å¤‡æè¿°ç¬¦">è®¾å¤‡æè¿°ç¬¦</a></h3>
<p>ç¬¬ä¸€ä¸ªéœ€è¦è·å–çš„æè¿°ç¬¦ï¼Œé•¿åº¦å›ºå®š 18 å­—èŠ‚ã€‚</p>
<h3 id="é…ç½®æè¿°ç¬¦"><a class="header" href="#é…ç½®æè¿°ç¬¦">é…ç½®æè¿°ç¬¦</a></h3>
<p>æè¿°äº†è®¾å¤‡ç‰¹å®šçš„é…ç½®ï¼Œæä¾›äº†å½“å‰é…ç½®ä¸‹è®¾å¤‡çš„åŠŸèƒ½æ¥å£ï¼Œä¾›ç”µæ–¹å¼ï¼Œè€—ç”µç­‰ä¿¡æ¯ã€‚æ˜¯ä¸€ä¸ªé…ç½®çš„é›†åˆï¼Œé›†åˆé•¿åº¦ä¸å›ºå®šï¼ŒåŒ…å«äº†é…ç½®æè¿°ç¬¦ã€æ¥å£æè¿°ç¬¦ã€ç±»å®šä¹‰æè¿°ç¬¦ã€ç«¯ç‚¹æè¿°ç¬¦ã€‚</p>
<h2 id="æ§åˆ¶ä¼ è¾“"><a class="header" href="#æ§åˆ¶ä¼ è¾“">æ§åˆ¶ä¼ è¾“</a></h2>
<p><img src="ee/../images/usb/USB_control_transfer.png" alt="USB æ§åˆ¶ä¼ è¾“" /></p>
<p><img src="ee/../images/usb/USB_control_transfer_transactions.png" alt="USB æ§åˆ¶ä¼ è¾“æ¶‰åŠåˆ°çš„äº‹åŠ¡" /></p>
<h3 id="å»ºç«‹é˜¶æ®µ"><a class="header" href="#å»ºç«‹é˜¶æ®µ">å»ºç«‹é˜¶æ®µ</a></h3>
<p><img src="ee/../images/usb/USB_control_transfer_setup_stage.png" alt="USB æ§åˆ¶ä¼ è¾“å»ºç«‹é˜¶æ®µ" /></p>
<h2 id="usb-é”®ç›˜"><a class="header" href="#usb-é”®ç›˜">USB é”®ç›˜</a></h2>
<p><img src="ee/../images/usb/USB_keyboard_design.png" alt="USB é”®ç›˜è®¾è®¡æ€è·¯" /></p>
<p><img src="ee/../images/usb/USB_keyboard_sw.png" alt="USB è½¯ä»¶è®¾è®¡" /></p>
<h2 id="å‚è€ƒæ–‡çŒ®"><a class="header" href="#å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</a></h2>
<ul>
<li><a href="https://www.usb.org">USB åä¼šå®˜ç½‘</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git-åŸºç¡€"><a class="header" href="#git-åŸºç¡€">Git åŸºç¡€</a></h1>
<h2 id="æ¼”ç¤ºæ–‡ç¨¿"><a class="header" href="#æ¼”ç¤ºæ–‡ç¨¿">æ¼”ç¤ºæ–‡ç¨¿</a></h2>
<p><a href="https://suda-morris.github.io/git_workflow_lecture/">Git å·¥ä½œæµä»‹ç»</a></p>
<h2 id="è§†é¢‘æ¼”ç¤º"><a class="header" href="#è§†é¢‘æ¼”ç¤º">è§†é¢‘æ¼”ç¤º</a></h2>
<p><a href="https://www.bilibili.com/video/BV1zv411i7ce/">Git å·¥ä½œæµä»‹ç»</a></p>
<h2 id="gitconfig-æ–‡ä»¶æ¨¡æ¿"><a class="header" href="#gitconfig-æ–‡ä»¶æ¨¡æ¿">.gitconfig æ–‡ä»¶æ¨¡æ¿</a></h2>
<pre><code class="language-bash">[user]
    name = suda-morris
    email = 362953310@qq.com
[branch]
    autosetuprebase = always

[core]
    editor = vim
    quotepath = false
    autocrlf = false
    pager = less -+$LESS -FRX

[color]
    status = auto
    branch = auto
    diff = auto
    ui = true
    pager = true

[color &quot;branch&quot;]
    current = green reverse
    local = white
    remote = red

[color &quot;diff&quot;]
    meta = yellow bold
    frag = magenta bold
    old = red bold
    new = green bold

[color &quot;status&quot;]
    added = yellow
    changed = red
    untracked = cyan

[diff]
    tool = git_diff_wrapper

[difftool &quot;git_diff_wrapper&quot;]
    cmd = vimdiff -n   +2  $LOCAL $REMOTE

[pager]
    diff =

[difftool]
    prompt = no

[alias]
    glf  = log -n 10 --name-only --format=\&quot;%Cgreen%h %Cred[%ci] %Creset&lt;%an&gt; %Creset %Cgreen%s %Creset \&quot;
    gl  = log -n 30 --date-order --format=\&quot;%Cgreen%h %Cred[%ci] %Creset &lt;%an&gt;%C(yellow)%d%Creset %Creset %Cgreen%s %Creset \&quot;
    gll  = log -n 30  --format=\&quot;%Cgreen%H %Cred[%ci] %Creset&lt;%an&gt; %Creset %Cgreen%s %Creset \&quot;
    gl3 = log -n 20  --format=\&quot;%Cgreen%h %Cred[%ci] %Creset&lt;%an&gt; %Creset %Cgreen%s %Creset \&quot; --graph
    gl2 = log --format=\&quot;%Cgreen%h %Cred[%ci] %Creset&lt;%an&gt; %Creset %Cgreen%s %Creset \&quot;
    glc = log --format=\&quot;%Cgreen%h %Cred[%cd] %Creset&lt;committer:%cn&gt; : %Cred[%ad] %Creset&lt;author:%cn&gt; %Creset \&quot;
    glc2 = log --format=\&quot;%Cgreen%h %Cred[%ci] %Creset&lt;committer:%cn&gt; : %Cred[%ai] %Creset&lt;author:%cn&gt; %Creset \&quot;
    glc3 = log --format=\&quot;%Cgreen%h %Cred[%ci] %Creset&lt;committer:%cn&gt; : %Cred[%ai] %Creset&lt;author:%cn&gt; %n %Cgreen%s %Creset \&quot;
    glt = log --format=\&quot;%Cgreen%h :: %ad :: %aD :: %ar :: %at :: %ai %Creset \&quot;
    glw = log  -n 20  --format=\&quot;%Cgreen%h %Cred[%ci] %Creset&lt;%an&gt; %Creset %n%Cgreen%s%Creset%n%b  \&quot;
    gldetail = log --format=\&quot;%h `[%cd] `&lt;committer:%cn&gt; `[%ad] `&lt;author:%an&gt; ` %s \&quot;
    hist = log --pretty=format:\&quot;%C(yellow)%h %C(red)%d %C(reset)%s %C(green)[%an] %C(blue)%ad\&quot; --topo-order --graph
    latest = for-each-ref --sort=-committerdate --format=\&quot;%(committername)@%(refname:short) [%(committerdate:short)] %(contents)\&quot;
    st = status -uno -s
    st2 = status -s
    co = checkout
    bl = blame --date=short
    ci = commit
    dt = difftool
    dif = diff --word-diff
    di = diff --no-ext-diff

[log]
    date = short

[commit]
    template = /home/morris/.gitmessage
</code></pre>
<h2 id="gitmessage-æ–‡ä»¶æ¨¡æ¿"><a class="header" href="#gitmessage-æ–‡ä»¶æ¨¡æ¿">.gitmessage æ–‡ä»¶æ¨¡æ¿</a></h2>
<pre><code>vfs/fatfs: fix stat call failing when called for mount point

FATFS does not support f_stat call for drive root. When handling stat
for drive root, don't call f_stat and just return struct st with S_IFDIR
flag set.

Closes https://github.com/espressif/esp-idf/issues/xxx
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ç»ˆç«¯æ¼”ç¤ºå·¥å…·"><a class="header" href="#ç»ˆç«¯æ¼”ç¤ºå·¥å…·">ç»ˆç«¯æ¼”ç¤ºå·¥å…·</a></h1>
<h2 id="slides"><a class="header" href="#slides"><a href="https://github.com/maaslalani/slides">Slides</a></a></h2>
<h3 id="å®‰è£…ä¸ä½¿ç”¨"><a class="header" href="#å®‰è£…ä¸ä½¿ç”¨">å®‰è£…ä¸ä½¿ç”¨</a></h3>
<pre><code class="language-bash"># å®‰è£… slides è½¯ä»¶
yay -S slides
# ä½¿ç”¨ slides è½¯ä»¶
slides path/to/markdown/file.md
</code></pre>
<h3 id="æ¨¡æ¿"><a class="header" href="#æ¨¡æ¿">æ¨¡æ¿</a></h3>
<pre><code class="language-markdown">---
theme: https://github.com/maaslalani/slides/raw/main/styles/theme.json
---

# Welcome to Slides

A terminal based presentation tool

---

# Code blocks

Slides allows you to execute code blocks directly inside your slides!

Just press `ctrl+e` and the result of the code block will be displayed as virtual
text in your slides.

---

### Bash

```bash
ls
```

---

### Go

```go
package main

import &quot;fmt&quot;

func main() {
  fmt.Println(&quot;Hello, world!&quot;)
}
```

---

### Javascript

```javascript
console.log(&quot;Hello, world!&quot;)
```

---

### Python

```python
print(&quot;Hello, world!&quot;)
```

---

# h1
## h2
### h3
#### h4
##### h5
###### h6

---

# Markdown components

You can use everything in markdown!

* Like bulleted list
* You know the deal

1. Numbered lists too

* [x] ToDo

---

# Tables

| Tables | Too    |
| ------ | ------ |
| Even   | Tables |

---

# Graphs

```
digraph {
    rankdir = LR;
    a -&gt; b;
    b -&gt; c;
}
```
```
â”Œâ”€â”€â”€â”     â”Œâ”€â”€â”€â”     â”Œâ”€â”€â”€â”
â”‚ a â”‚ â”€â”€â–¶ â”‚ b â”‚ â”€â”€â–¶ â”‚ c â”‚
â””â”€â”€â”€â”˜     â””â”€â”€â”€â”˜     â””â”€â”€â”€â”˜
```
---

~~~uname -a
This will be replaced by command `uname -a`
~~~

---

SEE YOU!

[Blog](https://suda-mottis.github.io/blog)

![ME](/home/morris/blog/docs/.vuepress/public/author.jpg)

</code></pre>
<h2 id="mdp"><a class="header" href="#mdp"><a href="https://github.com/visit1985/mdp">mdp</a></a></h2>
<h3 id="å®‰è£…ä¸ä½¿ç”¨-1"><a class="header" href="#å®‰è£…ä¸ä½¿ç”¨-1">å®‰è£…ä¸ä½¿ç”¨</a></h3>
<pre><code class="language-bash"># å®‰è£… mdp è½¯ä»¶
sudo pacman -S mdp
# ä½¿ç”¨ mdp è½¯ä»¶
mdp path/to/markdown/file.md
</code></pre>
<h3 id="æ¨¡æ¿-1"><a class="header" href="#æ¨¡æ¿-1">æ¨¡æ¿</a></h3>
<pre><code class="language-markdown">%title: Markdown Presentation æ¼”ç¤ºæ–‡ç¨¿ ğŸ¥³
%author: suda-morris
%date: 2019-11-11

-&gt; # ä¸€çº§æ ‡é¢˜ï¼Œå±…ä¸­ &lt;-

-&gt; ## äºŒçº§æ ‡é¢˜ï¼Œå±…ä¸­ &lt;-

-&gt; æ–‡æœ¬å†…å®¹ï¼Œå±…ä¸­ &lt;-

_åŸºæœ¬æ§åˆ¶:_

ä¸‹ä¸€é¡µ      *Enter*, *Space*, *Page Down*, *j*, *l*,
            *Down Arrow*, *Right Arrow*

å‰ä¸€é¡µ      *Backspace*, *Page Up*, *h*, *k*,
            *Up Arrow*, *Left Arrow*

é€€å‡º        *q*
é‡è½½        *r*
ç¬¬ N é¡µ     *1..9*
é¦–é¡µ        *Home*, *g*
æœ«é¡µ        *End*, *G*

-------------------------------------------------


-&gt; # ä»£ç å±•ç¤º &lt;-

è¡Œå†…ä»£ç  `main()`

ä»£ç å—

â€‹```
int main(int argc, char *argv[]) {
    printf(&quot;%s\n&quot;, &quot;Hello world!&quot;);
}
â€‹```

-------------------------------------------------

-&gt; # å¼•ç”¨ &lt;-

&gt; å¼•ç”¨
&gt;&gt; åµŒå¥—å¼•ç”¨ 1
&gt;&gt;&gt; åµŒå¥—å¼•ç”¨ 2

-------------------------------------------------

-&gt; # ä¸‹åˆ’çº¿ä¸é«˜äº® &lt;-

_ä»…ä¸‹åˆ’çº¿_ *é«˜äº®* _*ä¸‹åˆ’çº¿ä¸”é«˜äº®*_

-------------------------------------------------

-&gt; # åˆ—è¡¨ &lt;-

list
* major
    - minor
        - *important*
          detail
    - minor

-------------------------------------------------

-&gt; # é€è¡Œæ˜¾ç¤º &lt;-

Agenda
^
* major
^
    * minor
^
* major
  ^
    * minor
      ^
        * detail

-------------------------------------------------

-&gt; # URL é“¾æ¥ &lt;-

[blog](https://suda-morris.github.io/blog)

-------------------------------------------------

-&gt; # UTF-8 ç‰¹æ®Šå­—ç¬¦ &lt;-

ae = Ã¤, oe = Ã¶, ue = Ã¼, ss = ÃŸ
upsilon = Æ±, phi = É¸

â–›â–€â–€â–€â–€â–€â–€â–€â–€â–€â–œ
â–Œrectangleâ–
â–™â–„â–„â–„â–„â–„â–„â–„â–„â–„â–Ÿ


-------------------------------------------------

-&gt; # æ¼”ç¤ºçš„æš‚åœä¸æ¢å¤ &lt;-

æŒ‰ä¸‹ *Ctrl + z* å¯ä»¥æš‚åœå½“å‰æ¼”ç¤ºï¼Œå›åˆ°ç»ˆç«¯

åœ¨ç»ˆç«¯è¾“å…¥ *fg* å¯ä»¥æ¢å¤ä¹‹å‰çš„æ¼”ç¤º

-------------------------------------------------

-&gt; # å¯¼å‡ºåˆ° PDF æ–‡ä»¶ &lt;-

éœ€è¦å®‰è£…é¢å¤–çš„å·¥å…·ï¼š

\- *markdown* å°† Markdown æ–‡ä»¶å¯¼å‡ºä¸º HTML
\- *wkhtmltopdf* å°† HTML è½¬æ¢ä¸º PDF

`$ markdown sample.md | wkhtmltopdf - sample.pdf`
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
    </body>
</html>
